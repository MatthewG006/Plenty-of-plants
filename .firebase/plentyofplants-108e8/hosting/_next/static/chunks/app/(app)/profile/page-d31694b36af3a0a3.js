(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{2006:(e,t,a)=>{Promise.resolve().then(a.bind(a,4060))},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>i});var s=a(5155),r=a(2115),l=a(7129),n=a(3101),o=a(4269);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(i({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},4060:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(5155),r=a(5897),l=a(6948),n=a(6259),o=a(5740),i=a(1503),d=a(1362),c=a(5299),u=a(508),m=a(8055),f=a(4926),x=a(2115),h=a(5239),p=a(4269),v=a(3998),j=a(63),g=a(8053),y=a(4901),N=a(4585),w=a(9253),b=a(5894),S=a(9285);function A(e){let{icon:t,label:a,value:r,valueClassName:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-start gap-4 py-3",children:[t&&(0,s.jsx)(t,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground w-32",children:a}),(0,s.jsx)("p",{className:(0,p.cn)("font-semibold text-primary",l),children:r})]})}function C(){return(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden rounded-lg",children:(0,s.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-1/12 h-[200%] bg-white/30 animate-sheen"})})}function R(){return(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:10}).map((e,t)=>(0,s.jsx)(o.A,{className:"absolute animate-sparkle",style:{top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(1.5*Math.random(),"s"),color:"hsl(".concat(360*Math.random(),", 100%, 70%)"),width:"".concat(5+5*Math.random(),"px"),height:"".concat(5+5*Math.random(),"px")}},t))})}function E(){return(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:7}).map((e,t)=>(0,s.jsx)(o.A,{className:"absolute text-red-500 animate-sparkle",style:{top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(1.5*Math.random(),"s"),width:"".concat(8+8*Math.random(),"px"),height:"".concat(8+8*Math.random(),"px")}},t))})}function M(){return(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(o.A,{className:"absolute text-yellow-300 animate-sparkle",style:{top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(1.5*Math.random(),"s"),width:"".concat(5+5*Math.random(),"px"),height:"".concat(5+5*Math.random(),"px")}},t))})}function T(e){let{plant:t,isSelected:a,onSelect:r}=e;return(0,s.jsx)(l.Zp,{onClick:r,className:(0,p.cn)("group overflow-hidden shadow-md w-full cursor-pointer transition-all duration-200",a&&"ring-2 ring-primary ring-offset-2",!a&&"hover:scale-105"),children:(0,s.jsxs)(l.Wu,{className:"p-0 relative",children:[(0,s.jsxs)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:["placeholder"!==t.image?(0,s.jsx)(h.default,{src:t.image,alt:t.name,fill:!0,sizes:"(max-width: 768px) 33vw, 20vw",priority:1===t.id,className:"object-cover","data-ai-hint":t.hint}):(0,s.jsx)(i.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"}),t.hasGlitter&&(0,s.jsx)(M,{}),t.hasRedGlitter&&(0,s.jsx)(E,{}),t.hasSheen&&(0,s.jsx)(C,{}),t.hasRainbowGlitter&&(0,s.jsx)(R,{}),"Evolved"===t.form&&(0,s.jsx)("div",{className:"absolute top-1 right-1 bg-secondary/80 text-secondary-foreground p-1 rounded-full shadow-md",children:(0,s.jsx)(o.A,{className:"w-3 h-3"})})]}),(0,s.jsx)("div",{className:"p-2 text-center bg-white/50",children:(0,s.jsx)("p",{className:"text-xs font-semibold text-primary truncate",children:t.name})}),a&&(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/70 flex items-center justify-center",children:(0,s.jsx)(d.A,{className:"w-10 h-10 text-primary-foreground animate-in zoom-in-75"})})]})})}function k(){var e;let{user:t,gameData:a}=(0,y.A)(),o=(0,j.useRouter)(),{toast:i}=(0,b.dj)(),[d,h]=(0,x.useState)(0),[p,C]=(0,x.useState)(0),R=(0,x.useMemo)(()=>(null==a?void 0:a.plants)?Object.values(a.plants).sort((e,t)=>t.level-e.level):[],[a]),[E,M]=(0,x.useState)([]),[k,_]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(null==a?void 0:a.plants){let e=Object.values(a.plants);h(e.length),C(e.filter(e=>"Base"!==e.form).length)}(null==a?void 0:a.showcasePlantIds)&&M(a.showcasePlantIds)},[a]);let O=async()=>{try{await (0,w.CI)(N.j),o.push("/login")}catch(e){console.error("Failed to log out",e)}},D=async()=>{if(t){_(!0);try{await (0,S.zw)(t.uid,E),i({title:"Showcase Updated!",description:"Your new showcase is now visible on the Community page."})}catch(e){console.error("Failed to update showcase",e),i({variant:"destructive",title:"Error",description:"Could not save your showcase selection."})}finally{_(!1)}}};if(!t||!a)return(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,s.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})});let z={username:t.displayName||"PlantLover",email:t.email||"you@example.com",gameId:"#".concat(t.uid.slice(0,8).toUpperCase()),gold:a.gold||0,avatarColor:a.avatarColor||"hsl(120, 70%, 85%)"};return(0,s.jsxs)("div",{className:"p-4 space-y-6 pb-24",children:[(0,s.jsx)("header",{className:"pb-4",children:(0,s.jsx)("h1",{className:"text-3xl text-primary text-center",children:"My Profile"})}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"items-center text-center",children:[(0,s.jsxs)(r.eu,{className:"h-24 w-24 mb-4",children:[(0,s.jsx)(r.BK,{src:"",alt:"User avatar"}),(0,s.jsx)(r.q5,{style:{backgroundColor:z.avatarColor},className:"text-4xl font-bold text-primary/70",children:z.username?z.username.charAt(0).toUpperCase():(0,s.jsx)(u.A,{className:"h-12 w-12"})})]}),(0,s.jsx)(l.ZB,{className:"text-2xl",children:z.username}),(0,s.jsx)("p",{className:"text-muted-foreground",children:z.gameId})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)(n.w,{className:"my-2"}),(0,s.jsx)(A,{label:"Email",value:z.email,valueClassName:"text-xs"}),(0,s.jsx)(n.w,{}),(0,s.jsx)(A,{label:"Gold",value:null!=(e=z.gold)?e:0,valueClassName:"text-xs",icon:m.A}),(0,s.jsx)(n.w,{}),(0,s.jsx)(A,{label:"Plants Collected",value:d,valueClassName:"text-xs"}),(0,s.jsx)(n.w,{}),(0,s.jsx)(A,{label:"Plants Evolved",value:p,valueClassName:"text-xs"})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Community Showcase"}),(0,s.jsxs)(l.BT,{children:["Select up to ",5," plants to show off to the community. Changes are saved when you press the button below."]})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-3",children:R.map(e=>(0,s.jsx)(T,{plant:e,isSelected:E.includes(e.id),onSelect:()=>{var t;return t=e.id,void M(e=>e.includes(t)?e.filter(e=>e!==t):e.length<5?[...e,t]:(i({variant:"destructive",title:"Showcase Full",description:"You can only select up to ".concat(5," plants for your showcase.")}),e))}},e.id))}),0===R.length&&(0,s.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"You have no plants to showcase yet!"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(v.$,{onClick:D,disabled:k,children:k?(0,s.jsx)(c.A,{className:"animate-spin"}):"Save Showcase Selection"}),(0,s.jsxs)(g.Lt,{children:[(0,s.jsx)(g.tv,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"destructive",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Log Out"]})}),(0,s.jsxs)(g.EO,{children:[(0,s.jsxs)(g.wd,{children:[(0,s.jsx)(g.r7,{children:"Are you sure you want to log out?"}),(0,s.jsx)(g.$v,{children:"You will be returned to the login screen. Your plant collection is saved to your account."})]}),(0,s.jsxs)(g.ck,{children:[(0,s.jsx)(g.Zr,{children:"Cancel"}),(0,s.jsx)(g.Rx,{onClick:O,className:"bg-destructive hover:bg-destructive/90",children:"Yes, log out"})]})]})]})]})]})}},4901:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,O:()=>c});var s=a(5155),r=a(2115),l=a(9253),n=a(4585),o=a(9708),i=a(9285);let d=(0,r.createContext)({user:null,gameData:null,loading:!0}),c=e=>{let{children:t}=e,[a,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[f,x]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,l.hg)(n.j,async e=>{c(e),e||(m(null),x(!1))});return()=>e()},[]),(0,r.useEffect)(()=>{if(a){let e=(0,o.H9)(n.db,"users",a.uid),t=(0,o.aQ)(e,e=>{e.exists()?m(e.data()):(0,i.Jt)(a).then(e=>{m(e)}),x(!1)},e=>{console.error("Firestore subscription error:",e),m(null),x(!1)});return()=>t()}},[a]),(0,s.jsx)(d.Provider,{value:{user:a,gameData:u,loading:f},children:t})},u=()=>(0,r.useContext)(d)},5894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},o=[],i={toasts:[]};function d(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),o.forEach(e=>{e(i)})}function c(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(i);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5897:(e,t,a)=>{"use strict";a.d(t,{BK:()=>i,eu:()=>o,q5:()=>d});var s=a(5155),r=a(2115),l=a(7870),n=a(4269);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});o.displayName=l.bL.displayName;let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});i.displayName=l._V.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});d.displayName=l.H4.displayName},6259:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var s=a(5155),r=a(2115),l=a(7268),n=a(4269);let o=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:o=!0,...i}=e;return(0,s.jsx)(l.b,{ref:t,decorative:o,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});o.displayName=l.b.displayName},6948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>u});var s=a(5155),r=a(2115),l=a(4269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},8053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>m,Lt:()=>i,Rx:()=>v,Zr:()=>j,ck:()=>x,r7:()=>h,tv:()=>d,wd:()=>f});var s=a(5155),r=a(2115),l=a(2498),n=a(4269),o=a(3998);let i=l.bL,d=l.l9,c=l.ZL,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});u.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",a),...r})});h.displayName=l.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=l.VY.displayName;let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,n.cn)((0,o.r)(),a),...r})});v.displayName=l.rc.displayName;let j=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.ZD,{ref:t,className:(0,n.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});j.displayName=l.ZD.displayName}},e=>{e.O(0,[992,416,909,382,39,476,667,591,560,441,255,358],()=>e(e.s=2006)),_N_E=e.O()}]);