(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115);let l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:c,...f}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:o?24*Number(i)/Number(a):i,className:l("lucide",u),...f},[...c.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:i,...o}=r;return(0,s.createElement)(a,{ref:n,iconNode:t,className:l("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...o})});return r.displayName="".concat(e),r}},2751:(e,t,r)=>{Promise.resolve().then(r.bind(r,9547))},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>u});var s=r(5155),l=r(2115),n=r(7129),a=r(3101),i=r(4269),o=r(9689);let u=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:r,variant:l,size:a,asChild:d=!1,onClick:c,disableSfx:f=!1,...h}=e,g=d?n.DX:"button",{playSfx:m}=(0,o.n)();return(0,s.jsx)(g,{className:(0,i.cn)(u({variant:l,size:a,className:r})),ref:t,onClick:e=>{f||m("tap"),c&&c(e)},...h})});d.displayName="Button"},4901:(e,t,r)=>{"use strict";r.d(t,{A:()=>g,O:()=>h});var s=r(5155),l=r(2115),n=r(9253),a=r(4585),i=r(9708),o=r(5299),u=r(9285),d=r(3940),c=r(63);let f=(0,l.createContext)({user:null,gameData:null,loading:!0}),h=e=>{let{children:t}=e,[r,h]=(0,l.useState)(null),[g,m]=(0,l.useState)(null),[p,x]=(0,l.useState)(!0),v=(0,c.useRouter)(),b=(0,c.usePathname)();return((0,l.useEffect)(()=>{let e,t=(0,n.hg)(a.j2,async t=>{if(h(t),t){let r=(0,i.H9)(a.db,"users",t.uid);e=(0,i.aQ)(r,e=>{if(e.exists()){var r;let t=e.data(),s=t.likedUsers||{};Array.isArray(t.likedUsers)&&(s=t.likedUsers.reduce((e,t)=>(e[t]=1,e),{})),m({gold:t.gold||0,plants:t.plants||{},collectionPlantIds:t.collectionPlantIds||[],deskPlantIds:t.deskPlantIds||Array(u.aw).fill(null),gardenPlantIds:t.gardenPlantIds||Array(u.Oh).fill(null),seeds:t.seeds||[],draws:null!=(r=t.draws)?r:d.RY,lastDrawRefill:t.lastDrawRefill||Date.now(),lastFreeDrawClaimed:t.lastFreeDrawClaimed||0,lastLoginBonusClaimed:t.lastLoginBonusClaimed||0,sprinklerUnlocked:t.sprinklerUnlocked||!1,glitterCount:t.glitterCount||0,sheenCount:t.sheenCount||0,rainbowGlitterCount:t.rainbowGlitterCount||0,redGlitterCount:t.redGlitterCount||0,fertilizerCount:t.fertilizerCount||0,showcasePlantIds:t.showcasePlantIds||[],challenges:t.challenges||{},challengesStartDate:t.challengesStartDate||0,likes:t.likes||0,likedUsers:s,autoWaterUnlocked:t.autoWaterUnlocked||!1,autoWaterEnabled:t.autoWaterEnabled||!1,waterRefillCount:t.waterRefillCount||0,rubyCount:t.rubyCount||0,plantChatTokens:t.plantChatTokens||0})}else(0,u.Jt)(t).then(m);x(!1)},e=>{console.error("Firestore snapshot error:",e),m(null),x(!1)})}else m(null),x(!1)});return()=>{t(),e&&e()}},[]),(0,l.useEffect)(()=>{if(p)return;let e=["/login","/signup"].includes(b),t="/"===b;r||e||t?r&&e&&v.push("/home"):v.push("/login")},[r,p,b,v]),p&&"/"!==b)?(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,s.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,s.jsx)(f.Provider,{value:{user:r,gameData:g,loading:p},children:t})},g=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),l=r(5239),n=r(3998),a=r(9689),i=r(4901),o=r(63),u=r(5299),d=r(2115);function c(){let{playSfx:e}=(0,a.n)(),{user:t,loading:r}=(0,i.A)(),c=(0,o.useRouter)();return((0,d.useEffect)(()=>{if(!r&&t)return},[t,r,c]),r)?(0,s.jsx)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-splash-image",children:(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-white"})}):(0,s.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-between p-4 bg-splash-image",children:[(0,s.jsx)("div",{className:"flex-grow-[1] z-10"}),(0,s.jsxs)("div",{className:"z-10 flex flex-col items-center justify-center text-center animate-fade-in-up",children:[(0,s.jsx)(l.default,{src:"/logo.png",alt:"Plenty of Plants Logo",width:320,height:320,className:"","data-ai-hint":"plant logo"}),(0,s.jsx)("p",{className:"text-lg text-white font-bold -mt-16",style:{textShadow:"0 2px 4px rgba(0,0,0,1)"},children:"Your Digital Conservatory Awaits."}),(0,s.jsx)(n.$,{onClick:()=>{e("whoosh"),c.push(t?"/home":"/login")},className:"mt-12 animate-pulse-subtle bg-blue-500 hover:bg-blue-600",size:"lg",disableSfx:!0,children:(0,s.jsx)("span",{className:"text-xl px-8",children:"Tap to Enter"})})]}),(0,s.jsx)("div",{className:"flex-grow-[3] z-10"})]})}}},e=>{e.O(0,[992,416,760,7,967,184,441,255,358],()=>e(e.s=2751)),_N_E=e.O()}]);