"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96],{3998:(e,t,r)=>{r.d(t,{$:()=>u,r:()=>i});var a=r(5155),n=r(2115),s=r(7129),l=r(3101),o=r(4269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:u=!1,...c}=e,d=u?s.DX:"button";return(0,a.jsx)(d,{className:(0,o.cn)(i({variant:n,size:l,className:r})),ref:t,...c})});u.displayName="Button"},4901:(e,t,r)=>{r.d(t,{A:()=>d,O:()=>c});var a=r(5155),n=r(2115),s=r(9253),l=r(4585),o=r(9708),i=r(9285);let u=(0,n.createContext)({user:null,gameData:null,loading:!0}),c=e=>{let{children:t}=e,[r,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[f,h]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=(0,s.hg)(l.j,async e=>{c(e),e||(m(null),h(!1))});return()=>e()},[]),(0,n.useEffect)(()=>{if(r){let e=(0,o.H9)(l.db,"users",r.uid),t=(0,o.aQ)(e,e=>{e.exists()?m(e.data()):(0,i.Jt)(r).then(e=>{m(e)}),h(!1)},e=>{console.error("Firestore subscription error:",e),m(null),h(!1)});return()=>t()}},[r]),(0,a.jsx)(u.Provider,{value:{user:r,gameData:d,loading:f},children:t})},d=()=>(0,n.useContext)(u)},5626:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5894:(e,t,r)=>{r.d(t,{dj:()=>d});var a=r(2115);let n=0,s=new Map,l=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=[],i={toasts:[]};function u(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),o.forEach(e=>{e(i)})}function c(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function d(){let[e,t]=a.useState(i);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},6613:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},8096:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var a=r(5155),n=r(3998),s=r(2619),l=r.n(s),o=r(5626),i=r(6613),u=r(5299);let c=(0,r(1847).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var d=r(4901),m=r(2115),f=r(8138),h=r(5239),p=r(9689),g=r(5894);function x(){let{gameData:e}=(0,d.A)(),{playSfx:t}=(0,p.n)(),{toast:r}=(0,g.dj)(),[s,x]=(0,m.useState)(null),[v,w]=(0,m.useState)(null),[b,y]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{!async function(){if(null==e?void 0:e.plants){let t=Object.values(e.plants);if(t.length>0){let e=t[0];x(e);try{let t=await (0,f.x)(e.image);w(t)}catch(t){console.error("Failed to process image for park display:",t),w(e.image)}}}y(!1)}()},[e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-cover bg-center flex flex-col items-center justify-between text-white p-4 relative",style:{backgroundImage:"url('/park.png')"},children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,a.jsx)(n.$,{asChild:!0,variant:"secondary",children:(0,a.jsxs)(l(),{href:"/community",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Back to Showcase"]})})}),(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center gap-4 mt-16",children:(0,a.jsxs)("div",{className:"bg-black/50 p-6 rounded-lg text-center shadow-lg backdrop-blur-sm z-0",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold mb-2",children:["Welcome to",(0,a.jsx)("br",{}),"the Park"]}),(0,a.jsx)("p",{className:"text-lg mb-4",children:"A quiet place to relax... or compete!"}),(0,a.jsx)(n.$,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/community/contest",children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Enter Plant Beauty Contest"]})})]})}),(0,a.jsx)("div",{className:"w-full h-1/3 absolute bottom-0 left-0 flex items-end justify-start p-4 pointer-events-none",children:b?(0,a.jsx)(u.A,{className:"w-8 h-8 animate-spin text-white"}):v?(0,a.jsxs)("div",{className:"relative w-48 h-48 animate-fade-in-up",children:[(0,a.jsx)("div",{className:"absolute -top-8 left-1/2 -translate-x-1/4 w-24 h-12 bg-white rounded-full flex items-center justify-center cursor-pointer pointer-events-auto shadow-lg animate-pulse-subtle",onClick:()=>{t("tap"),r({title:"A Quiet Moment",description:"".concat((null==s?void 0:s.name)||"Your plant"," seems to be enjoying the peacefulness of the park.")})},children:(0,a.jsx)(c,{className:"w-8 h-8 text-black"})}),(0,a.jsx)(h.default,{src:v,alt:(null==s?void 0:s.name)||"A plant",fill:!0,className:"object-contain","data-ai-hint":null==s?void 0:s.hint})]}):null})]})})}},8138:(e,t,r)=>{async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;return new Promise((r,a)=>{let n=new window.Image;n.crossOrigin="anonymous",n.onload=()=>{let e=document.createElement("canvas"),{width:s,height:l}=n;s>l?s>t&&(l=Math.round(l*t/s),s=t):l>t&&(s=Math.round(s*t/l),l=t),e.width=s,e.height=l;let o=e.getContext("2d");if(!o)return a(Error("Could not get canvas context"));o.drawImage(n,0,0,s,l),r(e.toDataURL("image/jpeg",.8))},n.onerror=a,n.src=e})}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240;return new Promise((r,a)=>{let n=new window.Image;n.crossOrigin="anonymous",n.onload=()=>{let e=document.createElement("canvas"),{width:s,height:l}=n;e.width=s,e.height=l;let o=e.getContext("2d");if(!o)return a(Error("Could not get canvas context"));o.drawImage(n,0,0);let i=o.getImageData(0,0,s,l),u=i.data;for(let e=0;e<u.length;e+=4){let r=u[e],a=u[e+1],n=u[e+2];r>t&&a>t&&n>t&&(u[e+3]=0)}o.putImageData(i,0,0),r(e.toDataURL("image/png"))},n.onerror=t=>{console.warn("CORS or other error making background transparent, returning original image",t),r(e)},n.src=e})}r.d(t,{w:()=>a,x:()=>n})},9689:(e,t,r)=>{r.d(t,{G:()=>l,n:()=>o});var a=r(5155),n=r(2115);let s=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,n.useState)(()=>{{let e=localStorage.getItem("sfxVolume");return null!==e?parseFloat(e):.75}}),[o,i]=(0,n.useState)(()=>{{let e=localStorage.getItem("musicVolume");return null!==e?parseFloat(e):.2}}),[u,c]=(0,n.useState)(!1),d=(0,n.useRef)(null),m={tap:(0,n.useRef)(null),success:(0,n.useRef)(null),reward:(0,n.useRef)(null),chime:(0,n.useRef)(null),watering:(0,n.useRef)(null)};(0,n.useEffect)(()=>{d.current=new Audio("/music.mp3"),d.current.loop=!0,m.tap.current=new Audio("/sfx/tap.mp3"),m.success.current=new Audio("/sfx/success.mp3"),m.reward.current=new Audio("/sfx/reward.mp3"),m.chime.current=new Audio("/sfx/chime.mp3"),m.watering.current=new Audio("/sfx/watering.mp3")},[]),(0,n.useEffect)(()=>{d.current&&(d.current.volume=o),localStorage.setItem("musicVolume",String(o))},[o]);let f=(0,n.useCallback)(()=>{d.current&&d.current.paused&&d.current.play().then(()=>{c(!0)}).catch(e=>console.error("Music play failed on start:",e))},[]),h=(0,n.useCallback)(()=>{d.current&&(u?d.current.pause():d.current.play().catch(e=>console.error("Music play failed on toggle:",e)),c(!u))},[u]),p=(0,n.useCallback)(e=>{let t=m[e].current;t&&(t.volume=r,t.currentTime=0,t.play().catch(e=>console.error("SFX play failed",e)))},[r,m]);return(0,a.jsx)(s.Provider,{value:{sfxVolume:r,setSfxVolume:e=>{l(e),localStorage.setItem("sfxVolume",String(e))},musicVolume:o,setMusicVolume:e=>{i(e)},isMusicPlaying:u,toggleMusic:h,startMusic:f,playSfx:p},children:t})},o=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAudio must be used within an AudioProvider");return e}}}]);