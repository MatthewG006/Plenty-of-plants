(()=>{var e={};e.id=539,e.ids=[539],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21114:(e,t,r)=>{Promise.resolve().then(r.bind(r,77003))},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},44708:e=>{"use strict";e.exports=require("node:https")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58595:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(60687),a=r(29523),i=r(44493),l=r(82614);let n=(0,l.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=r(58595),c=r(81292);let d=(0,l.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var u=r(78726),p=r(11516),h=r(85814),x=r.n(h),m=r(30474),f=r(43210),g=r(88526),v=r(29867),w=r(63503),j=r(4780),y=r(53125);let b="plenty-of-plants-data";async function q(e){let t=await fetch(e),r=await t.blob();return new Promise((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result),s.onerror=t,s.readAsDataURL(r)})}async function N(e,t=256){return new Promise((r,s)=>{let a=new window.Image;a.onload=()=>{let e=document.createElement("canvas"),{width:i,height:l}=a;i>l?i>t&&(l=Math.round(l*t/i),i=t):l>t&&(i=Math.round(i*t/l),l=t),e.width=i,e.height=l;let n=e.getContext("2d");if(!n)return s(Error("Could not get canvas context"));n.drawImage(a,0,0,i,l),r(e.toDataURL("image/png"))},a.onerror=s,a.src=e})}function k({plant:e,open:t,onOpenChange:r}){return e?(0,s.jsx)(w.lG,{open:t,onOpenChange:r,children:(0,s.jsxs)(w.Cf,{className:"max-w-sm",children:[(0,s.jsx)(w.c7,{children:(0,s.jsx)(w.L3,{className:"font-headline text-3xl text-center",children:"A new plant!"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,s.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,s.jsx)(m.default,{src:e.imageDataUri,alt:e.name,width:256,height:256,className:"object-cover w-full h-full"})}),(0,s.jsx)("h3",{className:"text-2xl font-headline text-primary",children:e.name}),(0,s.jsx)("p",{className:"text-muted-foreground text-center",children:e.description})]}),(0,s.jsx)(w.Es,{children:(0,s.jsx)(w.HM,{asChild:!0,children:(0,s.jsx)(a.$,{className:"w-full font-headline text-lg",children:"Collect"})})})]})}):null}function P(){let{toast:e}=(0,v.dj)(),[t,r]=(0,f.useState)(null),[l,h]=(0,f.useState)(!1),[w,P]=(0,f.useState)(null),[_,C]=(0,f.useState)(0),[A,S]=(0,f.useState)(null);(0,f.useRef)(!1);let M=(0,f.useCallback)(()=>{let e=(0,y.yk)(),t=(0,y.N9)();if(C(e),e<y.RY){let e=432e5-(Date.now()-t.lastUpdated);e>0?S(function(e){let t=Math.floor(e/1e3),r=Math.floor(t/3600),s=Math.floor(t%3600/60);return`${r}h ${s}m`}(e)):S(null)}else S(null);return e},[]),D=async()=>{if(_<=0)return void e({variant:"destructive",title:"No Draws Left",description:"Visit the shop to get more draws or wait for your daily refill."});h(!0);try{let e,t;try{let t=localStorage.getItem(b);e=t?JSON.parse(t):{collection:[],desk:[]}}catch(t){console.error("Failed to read or parse localStorage",t),e={collection:[],desk:[]}}let r=[...e.collection||[],...(e.desk||[]).filter(e=>null!==e)];t=0===r.length?{name:"Friendly Fern",description:"A happy little fern to start your collection.",imageDataUri:await q("/fern.png")}:await (0,g.a)();let s=await N(t.imageDataUri);P({...t,imageDataUri:s}),(0,y.iF)(),M()}catch(t){console.error(t),e({variant:"destructive",title:"Failed to draw a plant",description:"There was an issue with the AI. Please try again."})}finally{h(!1)}},z=async()=>{let t;if(!w)return;try{let e=localStorage.getItem(b);t=e?JSON.parse(e):{collection:[],desk:[,,,].fill(null)}}catch(e){console.error("Failed to read or parse localStorage",e),t={collection:[],desk:[,,,].fill(null)}}let s=t.collection||[],a=t.desk||[,,,].fill(null),i={id:[...s,...a.filter(e=>null!==e)].reduce((e,t)=>Math.max(t.id,e),0)+1,name:w.name,form:"Base",image:w.imageDataUri,hint:"Friendly Fern"===w.name?"fern plant":w.name.toLowerCase().split(" ").slice(0,2).join(" "),description:w.description},l=a.findIndex(e=>null===e);-1!==l?a[l]=i:s.push(i);try{localStorage.setItem(b,JSON.stringify({collection:s,desk:a}))}catch(t){console.error("Failed to save to localStorage (quota may be exceeded)",t),e({variant:"destructive",title:"Storage Error",description:"Could not save your new plant. Your device storage might be full."})}r(i),P(null)};return(0,s.jsxs)("div",{className:"p-4 space-y-6 bg-background",children:[(0,s.jsxs)("header",{className:"flex flex-col items-center space-y-2",children:[(0,s.jsx)("h1",{className:"font-headline text-3xl text-chart-2 font-bold",children:"Plenty Of Plants"}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)(a.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)(x(),{href:"/settings",children:[(0,s.jsx)(n,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,s.jsx)(a.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)(x(),{href:"/profile",children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Profile"]})})]})]}),(0,s.jsxs)("main",{className:"space-y-6",children:[(0,s.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"text-xl font-semibold text-center",children:"Your Latest Plant"})}),(0,s.jsx)(i.Wu,{className:"flex flex-col items-center justify-center text-center min-h-[260px]",children:t?(0,s.jsxs)(x(),{href:"/room",className:"flex flex-col items-center gap-4 transition-transform hover:scale-105",children:[(0,s.jsx)("div",{className:"w-48 h-48 rounded-lg overflow-hidden border-2 border-primary/30 shadow-md",children:"placeholder"!==t.image?(0,s.jsx)(m.default,{src:t.image,alt:t.name,width:192,height:192,className:"object-cover w-full h-full","data-ai-hint":t.hint}):(0,s.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"w-16 h-16 text-muted-foreground"})})}),(0,s.jsx)("h3",{className:"text-xl font-headline text-primary",children:t.name})]}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"No plants collected yet. Time to draw one!"})})]}),(0,s.jsx)(i.Zp,{className:"shadow-sm",children:(0,s.jsxs)(i.Wu,{className:"flex flex-col items-center gap-4 pt-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:Array.from({length:y.RY}).map((e,t)=>{let r=t<_;return(0,s.jsx)("div",{className:(0,j.cn)("h-8 w-8 rounded-full flex items-center justify-center text-white shadow-inner",r?"bg-green-500":"bg-red-500"),children:r?(0,s.jsx)(d,{className:"h-5 w-5"}):(0,s.jsx)(u.A,{className:"h-5 w-5"})},t)})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:[(0,s.jsx)("span",{children:"Draws Available"}),A&&_<y.RY&&(0,s.jsxs)("span",{className:"ml-2",children:["(",`New draw in ${A}`,")"]})]})]}),(0,s.jsx)(a.$,{onClick:D,disabled:l||_<=0,size:"lg",className:"w-full font-semibold rounded-full mt-2",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Drawing..."]}):"Draw New Plant"})]})})]}),(0,s.jsx)(k,{plant:w,open:!!w,onOpenChange:e=>{e||z()}})]})}},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81202:(e,t,r)=>{Promise.resolve().then(r.bind(r,97551))},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},89708:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(65239),a=r(48088),i=r(88170),l=r.n(i),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c={children:["",{children:["(app)",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97551)),"/home/user/studio/src/app/(app)/home/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/user/studio/src/app/(app)/home/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/home/page",pathname:"/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(app)/home/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(app)/home/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,611,567,444,637,545,386],()=>r(89708));module.exports=s})();