(()=>{var e={};e.id=539,e.ids=[539],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},7252:e=>{"use strict";e.exports=require("express")},9812:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15036:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},18425:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40083cf436102374a173646e5e605cd3a64d1fb222":()=>j});var n=r(91199);r(42087);var a=r(95427),i=r(37612),s=r(79748),o=r.n(s),l=r(33873),c=r.n(l),u=r(33331);let d=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")});async function p(e,t){let r=(await o().readFile(e)).toString("base64");return`data:${t};base64,${r}`}let f=a.ai.definePrompt({name:"fallbackPlantDetailsPrompt",input:{schema:i.z.object({plantType:i.z.string().describe("The type of plant, e.g. 'succulent', 'fern'.")})},output:{schema:i.z.object({name:i.z.string().describe("A creative and unique two-word name for the provided plant type."),description:i.z.string().describe("A short, whimsical, one-sentence description for this plant.")})},prompt:'You are a creative botanist for a game. For the plant type "{{plantType}}", generate a unique two-word name and a whimsical one-sentence description for it.'}),m=()=>({name:"Sturdy Sprout",description:"A reliable little plant that shows up when you need it most.",imageDataUri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAA1BMVEUAAACnej3aAAAASElEQVR4nO3BMQEAAADCoPVPbQwfoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIC3AcUIAAFkqh/QAAAAAElFTkSuQmCC"}),h=a.ai.defineFlow({name:"getFallbackPlantFlow",inputSchema:i.z.object({existingNames:i.z.array(i.z.string()).optional().describe("A list of existing plant names to avoid duplicating.")}),outputSchema:d},async({existingNames:e})=>{try{let e=c().join(process.cwd(),"public","fallback-plants");await o().mkdir(e,{recursive:!0});let t=(await o().readdir(e)).filter(e=>e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg"));if(0===t.length)return console.warn("No fallback images found. Returning hardcoded plant."),m();let r=t[Math.floor(Math.random()*t.length)],n=c().parse(r).name,a=c().join(e,r),i=`image/${c().extname(r).substring(1)}`,s=await p(a,i),{output:l}=await f({plantType:n});if(!l)throw Error("Could not generate details for fallback.");return{name:l.name,description:l.description,imageDataUri:s}}catch(e){return console.error("Critical error in fallback flow, returning hardcoded plant.",e),m()}});(0,u.D)([h]),(0,n.A)(h,"7f3d2c43175875c6ef4f01702fb1efac6e1fa2a5d3",null);let g=i.z.object({existingNames:i.z.array(i.z.string()).optional().describe("A list of existing plant names to avoid duplicating.")}),x=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")});async function y(e=[]){return A({existingNames:e})}let w=a.ai.definePrompt({name:"plantDetailsPrompt",input:{schema:g},output:{schema:i.z.object({name:i.z.string().describe('A creative and unique name for a new fantasy plant. Should be two words. Avoid common plant names like "fern" or "cactus".'),description:i.z.string().describe("A short, whimsical description for this new plant, in one sentence."),imagePrompt:i.z.string().describe('A simple visual prompt for an image generation model to create a picture of this plant. e.g., "A whimsical glowing mushroom plant with a happy face."')})},prompt:`You are a creative botanist for a 2D game about collecting cute, magical plants. Generate one new, unique, and whimsical plant. The plant should have a cute and simple design, not a strange or other-worldly appearance. The plant must have a highly creative and unusual two-word name that is not a common plant type. It should also have a short, one-sentence description, and a prompt for an image generator.

You MUST NOT use any of the following names:
{{#each existingNames}}
- {{this}}
{{/each}}
`}),v=`
You MUST adhere to the following rules without exception:
1. **Art Style:** The final image must have a clean, 2D, illustrated style.
2. **The Pot:** The plant MUST be in a simple, terracotta pot.
3. **The Face:** The pot MUST have a simple, smiling face on it. This is not optional.
4. **The Plant:** The new plant character must be cute and simple. It absolutely MUST NOT have arms, legs, or a human-like body.
5. **Color Constraint:** The plant and pot MUST NOT be black. They should be colorful and vibrant.
6. **The Background:** The background MUST be a solid, pure white color. It absolutely cannot be black or any other color.
7. **Composition:** The image must contain ONLY the single plant character in its pot. NO other objects, text, people, hands, or background elements are allowed.
`,b=a.ai.definePrompt({name:"qualityControlPrompt",input:{schema:i.z.object({imageDataUri:i.z.string(),rules:i.z.string()})},output:{schema:i.z.object({isValid:i.z.boolean().describe("Whether the image meets all the rules."),reason:i.z.string().optional().describe("The reason for failure, if any.")})},prompt:`You are an art director for a video game. Your job is to perform quality control on AI-generated images.
Analyze the following image and determine if it strictly follows all of the provided rules.

**Image to Analyze:**
{{media url=imageDataUri}}

**Rules:**
{{{rules}}}

Does the image pass inspection?
`}),A=a.ai.defineFlow({name:"drawPlantFlow",inputSchema:g,outputSchema:x},async({existingNames:e})=>{let t=0;for(;t<=2;)try{let{output:t}=await w({existingNames:e});if(!t)throw Error("Could not generate plant details.");let r=null;try{let e=c().join(process.cwd(),"public","fern.png"),t=await o().readFile(e);r=`data:image/png;base64,${t.toString("base64")}`}catch(e){console.warn("Could not load reference image 'fern.png'. Generating image without it.",e)}let n=[];r?(n.push({media:{url:r,contentType:"image/png"}}),n.push({text:`Your primary goal is to replicate the art style of the provided reference image EXACTLY. Create a new plant character based on the description: "${t.imagePrompt}".

${v}`})):n.push({text:`Create a new plant character based on the description: "${t.imagePrompt}".

${v}`});let i=(await a.ai.generate({model:"googleai/gemini-2.0-flash-preview-image-generation",prompt:n,config:{responseModalities:["TEXT","IMAGE"]}})).media;if(!i||!i.url)throw Error("Could not generate plant image from AI.");let{output:s}=await b({imageDataUri:i.url,rules:v});if(!s||!s.isValid)throw Error(`Image failed QC: ${s?.reason}`);let l=c().join(process.cwd(),"public","fallback-plants"),u=`${t.name.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-")}.png`,d=c().join(l,u),p=i.url.split(";base64,").pop();if(p)try{await o().mkdir(l,{recursive:!0}),await o().writeFile(d,p,"base64"),console.log(`Saved new plant image to: ${d}`)}catch(e){console.error(`Failed to save new plant image to fallback folder: ${e}`)}return{name:t.name,description:t.description,imageDataUri:i.url}}catch(r){if(t++,r.message&&r.message.includes("API key not valid"))throw console.error("Authentication Error: The provided Google AI API key is invalid or missing.",r),Error("Invalid API Key");if(console.warn(`Attempt ${t} failed for drawPlantFlow. Reason: ${r.message}. Retrying...`),t>2)return console.error("Primary plant generation failed after all retries, triggering fallback.",r),h({existingNames:e})}return console.error("drawPlantFlow exhausted retries and did not return a value. Triggering fallback."),h({existingNames:e})});async function j(e=[]){return await y(e)}(0,u.D)([y]),(0,n.A)(y,"40c451bcb9fd697d00e6253b7c7f6f5b2f5e9f7ea1",null),(0,u.D)([j]),(0,n.A)(j,"40083cf436102374a173646e5e605cd3a64d1fb222",null)},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21114:(e,t,r)=>{Promise.resolve().then(r.bind(r,56594))},21820:e=>{"use strict";e.exports=require("os")},25177:(e,t,r)=>{"use strict";r.d(t,{C1:()=>b,bL:()=>v});var n=r(43210),a=r(11273),i=r(3416),s=r(60687),o="Progress",[l,c]=(0,a.A)(o),[u,d]=l(o),p=n.forwardRef((e,t)=>{var r,n;let{__scopeProgress:a,value:o=null,max:l,getValueLabel:c=h,...d}=e;(l||0===l)&&!y(l)&&console.error((r=`${l}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=y(l)?l:100;null===o||w(o,p)||console.error((n=`${o}`,`Invalid prop \`value\` of value \`${n}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let f=w(o,p)?o:null,m=x(f)?c(f,p):void 0;return(0,s.jsx)(u,{scope:a,value:f,max:p,children:(0,s.jsx)(i.sG.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":x(f)?f:void 0,"aria-valuetext":m,role:"progressbar","data-state":g(f,p),"data-value":f??void 0,"data-max":p,...d,ref:t})})});p.displayName=o;var f="ProgressIndicator",m=n.forwardRef((e,t)=>{let{__scopeProgress:r,...n}=e,a=d(f,r);return(0,s.jsx)(i.sG.div,{"data-state":g(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});function h(e,t){return`${Math.round(e/t*100)}%`}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function x(e){return"number"==typeof e}function y(e){return x(e)&&!isNaN(e)&&e>0}function w(e,t){return x(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=f;var v=p,b=m},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32467:e=>{"use strict";e.exports=require("node:http2")},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37540:e=>{"use strict";e.exports=require("node:console")},37830:e=>{"use strict";e.exports=require("node:stream/web")},41204:e=>{"use strict";e.exports=require("string_decoder")},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},44708:e=>{"use strict";e.exports=require("node:https")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56594:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ey});var n=r(60687),a=r(29523),i=r(44493),s=r(48206),o=r(82614);let l=(0,o.A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var c=r(70653),u=r(11516),d=r(58450),p=r(9812);let f=(0,o.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=r(58595),h=r(81292),g=r(78726),x=r(15036);let y=(0,o.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var w=r(85814),v=r.n(w),b=r(30474),A=r(43210),j=r(29867),N=r(63503),k=r(4780),S=r(53125),C=r(86632),P=r(23562),q=r(18780),E=r(79396),I=r(8487),z=r(63102),M=r(46982);let O={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function T(e={}){let t,r,n,a,i=null,s=0,o=!1,l=!1,c=!1,u=!1;function d(){if(!n){if(m()){c=!0;return}o||r.emit("autoplay:play");let{ownerWindow:e}=r.internalEngine();e.clearTimeout(s),s=e.setTimeout(w,a[r.selectedScrollSnap()]),i=new Date().getTime(),r.emit("autoplay:timerset"),o=!0}}function p(){if(!n){o&&r.emit("autoplay:stop");let{ownerWindow:e}=r.internalEngine();e.clearTimeout(s),s=0,i=null,r.emit("autoplay:timerstopped"),o=!1}}function f(){if(m())return c=o,p();c&&d()}function m(){let{ownerDocument:e}=r.internalEngine();return"hidden"===e.visibilityState}function h(){l||p()}function g(){l||d()}function x(){l=!0,p()}function y(){l=!1,d()}function w(){let{index:e}=r.internalEngine(),n=e.clone().add(1).get(),a=r.scrollSnapList().length-1,i=t.stopOnLastSnap&&n===a;if(r.canScrollNext()?r.scrollNext(u):r.scrollTo(0,u),r.emit("autoplay:select"),i)return p();d()}return{name:"autoplay",options:e,init:function(i,s){r=i;let{mergeOptions:o,optionsAtMedia:l}=s,c=o(O,T.globalOptions);if(t=l(o(c,e)),r.scrollSnapList().length<=1)return;u=t.jump,n=!1,a=function(e,t){let r=e.scrollSnapList();return"number"==typeof t?r.map(()=>t):t(r,e)}(r,t.delay);let{eventStore:m,ownerDocument:w}=r.internalEngine(),v=!!r.internalEngine().options.watchDrag,b=function(e,t){let r=e.rootNode();return t&&t(r)||r}(r,t.rootNode);m.add(w,"visibilitychange",f),v&&r.on("pointerDown",h),v&&!t.stopOnInteraction&&r.on("pointerUp",g),t.stopOnMouseEnter&&m.add(b,"mouseenter",x),t.stopOnMouseEnter&&!t.stopOnInteraction&&m.add(b,"mouseleave",y),t.stopOnFocusIn&&r.on("slideFocusStart",p),t.stopOnFocusIn&&!t.stopOnInteraction&&m.add(r.containerNode(),"focusout",d),t.playOnInit&&d()},destroy:function(){r.off("pointerDown",h).off("pointerUp",g).off("slideFocusStart",p),p(),n=!0,o=!1},play:function(e){void 0!==e&&(u=e),d()},stop:function(){o&&p()},reset:function(){o&&d()},isPlaying:function(){return o},timeUntilNext:function(){return i?a[r.selectedScrollSnap()]-(new Date().getTime()-i):null}}}function D(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function F(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&r.every(r=>{let n=e[r],a=t[r];return"function"==typeof n?`${n}`==`${a}`:D(n)&&D(a)?F(n,a):n===a})}function L(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function R(e){return"number"==typeof e}function $(e){return"string"==typeof e}function G(e){return"boolean"==typeof e}function U(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return Math.abs(e)}function V(e){return Math.sign(e)}T.globalOptions=void 0;function B(e){return K(e).map(Number)}function Y(e){return e[H(e)]}function H(e){return Math.max(0,e.length-1)}function W(e,t=0){return Array.from(Array(e),(e,r)=>t+r)}function K(e){return Object.keys(e)}function Q(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function Z(){let e=[],t={add:function(r,n,a,i={passive:!0}){let s;return"addEventListener"in r?(r.addEventListener(n,a,i),s=()=>r.removeEventListener(n,a,i)):(r.addListener(a),s=()=>r.removeListener(a)),e.push(s),t},clear:function(){e=e.filter(e=>e())}};return t}function J(e=0,t=0){let r=_(e-t);function n(r){return r<e||r>t}return{length:r,max:t,min:e,constrain:function(r){return n(r)?r<e?e:t:r},reachedAny:n,reachedMax:function(e){return e>t},reachedMin:function(t){return t<e},removeOffset:function(e){return r?e-r*Math.ceil((e-t)/r):e}}}function X(e){let t=e;function r(e){return R(e)?e:e.get()}return{get:function(){return t},set:function(e){t=r(e)},add:function(e){t+=r(e)},subtract:function(e){t-=r(e)}}}function ee(e,t){let r="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},n=t.style,a=null,i=!1;return{clear:function(){!i&&(n.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(i)return;let s=Math.round(100*e.direction(t))/100;s!==a&&(n.transform=r(s),a=s)},toggleActive:function(e){i=!e}}}let et={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function er(e,t,r){let n,a,i,s,o,l=e.ownerDocument,c=l.defaultView,u=function(e){function t(e,t){return function e(t,r){return[t,r].reduce((t,r)=>(K(r).forEach(n=>{let a=t[n],i=r[n],s=U(a)&&U(i);t[n]=s?e(a,i):i}),t),{})}(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(r){let n=r.breakpoints||{},a=K(n).filter(t=>e.matchMedia(t).matches).map(e=>n[e]).reduce((e,r)=>t(e,r),{});return t(r,a)},optionsMediaQueries:function(t){return t.map(e=>K(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}(c),d=(o=[],{init:function(e,t){return(o=t.filter(({options:e})=>!1!==u.optionsAtMedia(e).active)).forEach(t=>t.init(e,u)),t.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){o=o.filter(e=>e.destroy())}}),p=Z(),f=function(){let e,t={},r={init:function(t){e=t},emit:function(n){return(t[n]||[]).forEach(t=>t(e,n)),r},off:function(e,n){return t[e]=(t[e]||[]).filter(e=>e!==n),r},on:function(e,n){return t[e]=(t[e]||[]).concat([n]),r},clear:function(){t={}}};return r}(),{mergeOptions:m,optionsAtMedia:h,optionsMediaQueries:g}=u,{on:x,off:y,emit:w}=f,v=!1,b=m(et,er.globalOptions),A=m(b),j=[];function N(t,r){if(v)return;A=h(b=m(b,t)),j=r||j;let{container:o,slides:u}=A;i=($(o)?e.querySelector(o):o)||e.children[0];let x=$(u)?i.querySelectorAll(u):u;s=[].slice.call(x||i.children),n=function t(r){let n=function(e,t,r,n,a,i,s){let o,l,{align:c,axis:u,direction:d,startIndex:p,loop:f,duration:m,dragFree:h,dragThreshold:g,inViewThreshold:x,slidesToScroll:y,skipSnaps:w,containScroll:v,watchResize:b,watchSlides:A,watchDrag:j,watchFocus:N}=i,k={measure:function(e){let{offsetTop:t,offsetLeft:r,offsetWidth:n,offsetHeight:a}=e;return{top:t,right:r+n,bottom:t+a,left:r,width:n,height:a}}},S=k.measure(t),C=r.map(k.measure),P=function(e,t){let r="rtl"===t,n="y"===e,a=!n&&r?-1:1;return{scroll:n?"y":"x",cross:n?"x":"y",startEdge:n?"top":r?"right":"left",endEdge:n?"bottom":r?"left":"right",measureSize:function(e){let{height:t,width:r}=e;return n?t:r},direction:function(e){return e*a}}}(u,d),q=P.measureSize(S),E={measure:function(e){return e/100*q}},I=function(e,t){let r={start:function(){return 0},center:function(e){return(t-e)/2},end:function(e){return t-e}};return{measure:function(n,a){return $(e)?r[e](n):e(t,n,a)}}}(c,q),z=!f&&!!v,{slideSizes:M,slideSizesWithGaps:O,startGap:T,endGap:D}=function(e,t,r,n,a,i){let{measureSize:s,startEdge:o,endEdge:l}=e,c=r[0]&&a,u=function(){if(!c)return 0;let e=r[0];return _(t[o]-e[o])}(),d=c?parseFloat(i.getComputedStyle(Y(n)).getPropertyValue(`margin-${l}`)):0,p=r.map(s),f=r.map((e,t,r)=>{let n=t===H(r);return t?n?p[t]+d:r[t+1][o]-e[o]:p[t]+u}).map(_);return{slideSizes:p,slideSizesWithGaps:f,startGap:u,endGap:d}}(P,S,C,r,f||!!v,a),F=function(e,t,r,n,a,i,s,o,l){let{startEdge:c,endEdge:u,direction:d}=e,p=R(r);return{groupSlides:function(e){return p?B(e).filter(e=>e%r==0).map(t=>e.slice(t,t+r)):e.length?B(e).reduce((r,l,p)=>{let f=Y(r)||0,m=l===H(e),h=a[c]-i[f][c],g=a[c]-i[l][u],x=n||0!==f?0:d(s),y=_(g-(!n&&m?d(o):0)-(h+x));return p&&y>t+2&&r.push(l),m&&r.push(e.length),r},[]).map((t,r,n)=>{let a=Math.max(n[r-1]||0);return e.slice(a,t)}):[]}}}(P,q,y,f,S,C,T,D,0),{snaps:L,snapsAligned:U}=function(e,t,r,n,a){let{startEdge:i,endEdge:s}=e,{groupSlides:o}=a,l=o(n).map(e=>Y(e)[s]-e[0][i]).map(_).map(t.measure),c=n.map(e=>r[i]-e[i]).map(e=>-_(e)),u=o(c).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:c,snapsAligned:u}}(P,I,S,C,F),et=-Y(L)+Y(O),{snapsContained:er,scrollContainLimit:en}=function(e,t,r,n,a){let i=J(-t+e,0),s=r.map((e,t)=>{let{min:n,max:a}=i,s=i.constrain(e),o=t===H(r);return t?o||function(e,t){return 1>=_(e-t)}(n,s)?n:function(e,t){return 1>=_(e-t)}(a,s)?a:s:a}).map(e=>parseFloat(e.toFixed(3))),o=function(){let e=s[0],t=Y(s);return J(s.lastIndexOf(e),s.indexOf(t)+1)}();function l(e,t){return 1>=_(e-t)}return{snapsContained:function(){if(t<=e+2)return[i.max];if("keepSnaps"===n)return s;let{min:r,max:a}=o;return s.slice(r,a)}(),scrollContainLimit:o}}(q,et,U,v,0),ea=z?er:U,{limit:ei}=function(e,t,r){let n=t[0];return{limit:J(r?n-e:Y(t),n)}}(et,ea,f),es=function e(t,r,n){let{constrain:a}=J(0,t),i=t+1,s=o(r);function o(e){return n?_((i+e)%i):a(e)}function l(){return e(t,s,n)}let c={get:function(){return s},set:function(e){return s=o(e),c},add:function(e){return l().set(s+e)},clone:l};return c}(H(ea),p,f),eo=es.clone(),el=B(r),ec=({dragHandler:e,scrollBody:t,scrollBounds:r,options:{loop:n}})=>{n||r.constrain(e.pointerDown()),t.seek()},eu=({scrollBody:e,translate:t,location:r,offsetLocation:n,previousLocation:a,scrollLooper:i,slideLooper:s,dragHandler:o,animation:l,eventHandler:c,scrollBounds:u,options:{loop:d}},p)=>{let f=e.settled(),m=!u.shouldConstrain(),h=d?f:f&&m,g=h&&!o.pointerDown();g&&l.stop();let x=r.get()*p+a.get()*(1-p);n.set(x),d&&(i.loop(e.direction()),s.loop()),t.to(n.get()),g&&c.emit("settle"),h||c.emit("scroll")},ed=function(e,t,r,n){let a=Z(),i=1e3/60,s=null,o=0,l=0;function c(e){if(!l)return;s||(s=e,r(),r());let a=e-s;for(s=e,o+=a;o>=i;)r(),o-=i;n(o/i),l&&(l=t.requestAnimationFrame(c))}function u(){t.cancelAnimationFrame(l),s=null,o=0,l=0}return{init:function(){a.add(e,"visibilitychange",()=>{e.hidden&&(s=null,o=0)})},destroy:function(){u(),a.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:u,update:r,render:n}}(n,a,()=>ec(ek),e=>eu(ek,e)),ep=ea[es.get()],ef=X(ep),em=X(ep),eh=X(ep),eg=X(ep),ex=function(e,t,r,n,a,i){let s=0,o=0,l=a,c=.68,u=e.get(),d=0;function p(e){return l=e,m}function f(e){return c=e,m}let m={direction:function(){return o},duration:function(){return l},velocity:function(){return s},seek:function(){let t=n.get()-e.get(),a=0;return l?(r.set(e),s+=t/l,s*=c,u+=s,e.add(s),a=u-d):(s=0,r.set(n),e.set(n),a=t),o=V(a),d=u,m},settled:function(){return .001>_(n.get()-t.get())},useBaseFriction:function(){return f(.68)},useBaseDuration:function(){return p(a)},useFriction:f,useDuration:p};return m}(ef,eh,em,eg,m,.68),ey=function(e,t,r,n,a){let{reachedAny:i,removeOffset:s,constrain:o}=n;function l(e){return e.concat().sort((e,t)=>_(e)-_(t))[0]}function c(t,n){let a=[t,t+r,t-r];if(!e)return t;if(!n)return l(a);let i=a.filter(e=>V(e)===n);return i.length?l(i):Y(a)-r}return{byDistance:function(r,n){let l=a.get()+r,{index:u,distance:d}=function(r){let n=e?s(r):o(r),{index:a}=t.map((e,t)=>({diff:c(e-n,0),index:t})).sort((e,t)=>_(e.diff)-_(t.diff))[0];return{index:a,distance:n}}(l),p=!e&&i(l);if(!n||p)return{index:u,distance:r};let f=r+c(t[u]-d,0);return{index:u,distance:f}},byIndex:function(e,r){let n=c(t[e]-a.get(),r);return{index:e,distance:n}},shortcut:c}}(f,ea,et,ei,eg),ew=function(e,t,r,n,a,i,s){function o(a){let o=a.distance,l=a.index!==t.get();i.add(o),o&&(n.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(r.set(t.get()),t.set(a.index),s.emit("select"))}return{distance:function(e,t){o(a.byDistance(e,t))},index:function(e,r){let n=t.clone().set(e);o(a.byIndex(n.get(),r))}}}(ed,es,eo,ex,ey,eg,s),ev=function(e){let{max:t,length:r}=e;return{get:function(e){return r?-((e-t)/r):0}}}(ei),eb=Z(),eA=function(e,t,r,n){let a,i={},s=null,o=null,l=!1;return{init:function(){a=new IntersectionObserver(e=>{l||(e.forEach(e=>{i[t.indexOf(e.target)]=e}),s=null,o=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:n}),t.forEach(e=>a.observe(e))},destroy:function(){a&&a.disconnect(),l=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;let t=K(i).reduce((t,r)=>{let n=parseInt(r),{isIntersecting:a}=i[n];return(e&&a||!e&&!a)&&t.push(n),t},[]);return e&&(s=t),e||(o=t),t}}}(t,r,s,x),{slideRegistry:ej}=function(e,t,r,n,a,i){let{groupSlides:s}=a,{min:o,max:l}=n;return{slideRegistry:function(){let n=s(i);return 1===r.length?[i]:e&&"keepSnaps"!==t?n.slice(o,l).map((e,t,r)=>{let n=t===H(r);return t?n?W(H(i)-Y(r)[0]+1,Y(r)[0]):e:W(Y(r[0])+1)}):n}()}}(z,v,ea,en,F,el),eN=function(e,t,r,n,a,i,s,o){let l={passive:!0,capture:!0},c=0;function u(e){"Tab"===e.code&&(c=new Date().getTime())}return{init:function(d){o&&(i.add(document,"keydown",u,!1),t.forEach((t,u)=>{i.add(t,"focus",t=>{(G(o)||o(d,t))&&function(t){if(new Date().getTime()-c>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;let i=r.findIndex(e=>e.includes(t));R(i)&&(a.useDuration(0),n.index(i,0),s.emit("slideFocus"))}(u)},l)}))}}}(e,r,ej,ew,ex,eb,s,N),ek={ownerDocument:n,ownerWindow:a,eventHandler:s,containerRect:S,slideRects:C,animation:ed,axis:P,dragHandler:function(e,t,r,n,a,i,s,o,l,c,u,d,p,f,m,h,g,x,y){let{cross:w,direction:v}=e,b=["INPUT","SELECT","TEXTAREA"],A={passive:!1},j=Z(),N=Z(),k=J(50,225).constrain(f.measure(20)),S={mouse:300,touch:400},C={mouse:500,touch:600},P=m?43:25,q=!1,E=0,I=0,z=!1,M=!1,O=!1,T=!1;function D(e){if(!Q(e,n)&&e.touches.length>=2)return F(e);let t=i.readPoint(e),r=i.readPoint(e,w),s=_(t-E),l=_(r-I);if(!M&&!T&&(!e.cancelable||!(M=s>l)))return F(e);let u=i.pointerMove(e);s>h&&(O=!0),c.useFriction(.3).useDuration(.75),o.start(),a.add(v(u)),e.preventDefault()}function F(e){let t=u.byDistance(0,!1).index!==d.get(),r=i.pointerUp(e)*(m?C:S)[T?"mouse":"touch"],n=function(e,t){let r=d.add(-1*V(e)),n=u.byDistance(e,!m).distance;return m||_(e)<k?n:g&&t?.5*n:u.byIndex(r.get(),0).distance}(v(r),t),a=function(e,t){var r,n;if(0===e||0===t||_(e)<=_(t))return 0;let a=(r=_(e),n=_(t),_(r-n));return _(a/e)}(r,n);M=!1,z=!1,N.clear(),c.useDuration(P-10*a).useFriction(.68+a/50),l.distance(n,!m),T=!1,p.emit("pointerUp")}function L(e){O&&(e.stopPropagation(),e.preventDefault(),O=!1)}return{init:function(e){y&&j.add(t,"dragstart",e=>e.preventDefault(),A).add(t,"touchmove",()=>void 0,A).add(t,"touchend",()=>void 0).add(t,"touchstart",o).add(t,"mousedown",o).add(t,"touchcancel",F).add(t,"contextmenu",F).add(t,"click",L,!0);function o(o){(G(y)||y(e,o))&&function(e){let o=Q(e,n);if((T=o,O=m&&o&&!e.buttons&&q,q=_(a.get()-s.get())>=2,!o||0===e.button)&&!function(e){let t=e.nodeName||"";return b.includes(t)}(e.target)){z=!0,i.pointerDown(e),c.useFriction(0).useDuration(0),a.set(s);let n=T?r:t;N.add(n,"touchmove",D,A).add(n,"touchend",F).add(n,"mousemove",D,A).add(n,"mouseup",F),E=i.readPoint(e),I=i.readPoint(e,w),p.emit("pointerDown")}}(o)}},destroy:function(){j.clear(),N.clear()},pointerDown:function(){return z}}}(P,e,n,a,eg,function(e,t){let r,n;function a(e){return e.timeStamp}function i(r,n){let a=n||e.scroll,i=`client${"x"===a?"X":"Y"}`;return(Q(r,t)?r:r.touches[0])[i]}return{pointerDown:function(e){return r=e,n=e,i(e)},pointerMove:function(e){let t=i(e)-i(n),s=a(e)-a(r)>170;return n=e,s&&(r=e),t},pointerUp:function(e){if(!r||!n)return 0;let t=i(n)-i(r),s=a(e)-a(r),o=a(e)-a(n)>170,l=t/s;return s&&!o&&_(l)>.1?l:0},readPoint:i}}(P,a),ef,ed,ew,ex,ey,es,s,E,h,g,w,0,j),eventStore:eb,percentOfView:E,index:es,indexPrevious:eo,limit:ei,location:ef,offsetLocation:eh,previousLocation:em,options:i,resizeHandler:function(e,t,r,n,a,i,s){let o,l,c=[e].concat(n),u=[],d=!1;function p(e){return a.measureSize(s.measure(e))}return{init:function(a){i&&(l=p(e),u=n.map(p),o=new ResizeObserver(r=>{(G(i)||i(a,r))&&function(r){for(let i of r){if(d)return;let r=i.target===e,s=n.indexOf(i.target),o=r?l:u[s];if(_(p(r?e:n[s])-o)>=.5){a.reInit(),t.emit("resize");break}}}(r)}),r.requestAnimationFrame(()=>{c.forEach(e=>o.observe(e))}))},destroy:function(){d=!0,o&&o.disconnect()}}}(t,s,a,r,P,b,k),scrollBody:ex,scrollBounds:function(e,t,r,n,a){let i=a.measure(10),s=a.measure(50),o=J(.1,.99),l=!1;function c(){return!l&&!!e.reachedAny(r.get())&&!!e.reachedAny(t.get())}return{shouldConstrain:c,constrain:function(a){if(!c())return;let l=e.reachedMin(t.get())?"min":"max",u=_(e[l]-t.get()),d=r.get()-t.get(),p=o.constrain(u/s);r.subtract(d*p),!a&&_(d)<i&&(r.set(e.constrain(r.get())),n.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}(ei,eh,eg,ex,E),scrollLooper:function(e,t,r,n){let{reachedMin:a,reachedMax:i}=J(t.min+.1,t.max+.1);return{loop:function(t){if(!(1===t?i(r.get()):-1===t&&a(r.get())))return;let s=-1*t*e;n.forEach(e=>e.add(s))}}}(et,ei,eh,[ef,eh,em,eg]),scrollProgress:ev,scrollSnapList:ea.map(ev.get),scrollSnaps:ea,scrollTarget:ey,scrollTo:ew,slideLooper:function(e,t,r,n,a,i,s,o,l){let c=B(a),u=B(a).reverse(),d=m(f(u,s[0]),r,!1).concat(m(f(c,t-s[0]-1),-r,!0));function p(e,t){return e.reduce((e,t)=>e-a[t],t)}function f(e,t){return e.reduce((e,r)=>p(e,t)>0?e.concat([r]):e,[])}function m(a,s,c){let u=i.map((e,r)=>({start:e-n[r]+.5+s,end:e+t-.5+s}));return a.map(t=>{let n=c?0:-r,a=c?r:0,i=u[t][c?"end":"start"];return{index:t,loopPoint:i,slideLocation:X(-1),translate:ee(e,l[t]),target:()=>o.get()>i?n:a}})}return{canLoop:function(){return d.every(({index:e})=>.1>=p(c.filter(t=>t!==e),t))},clear:function(){d.forEach(e=>e.translate.clear())},loop:function(){d.forEach(e=>{let{target:t,translate:r,slideLocation:n}=e,a=t();a!==n.get()&&(r.to(a),n.set(a))})},loopPoints:d}}(P,q,et,M,O,L,ea,eh,r),slideFocus:eN,slidesHandler:(l=!1,{init:function(e){A&&(o=new MutationObserver(t=>{!l&&(G(A)||A(e,t))&&function(t){for(let r of t)if("childList"===r.type){e.reInit(),s.emit("slidesChanged");break}}(t)})).observe(t,{childList:!0})},destroy:function(){o&&o.disconnect(),l=!0}}),slidesInView:eA,slideIndexes:el,slideRegistry:ej,slidesToScroll:F,target:eg,translate:ee(P,t)};return ek}(e,i,s,l,c,r,f);return r.loop&&!n.slideLooper.canLoop()?t(Object.assign({},r,{loop:!1})):n}(A),g([b,...j.map(({options:e})=>e)]).forEach(e=>p.add(e,"change",k)),A.active&&(n.translate.to(n.location.get()),n.animation.init(),n.slidesInView.init(),n.slideFocus.init(q),n.eventHandler.init(q),n.resizeHandler.init(q),n.slidesHandler.init(q),n.options.loop&&n.slideLooper.loop(),i.offsetParent&&s.length&&n.dragHandler.init(q),a=d.init(q,j))}function k(e,t){let r=P();S(),N(m({startIndex:r},e),t),f.emit("reInit")}function S(){n.dragHandler.destroy(),n.eventStore.clear(),n.translate.clear(),n.slideLooper.clear(),n.resizeHandler.destroy(),n.slidesHandler.destroy(),n.slidesInView.destroy(),n.animation.destroy(),d.destroy(),p.clear()}function C(e,t,r){A.active&&!v&&(n.scrollBody.useBaseFriction().useDuration(!0===t?0:A.duration),n.scrollTo.index(e,r||0))}function P(){return n.index.get()}let q={canScrollNext:function(){return n.index.add(1).get()!==P()},canScrollPrev:function(){return n.index.add(-1).get()!==P()},containerNode:function(){return i},internalEngine:function(){return n},destroy:function(){v||(v=!0,p.clear(),S(),f.emit("destroy"),f.clear())},off:y,on:x,emit:w,plugins:function(){return a},previousScrollSnap:function(){return n.indexPrevious.get()},reInit:k,rootNode:function(){return e},scrollNext:function(e){C(n.index.add(1).get(),e,-1)},scrollPrev:function(e){C(n.index.add(-1).get(),e,1)},scrollProgress:function(){return n.scrollProgress.get(n.offsetLocation.get())},scrollSnapList:function(){return n.scrollSnapList},scrollTo:C,selectedScrollSnap:P,slideNodes:function(){return s},slidesInView:function(){return n.slidesInView.get()},slidesNotInView:function(){return n.slidesInView.get(!1)}};return N(t,r),setTimeout(()=>f.emit("init"),0),q}function en(e={},t=[]){let r=(0,A.useRef)(e),n=(0,A.useRef)(t),[a,i]=(0,A.useState)(),[s,o]=(0,A.useState)(),l=(0,A.useCallback)(()=>{a&&a.reInit(r.current,n.current)},[a]);return(0,A.useEffect)(()=>{F(r.current,e)||(r.current=e,l())},[e,l]),(0,A.useEffect)(()=>{!function(e,t){if(e.length!==t.length)return!1;let r=L(e),n=L(t);return r.every((e,t)=>F(e,n[t]))}(n.current,t)&&(n.current=t,l())},[t,l]),(0,A.useEffect)(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&s){er.globalOptions=en.globalOptions;let e=er(s,r.current,n.current);return i(e),()=>e.destroy()}i(void 0)},[s,i]),[o,a]}er.globalOptions=void 0,en.globalOptions=void 0;let ea=(0,o.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ei=(0,o.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),es=A.createContext(null);function eo(){let e=A.useContext(es);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let el=A.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:a,className:i,children:s,...o},l)=>{let[c,u]=en({...t,axis:"horizontal"===e?"x":"y"},a),[d,p]=A.useState(!1),[f,m]=A.useState(!1),h=A.useCallback(e=>{e&&(p(e.canScrollPrev()),m(e.canScrollNext()))},[]),g=A.useCallback(()=>{u?.scrollPrev()},[u]),x=A.useCallback(()=>{u?.scrollNext()},[u]),y=A.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),x())},[g,x]);return A.useEffect(()=>{u&&r&&r(u)},[u,r]),A.useEffect(()=>{if(u)return h(u),u.on("reInit",h),u.on("select",h),()=>{u?.off("select",h)}},[u,h]),(0,n.jsx)(es.Provider,{value:{carouselRef:c,api:u,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:x,canScrollPrev:d,canScrollNext:f},children:(0,n.jsx)("div",{ref:l,onKeyDownCapture:y,className:(0,k.cn)("relative",i),role:"region","aria-roledescription":"carousel",...o,children:s})})});el.displayName="Carousel";let ec=A.forwardRef(({className:e,...t},r)=>{let{carouselRef:a,orientation:i}=eo();return(0,n.jsx)("div",{ref:a,className:"overflow-hidden",children:(0,n.jsx)("div",{ref:r,className:(0,k.cn)("flex","horizontal"===i?"-ml-4":"-mt-4 flex-col",e),...t})})});ec.displayName="CarouselContent";let eu=A.forwardRef(({className:e,...t},r)=>{let{orientation:a}=eo();return(0,n.jsx)("div",{ref:r,role:"group","aria-roledescription":"slide",className:(0,k.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===a?"pl-4":"pt-4",e),...t})});eu.displayName="CarouselItem",A.forwardRef(({className:e,variant:t="outline",size:r="icon",...i},s)=>{let{orientation:o,scrollPrev:l,canScrollPrev:c}=eo();return(0,n.jsxs)(a.$,{ref:s,variant:t,size:r,className:(0,k.cn)("absolute  h-8 w-8 rounded-full","horizontal"===o?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!c,onClick:l,...i,children:[(0,n.jsx)(ea,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",A.forwardRef(({className:e,variant:t="outline",size:r="icon",...i},s)=>{let{orientation:o,scrollNext:l,canScrollNext:c}=eo();return(0,n.jsxs)(a.$,{ref:s,variant:t,size:r,className:(0,k.cn)("absolute h-8 w-8 rounded-full","horizontal"===o?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!c,onClick:l,...i,children:[(0,n.jsx)(ei,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";var ed=r(16189);function ep({plant:e,open:t,onOpenChange:r}){return e?(0,n.jsx)(N.lG,{open:t,onOpenChange:r,children:(0,n.jsxs)(N.Cf,{className:"max-w-sm",children:[(0,n.jsx)(N.c7,{children:(0,n.jsx)(N.L3,{className:"text-3xl text-center",children:"A new plant!"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,n.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,n.jsx)(b.default,{src:e.imageDataUri,alt:e.name,width:256,height:256,className:"object-cover w-full h-full"})}),(0,n.jsx)("h3",{className:"text-2xl font-semibold text-primary",children:e.name}),(0,n.jsx)("p",{className:"text-muted-foreground text-center",children:e.description})]}),(0,n.jsx)(N.Es,{children:(0,n.jsx)(N.HM,{asChild:!0,children:(0,n.jsx)(a.$,{className:"w-full text-lg",children:"Collect"})})})]})}):null}function ef({open:e,onOpenChange:t}){let r=(0,ed.useRouter)();return(0,n.jsx)(N.lG,{open:e,onOpenChange:t,children:(0,n.jsxs)(N.Cf,{className:"max-w-sm",children:[(0,n.jsxs)(N.c7,{children:[(0,n.jsx)("div",{className:"mx-auto bg-accent rounded-full p-3 mb-2",children:(0,n.jsx)(s.A,{className:"h-8 w-8 text-accent-foreground"})}),(0,n.jsx)(N.L3,{className:"text-2xl text-center",children:"New: The Community Page!"}),(0,n.jsxs)(N.rr,{className:"text-center pt-2",children:["Check out the new Community page to see what other players are growing. You can like their showcases to give them 5 gold!",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"Go to your Profile to select which of your own plants you want to show off."]})]}),(0,n.jsxs)(N.Es,{className:"gap-2 sm:gap-0",children:[(0,n.jsx)(a.$,{variant:"outline",onClick:()=>{r.push("/profile"),t(!1)},children:"Go to Profile"}),(0,n.jsx)(N.HM,{asChild:!0,children:(0,n.jsx)(a.$,{children:"Got it!"})})]})]})})}function em({open:e,onOpenChange:t}){return(0,n.jsx)(N.lG,{open:e,onOpenChange:t,children:(0,n.jsxs)(N.Cf,{className:"max-w-sm",children:[(0,n.jsxs)(N.c7,{children:[(0,n.jsx)("div",{className:"mx-auto bg-accent rounded-full p-3 mb-2",children:(0,n.jsx)(l,{className:"h-8 w-8 text-accent-foreground"})}),(0,n.jsx)(N.L3,{className:"text-2xl text-center",children:"New Game Updates!"}),(0,n.jsxs)(N.rr,{className:"text-center pt-2",children:["Keep the streak going! After you complete all your daily challenges, a new set of **Bonus Challenges** will now appear.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"Complete them for even more rewards!"]})]}),(0,n.jsx)(N.Es,{children:(0,n.jsx)(N.HM,{asChild:!0,children:(0,n.jsx)(a.$,{className:"w-full",children:"Awesome!"})})})]})})}function eh({open:e,onOpenChange:t}){let r=(0,ed.useRouter)();return(0,n.jsx)(N.lG,{open:e,onOpenChange:t,children:(0,n.jsxs)(N.Cf,{className:"max-w-sm",children:[(0,n.jsxs)(N.c7,{children:[(0,n.jsx)("div",{className:"mx-auto bg-accent rounded-full p-3 mb-2",children:(0,n.jsx)(c.A,{className:"h-8 w-8 text-accent-foreground"})}),(0,n.jsx)(N.L3,{className:"text-2xl text-center",children:"Watering Has Moved!"}),(0,n.jsx)(N.rr,{className:"text-center pt-2",children:"All your plant care, including watering and evolution, now happens in the new **Garden** page. Visit your garden to help your plants grow!"})]}),(0,n.jsxs)(N.Es,{className:"gap-2 sm:gap-0",children:[(0,n.jsx)(a.$,{variant:"outline",onClick:()=>{r.push("/garden"),t(!1)},children:"Go to Garden"}),(0,n.jsx)(N.HM,{asChild:!0,children:(0,n.jsx)(a.$,{children:"Got it!"})})]})]})})}function eg({challenge:e,onClaim:t,isClaiming:r}){let i=e.progress>=e.target;return(0,n.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/50",children:[(0,n.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,n.jsx)("p",{className:"font-semibold text-primary",children:e.title}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(P.k,{value:e.progress/e.target*100,className:"h-2 w-full"}),(0,n.jsxs)("span",{className:"text-xs font-mono text-muted-foreground",children:[e.progress,"/",e.target]})]})]}),(0,n.jsx)(a.$,{onClick:()=>t(e.id),disabled:!i||e.claimed||r,size:"sm",children:r?(0,n.jsx)(u.A,{className:"animate-spin"}):e.claimed?(0,n.jsx)(d.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.A,{className:"mr-1 h-3 w-3"})," ",e.reward]})})]})}let ex=["Go to the Garden to water your plants and help them grow.","Drag plants from your collection onto the plots in your garden to display them.","Complete daily challenges to earn extra gold.","Visit the shop to get daily free draws or buy more with your gold.","Show off your favorite plants on the community page by selecting them in your profile."];function ey(){let{user:e,gameData:t}=(0,q.A)(),{toast:r}=(0,j.dj)(),{playSfx:s}=(0,C.n)();(0,ed.useRouter)();let[o,c]=(0,A.useState)(null),[p,w]=(0,A.useState)(!1),[N,O]=(0,A.useState)(null),[D,F]=(0,A.useState)(!1),[L,R]=(0,A.useState)(""),[$,G]=(0,A.useState)(!1),[U,_]=(0,A.useState)(!1),[V,B]=(0,A.useState)(!1),Y=(0,A.useRef)(T({delay:4e3,stopOnInteraction:!0})),H=async()=>{if(e){if(!t||t.draws<=0)return void r({variant:"destructive",title:"No Draws Left",description:"Visit the shop to get more draws or wait for your daily refill."});w(!0);try{await (0,S.iF)(e.uid);let r=t.plants?Object.values(t.plants).map(e=>e.name):[],n=await (0,z.G)(r),a=await (0,I.w)(n.imageDataUri);s("success"),O({...n,imageDataUri:a})}catch(t){console.error(t),await (0,S.tM)(e.uid),"Invalid API Key"===t.message?r({variant:"destructive",title:"Invalid API Key",description:"Please check your GOOGLE_API_KEY. Your draw has been refunded."}):r({variant:"destructive",title:"Failed to draw a plant",description:"There was an issue with the AI. Your draw has been refunded."})}finally{w(!1)}}},W=async()=>{if(N&&e){try{let t=JSON.parse(JSON.stringify(N)),r=await (0,E.VS)(e.uid,t);c(r),await (0,M.JD)(e.uid)}catch(e){console.error("Failed to save plant to Firestore",e),r({variant:"destructive",title:"Storage Error",description:"Could not save your new plant."})}O(null)}},K=async t=>{if(e){F(!0);try{await (0,M.XU)(e.uid,t),s("reward"),r({title:"Reward Claimed!",description:"You've earned some gold!"})}catch(e){console.error("Failed to claim challenge reward",e),r({variant:"destructive",title:"Claiming Error",description:e.message||"Could not claim your reward."})}finally{F(!1)}}},Q=(0,A.useMemo)(()=>!!t?.challenges&&Object.values(M.dt).every(e=>{let r=t.challenges[e.id];return r?.claimed||(r?.progress||0)>=e.target}),[t?.challenges]),Z=Q?M.hJ:M.dt;if(!e||!t)return(0,n.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,n.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"})});let J=t.challenges;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-4 space-y-6 bg-white pb-[3.75rem]",children:[(0,n.jsxs)("header",{className:"flex flex-col items-center space-y-2",children:[(0,n.jsx)("h1",{className:"text-3xl text-primary font-bold text-center",children:"Plenty Of Plants"}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(a.$,{variant:"outline",size:"sm",asChild:!0,children:(0,n.jsxs)(v(),{href:"/settings",children:[(0,n.jsx)(f,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,n.jsx)(a.$,{variant:"outline",size:"sm",asChild:!0,children:(0,n.jsxs)(v(),{href:"/profile",children:[(0,n.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Profile"]})})]})]}),(0,n.jsxs)("main",{className:"space-y-6",children:[(0,n.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{className:"text-xl text-center",children:"Your Latest Plant"})}),(0,n.jsx)(i.Wu,{className:"flex flex-col items-center justify-center text-center min-h-[260px]",children:o?(0,n.jsxs)(v(),{href:"/garden",className:"flex flex-col items-center gap-2 transition-transform hover:scale-105",children:[(0,n.jsx)("div",{className:"w-48 h-48 rounded-lg overflow-hidden border-2 border-primary/30 shadow-md",children:"placeholder"!==o.image?(0,n.jsx)(b.default,{src:o.image,alt:o.name,width:192,height:192,className:"object-cover w-full h-full","data-ai-hint":o.hint}):(0,n.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,n.jsx)(h.A,{className:"w-16 h-16 text-muted-foreground"})})}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-primary",children:o.name}),(0,n.jsx)("div",{className:"w-4/5",children:(0,n.jsx)(P.k,{value:o.xp/1e3*100,className:"h-2"})})]}):(0,n.jsx)("p",{className:"text-muted-foreground",children:"No plants collected yet. Time to draw one!"})})]}),J&&(0,n.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,n.jsx)(i.aR,{children:(0,n.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(l,{className:"text-yellow-500"}),Q?"Bonus Challenges":"Daily Challenges"]})}),(0,n.jsx)(i.Wu,{className:"space-y-3",children:Object.values(Z).map(e=>{let t=J[e.id]||{progress:0,claimed:!1},r={...e,...t};return(0,n.jsx)(eg,{challenge:r,onClaim:K,isClaiming:D},e.id)})})]}),(0,n.jsx)(i.Zp,{className:"shadow-sm",children:(0,n.jsxs)(i.Wu,{className:"flex flex-col items-center gap-4 pt-6",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("div",{className:"flex items-center gap-3",children:Array.from({length:S.RY}).map((e,r)=>{let a=r<t.draws;return(0,n.jsx)("div",{className:(0,k.cn)("h-8 w-8 rounded-full flex items-center justify-center text-white shadow-inner",a?"bg-green-500":"bg-red-500"),children:a?(0,n.jsx)(d.A,{className:"h-5 w-5"}):(0,n.jsx)(g.A,{className:"h-5 w-5"})},r)})}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:[(0,n.jsx)("span",{children:"Draws Available"}),t.draws<S.RY&&L&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center justify-center gap-1.5 pt-1",children:[(0,n.jsx)(x.A,{className:"w-3 h-3"}),(0,n.jsx)("span",{children:L})]})]})]}),(0,n.jsx)(a.$,{onClick:H,disabled:p||t.draws<=0,size:"lg",className:"w-full rounded-full mt-2",children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Drawing..."]}):"Draw New Plant"})]})}),(0,n.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,n.jsx)(i.aR,{children:(0,n.jsxs)(i.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,n.jsx)(y,{className:"text-primary"}),"Game Tips"]})}),(0,n.jsx)(i.Wu,{children:(0,n.jsx)(el,{plugins:[Y.current],opts:{align:"start",loop:!0},className:"w-full",onMouseEnter:()=>Y.current.stop(),onMouseLeave:()=>Y.current.reset(),children:(0,n.jsx)(ec,{children:ex.map((e,t)=>(0,n.jsx)(eu,{children:(0,n.jsx)("div",{className:"p-1 h-16 flex items-center justify-center",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:e})})},t))})})})]})]}),(0,n.jsx)(ep,{plant:N,open:!!N,onOpenChange:e=>{e||W()}}),(0,n.jsx)(ef,{open:$,onOpenChange:e=>{e||(localStorage.setItem("hasSeenCommunityInfo","true"),G(!1))}}),(0,n.jsx)(em,{open:U,onOpenChange:e=>{e||(localStorage.setItem("hasSeenGameChangesInfo_v1","true"),_(!1))}}),(0,n.jsx)(eh,{open:V,onOpenChange:e=>{e||(localStorage.setItem("hasSeenGardenInfo_v1","true"),B(!1))}}),(0,n.jsx)(v(),{href:"/garden",children:(0,n.jsxs)(a.$,{size:"lg",className:"fixed bottom-40 right-4 h-16 w-16 rounded-full bg-green-500 hover:bg-green-600 shadow-lg flex-col gap-1",children:[(0,n.jsx)(h.A,{className:"h-6 w-6 text-white"}),(0,n.jsx)("span",{className:"text-xs text-white",children:"Garden"})]})})]}),(0,n.jsx)("footer",{className:"text-center text-xs text-muted-foreground pb-2",children:(0,n.jsx)("p",{children:"\xa9 2025 Sky Mountain Graphics. All Rights Reserved."})})]})}},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58450:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},58595:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63102:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(6475);let a=(0,n.createServerReference)("40083cf436102374a173646e5e605cd3a64d1fb222",n.callServer,void 0,n.findSourceMapURL,"drawPlantAction")},70653:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]])},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73429:e=>{"use strict";e.exports=require("node:util/types")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81202:(e,t,r)=>{Promise.resolve().then(r.bind(r,97551))},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},89708:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var n=r(65239),a=r(48088),i=r(88170),s=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["(app)",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97551)),"/home/user/studio/src/app/(app)/home/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/user/studio/src/app/(app)/home/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/home/page",pathname:"/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(app)/home/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(app)/home/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,671,711,814,694,320,962,623,134],()=>r(89708));module.exports=n})();