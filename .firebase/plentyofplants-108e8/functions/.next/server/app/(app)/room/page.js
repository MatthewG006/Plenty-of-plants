(()=>{var e={};e.id=327,e.ids=[327],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},2340:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tY});var a,i,l,o,s,c,u,d,h,f,p=r(60687),m=r(29523),g=r(44493),v=r(63503),x=r(5666),b=r(82614);let y=(0,b.A)("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);var w=r(9812),j=r(81292);let E=(0,b.A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var D=r(11516),N=r(30474),C=r(43210),M=r.n(C),S=r(29867),k=r(4780),R=r(51215);let A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function T(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function P(e){return"nodeType"in e}function O(e){var t,r;return e?T(e)?e:P(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function L(e){let{Document:t}=O(e);return e instanceof t}function z(e){return!T(e)&&e instanceof O(e).HTMLElement}function q(e){return e instanceof O(e).SVGElement}function I(e){return e?T(e)?e.document:P(e)?L(e)?e:z(e)||q(e)?e.ownerDocument:document:document:document}let U=A?C.useLayoutEffect:C.useEffect;function F(e){let t=(0,C.useRef)(e);return U(()=>{t.current=e}),(0,C.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function $(e,t){void 0===t&&(t=[e]);let r=(0,C.useRef)(e);return U(()=>{r.current!==e&&(r.current=e)},t),r}function Y(e,t){let r=(0,C.useRef)();return(0,C.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function _(e){let t=F(e),r=(0,C.useRef)(null),n=(0,C.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function B(e){let t=(0,C.useRef)();return(0,C.useEffect)(()=>{t.current=e},[e]),t.current}let W={};function X(e,t){return(0,C.useMemo)(()=>{if(t)return t;let r=null==W[e]?0:W[e]+1;return W[e]=r,e+"-"+r},[e,t])}function G(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>{for(let[n,a]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*a)}return t},{...t})}}let K=G(1),H=G(-1);function J(e){if(!e)return!1;let{KeyboardEvent:t}=O(e.target);return t&&e instanceof t}function V(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=O(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let Z=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Z.Translate.toString(e),Z.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),Q="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ee={display:"none"};function et(e){let{id:t,value:r}=e;return M().createElement("div",{id:t,style:ee},r)}function er(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return M().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let en=(0,C.createContext)(null),ea={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ei={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function el(e){let{announcements:t=ei,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=ea}=e,{announce:i,announcement:l}=function(){let[e,t]=(0,C.useState)("");return{announce:(0,C.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),o=X("DndLiveRegion"),[s,c]=(0,C.useState)(!1);(0,C.useEffect)(()=>{c(!0)},[]);var u=(0,C.useMemo)(()=>({onDragStart(e){let{active:r}=e;i(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&i(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;i(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;i(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;i(t.onDragCancel({active:r,over:n}))}}),[i,t]);let d=(0,C.useContext)(en);if((0,C.useEffect)(()=>{if(!d)throw Error("useDndMonitor must be used within a children of <DndContext>");return d(u)},[u,d]),!s)return null;let h=M().createElement(M().Fragment,null,M().createElement(et,{id:n,value:a.draggable}),M().createElement(er,{id:o,announcement:l}));return r?(0,R.createPortal)(h,r):h}function eo(){}function es(e,t){return(0,C.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(a||(a={}));let ec=Object.freeze({x:0,y:0});function eu(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let ed=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=[];for(let e of n){let{id:n}=e,i=r.get(n);if(i){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height);if(n<a&&r<i){let l=t.width*t.height,o=e.width*e.height,s=(a-n)*(i-r);return Number((s/(l+o-s)).toFixed(4))}return 0}(i,t);r>0&&a.push({id:n,data:{droppableContainer:e,value:r}})}}return a.sort(eu)};function eh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ec}let ef=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}(1);function ep(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let em={ignoreTransform:!1};function eg(e,t){void 0===t&&(t=em);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=O(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=ep(t);if(!n)return e;let{scaleX:a,scaleY:i,x:l,y:o}=n,s=e.left-l-(1-a)*parseFloat(r),c=e.top-o-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s}}(r,t,n))}let{top:n,left:a,width:i,height:l,bottom:o,right:s}=r;return{top:n,left:a,width:i,height:l,bottom:o,right:s}}function ev(e){return eg(e,{ignoreTransform:!0})}function ex(e,t){let r=[];return e?function n(a){var i;if(null!=t&&r.length>=t||!a)return r;if(L(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!z(a)||q(a)||r.includes(a))return r;let l=O(e).getComputedStyle(a);return(a!==e&&function(e,t){void 0===t&&(t=O(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let n=t[e];return"string"==typeof n&&r.test(n)})}(a,l)&&r.push(a),void 0===(i=l)&&(i=O(a).getComputedStyle(a)),"fixed"===i.position)?r:n(a.parentNode)}(e):r}function eb(e){let[t]=ex(e,1);return null!=t?t:null}function ey(e){return A&&e?T(e)?e:P(e)?L(e)||e===I(e).scrollingElement?window:z(e)?e:null:null:null}function ew(e){return T(e)?e.scrollX:e.scrollLeft}function ej(e){return T(e)?e.scrollY:e.scrollTop}function eE(e){return{x:ew(e),y:ej(e)}}function eD(e){return!!A&&!!e&&e===document.scrollingElement}function eN(e){let t={x:0,y:0},r=eD(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x;return{isTop:a,isLeft:i,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(i||(i={}));let eC={x:.2,y:.2};function eM(e){return e.reduce((e,t)=>K(e,eE(t)),ec)}function eS(e,t){if(void 0===t&&(t=eg),!e)return;let{top:r,left:n,bottom:a,right:i}=t(e);eb(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let ek=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ew(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ej(t),0)}]];class eR{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=ex(t),n=eM(r);for(let[t,a,i]of(this.rect={...e},this.width=e.width,this.height=e.height,ek))for(let e of a)Object.defineProperty(this,e,{get:()=>{let a=i(r),l=n[t]-a;return this.rect[e]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eA{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eT(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eP(e){e.preventDefault()}function eO(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(l||(l={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(o||(o={}));let eL={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},ez=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case o.Right:return{...r,x:r.x+25};case o.Left:return{...r,x:r.x-25};case o.Down:return{...r,y:r.y+25};case o.Up:return{...r,y:r.y-25}}};class eq{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new eA(I(t)),this.windowListeners=new eA(O(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(l.Resize,this.handleCancel),this.windowListeners.add(l.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(l.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eS(r),t(ec)}handleKeyDown(e){if(J(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:a=eL,coordinateGetter:i=ez,scrollBehavior:l="smooth"}=n,{code:s}=e;if(a.end.includes(s))return void this.handleEnd(e);if(a.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:ec;this.referenceCoordinates||(this.referenceCoordinates=u);let d=i(e,{active:t,context:r.current,currentCoordinates:u});if(d){let t=H(d,u),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(let r of a){let a=e.code,{isTop:i,isRight:s,isLeft:c,isBottom:u,maxScroll:h,minScroll:f}=eN(r),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(a===o.Right?p.right-p.width/2:p.right,Math.max(a===o.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(a===o.Down?p.bottom-p.height/2:p.bottom,Math.max(a===o.Down?p.top:p.top+p.height/2,d.y))},g=a===o.Right&&!s||a===o.Left&&!c,v=a===o.Down&&!u||a===o.Up&&!i;if(g&&m.x!==d.x){let e=r.scrollLeft+t.x,i=a===o.Right&&e<=h.x||a===o.Left&&e>=f.x;if(i&&!t.y)return void r.scrollTo({left:e,behavior:l});i?n.x=r.scrollLeft-e:n.x=a===o.Right?r.scrollLeft-h.x:r.scrollLeft-f.x,n.x&&r.scrollBy({left:-n.x,behavior:l});break}if(v&&m.y!==d.y){let e=r.scrollTop+t.y,i=a===o.Down&&e<=h.y||a===o.Up&&e>=f.y;if(i&&!t.x)return void r.scrollTo({top:e,behavior:l});i?n.y=r.scrollTop-e:n.y=a===o.Down?r.scrollTop-h.y:r.scrollTop-f.y,n.y&&r.scrollBy({top:-n.y,behavior:l});break}}this.handleMove(e,K(H(d,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eI(e){return!!(e&&"distance"in e)}function eU(e){return!!(e&&"delay"in e)}eq.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=eL,onActivation:a}=t,{active:i}=r,{code:l}=e.nativeEvent;if(n.start.includes(l)){let t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class eF{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=O(e);return e instanceof t?e:I(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=I(i),this.documentListeners=new eA(this.document),this.listeners=new eA(r),this.windowListeners=new eA(O(i)),this.initialCoordinates=null!=(n=V(a))?n:ec,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(l.Resize,this.handleCancel),this.windowListeners.add(l.DragStart,eP),this.windowListeners.add(l.VisibilityChange,this.handleCancel),this.windowListeners.add(l.ContextMenu,eP),this.documentListeners.add(l.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eU(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eI(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(l.Click,eO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(l.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!n)return;let o=null!=(t=V(e))?t:ec,s=H(n,o);if(!r&&l){if(eI(l)){if(null!=l.tolerance&&eT(s,l.tolerance))return this.handleCancel();if(eT(s,l.distance))return this.handleStart()}return eU(l)&&eT(s,l.tolerance)?this.handleCancel():void this.handlePending(l,s)}e.cancelable&&e.preventDefault(),i(o)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===o.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let e$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eY extends eF{constructor(e){let{event:t}=e;super(e,e$,I(t.target))}}eY.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];let e_={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(s||(s={}));class eB extends eF{constructor(e){super(e,e_,I(e.event.target))}}eB.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==s.RightClick&&(null==n||n({event:r}),!0)}}];let eW={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eX extends eF{constructor(e){super(e,eW)}static setup(){return window.addEventListener(eW.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eW.move.name,e)};function e(){}}}eX.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:a}=r;return!(a.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(c||(c={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(u||(u={}));let eG={x:{[i.Backward]:!1,[i.Forward]:!1},y:{[i.Backward]:!1,[i.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(d||(d={})),(h||(h={})).Optimized="optimized";let eK=new Map;function eH(e,t){return Y(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function eJ(e){let{callback:t,disabled:r}=e,n=F(t),a=(0,C.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,C.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function eV(e){return new eR(eg(e),e)}function eZ(e,t,r){void 0===t&&(t=eV);let[n,a]=(0,C.useState)(null);function i(){a(n=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=n?n:r)?a:null}let i=t(e);return JSON.stringify(n)===JSON.stringify(i)?n:i})}let l=function(e){let{callback:t,disabled:r}=e,n=F(t),a=(0,C.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,C.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),o=eJ({callback:i});return U(()=>{i(),e?(null==o||o.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==o||o.disconnect(),null==l||l.disconnect())},[e]),n}let eQ=[];function e0(e,t){void 0===t&&(t=[]);let r=(0,C.useRef)(null);return(0,C.useEffect)(()=>{r.current=null},t),(0,C.useEffect)(()=>{let t=e!==ec;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?H(e,r.current):ec}function e1(e){return(0,C.useMemo)(()=>e?function(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}let e2=[];function e4(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return z(t)?t:e}let e5=[{sensor:eY,options:{}},{sensor:eq,options:{}}],e3={current:{}},e6={draggable:{measure:ev},droppable:{measure:ev,strategy:d.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:eg}};class e7 extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let e8={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e7,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:e6,measureDroppableContainers:eo,windowRect:null,measuringScheduled:!1},e9={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eo,draggableNodes:new Map,over:null,measureDroppableContainers:eo},te=(0,C.createContext)(e9),tt=(0,C.createContext)(e8);function tr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e7}}}function tn(e,t){switch(t.type){case a.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case a.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case a.DragEnd:case a.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case a.RegisterDroppable:{let{element:r}=t,{id:n}=r,a=new e7(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case a.SetDroppableDisabled:{let{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let l=new e7(e.droppable.containers);return l.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case a.UnregisterDroppable:{let{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let i=new e7(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function ta(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:a}=(0,C.useContext)(te),i=B(n),l=B(null==r?void 0:r.id);return(0,C.useEffect)(()=>{if(!t&&!n&&i&&null!=l){if(!J(i)||document.activeElement===i.target)return;let e=a.get(l);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(Q)?e:e.querySelector(Q);if(t){t.focus();break}}})}},[n,t,a,l,i]),null}function ti(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let tl=(0,C.createContext)({...ec,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(f||(f={}));let to=(0,C.memo)(function(e){var t,r,n,l,o,s;let{id:h,accessibility:p,autoScroll:m=!0,children:g,sensors:v=e5,collisionDetection:x=ed,measuring:b,modifiers:y,...w}=e,[j,E]=(0,C.useReducer)(tn,void 0,tr),[D,N]=function(){let[e]=(0,C.useState)(()=>new Set),t=(0,C.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,C.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[S,k]=(0,C.useState)(f.Uninitialized),T=S===f.Initialized,{draggable:{active:P,nodes:L,translate:q},droppable:{containers:I}}=j,F=null!=P?L.get(P):null,W=(0,C.useRef)({initial:null,translated:null}),G=(0,C.useMemo)(()=>{var e;return null!=P?{id:P,data:null!=(e=null==F?void 0:F.data)?e:e3,rect:W}:null},[P,F]),H=(0,C.useRef)(null),[J,Z]=(0,C.useState)(null),[Q,ee]=(0,C.useState)(null),et=$(w,Object.values(w)),er=X("DndDescribedBy",h),ea=(0,C.useMemo)(()=>I.getEnabled(),[I]),ei=(0,C.useMemo)(()=>({draggable:{...e6.draggable,...null==b?void 0:b.draggable},droppable:{...e6.droppable,...null==b?void 0:b.droppable},dragOverlay:{...e6.dragOverlay,...null==b?void 0:b.dragOverlay}}),[null==b?void 0:b.draggable,null==b?void 0:b.droppable,null==b?void 0:b.dragOverlay]),{droppableRects:eo,measureDroppableContainers:es,measuringScheduled:eu}=function(e,t){let{dragging:r,dependencies:n,config:a}=t,[i,l]=(0,C.useState)(null),{frequency:o,measure:s,strategy:c}=a,u=(0,C.useRef)(e),h=function(){switch(c){case d.Always:return!1;case d.BeforeDragging:return r;default:return!r}}(),f=$(h),p=(0,C.useCallback)(function(e){void 0===e&&(e=[]),f.current||l(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),m=(0,C.useRef)(null),g=Y(t=>{if(h&&!r)return eK;if(!t||t===eK||u.current!==e||null!=i){let t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eR(s(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,i,r,h,s]);return(0,C.useEffect)(()=>{u.current=e},[e]),(0,C.useEffect)(()=>{h||p()},[r,h]),(0,C.useEffect)(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),(0,C.useEffect)(()=>{h||"number"!=typeof o||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},o))},[o,h,p,...n]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=i}}(ea,{dragging:T,dependencies:[q.x,q.y],config:ei.droppable}),ep=function(e,t){let r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return Y(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(L,P),em=(0,C.useMemo)(()=>Q?V(Q):null,[Q]),ev=function(){let e=(null==J?void 0:J.autoScrollEnabled)===!1,t="object"==typeof m?!1===m.enabled:!1===m,r=T&&!e&&!t;return"object"==typeof m?{...m,enabled:r}:{enabled:r}}(),ew=eH(ep,ei.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e,i=(0,C.useRef)(!1),{x:l,y:o}="boolean"==typeof a?{x:a,y:a}:a;U(()=>{if(!l&&!o||!t){i.current=!1;return}if(i.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=eh(r(e),n);if(l||(a.x=0),o||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=eb(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,l,o,n,r])}({activeNode:null!=P?L.get(P):null,config:ev.layoutShiftCompensation,initialRect:ew,measure:ei.draggable.measure});let ej=eZ(ep,ei.draggable.measure,ew),eS=eZ(ep?ep.parentElement:null),ek=(0,C.useRef)({activatorEvent:null,active:null,activeNode:ep,collisionRect:null,collisions:null,droppableRects:eo,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eA=I.getNodeFor(null==(t=ek.current.over)?void 0:t.id),eT=function(e){let{measure:t}=e,[r,n]=(0,C.useState)(null),a=eJ({callback:(0,C.useCallback)(e=>{for(let{target:r}of e)if(z(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[i,l]=_((0,C.useCallback)(e=>{let r=e4(e);null==a||a.disconnect(),r&&(null==a||a.observe(r)),n(r?t(r):null)},[t,a]));return(0,C.useMemo)(()=>({nodeRef:i,rect:r,setRef:l}),[r,i,l])}({measure:ei.dragOverlay.measure}),eP=null!=(r=eT.nodeRef.current)?r:ep,eO=T?null!=(n=eT.rect)?n:ej:null,eL=!!(eT.nodeRef.current&&eT.rect),ez=function(e){let t=eH(e);return eh(e,t)}(eL?null:ej),eq=e1(eP?O(eP):null),eI=function(e){let t=(0,C.useRef)(e),r=Y(r=>e?r&&r!==eQ&&e&&t.current&&e.parentNode===t.current.parentNode?r:ex(e):eQ,[e]);return(0,C.useEffect)(()=>{t.current=e},[e]),r}(T?null!=eA?eA:ep:null),eU=function(e,t){void 0===t&&(t=eg);let[r]=e,n=e1(r?O(r):null),[a,i]=(0,C.useState)(e2);function l(){i(()=>e.length?e.map(e=>eD(e)?n:new eR(t(e),e)):e2)}let o=eJ({callback:l});return U(()=>{null==o||o.disconnect(),l(),e.forEach(e=>null==o?void 0:o.observe(e))},[e]),a}(eI),eF=ti(y,{transform:{x:q.x-ez.x,y:q.y-ez.y,scaleX:1,scaleY:1},activatorEvent:Q,active:G,activeNodeRect:ej,containerNodeRect:eS,draggingNodeRect:eO,over:ek.current.over,overlayNodeRect:eT.rect,scrollableAncestors:eI,scrollableAncestorRects:eU,windowRect:eq}),e$=em?K(em,q):null,eY=function(e){let[t,r]=(0,C.useState)(null),n=(0,C.useRef)(e),a=(0,C.useCallback)(e=>{let t=ey(e.target);t&&r(e=>e?(e.set(t,eE(t)),new Map(e)):null)},[]);return(0,C.useEffect)(()=>{let t=n.current;if(e!==t){i(t);let l=e.map(e=>{let t=ey(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,eE(t)]):null}).filter(e=>null!=e);r(l.length?new Map(l):null),n.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{let t=ey(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,C.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>K(e,t),ec):eM(e):ec,[e,t])}(eI),e_=e0(eY),eB=e0(eY,[ej]),eW=K(eF,e_),eX=eO?ef(eO,eF):null,eV=G&&eX?x({active:G,collisionRect:eX,droppableRects:eo,droppableContainers:ea,pointerCoordinates:e$}):null,e7=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(eV,"id"),[e8,e9]=(0,C.useState)(null),to=(o=eL?eF:K(eF,eB),s=null!=(l=null==e8?void 0:e8.rect)?l:null,{...o,scaleX:s&&ej?s.width/ej.width:1,scaleY:s&&ej?s.height/ej.height:1}),ts=(0,C.useRef)(null),tc=(0,C.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==H.current)return;let i=L.get(H.current);if(!i)return;let l=e.nativeEvent,o=new r({active:H.current,activeNode:i,event:l,options:n,context:ek,onAbort(e){if(!L.get(e))return;let{onDragAbort:t}=et.current,r={id:e};null==t||t(r),D({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!L.get(e))return;let{onDragPending:a}=et.current,i={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(i),D({type:"onDragPending",event:i})},onStart(e){let t=H.current;if(null==t)return;let r=L.get(t);if(!r)return;let{onDragStart:n}=et.current,i={activatorEvent:l,active:{id:t,data:r.data,rect:W}};(0,R.unstable_batchedUpdates)(()=>{null==n||n(i),k(f.Initializing),E({type:a.DragStart,initialCoordinates:e,active:t}),D({type:"onDragStart",event:i}),Z(ts.current),ee(l)})},onMove(e){E({type:a.DragMove,coordinates:e})},onEnd:s(a.DragEnd),onCancel:s(a.DragCancel)});function s(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:i}=ek.current,o=null;if(t&&i){let{cancelDrop:s}=et.current;o={activatorEvent:l,active:t,collisions:r,delta:i,over:n},e===a.DragEnd&&"function"==typeof s&&await Promise.resolve(s(o))&&(e=a.DragCancel)}H.current=null,(0,R.unstable_batchedUpdates)(()=>{E({type:e}),k(f.Uninitialized),e9(null),Z(null),ee(null),ts.current=null;let t=e===a.DragEnd?"onDragEnd":"onDragCancel";if(o){let e=et.current[t];null==e||e(o),D({type:t,event:o})}})}}ts.current=o},[L]),tu=(0,C.useCallback)((e,t)=>(r,n)=>{let a=r.nativeEvent,i=L.get(n);null!==H.current||!i||a.dndKit||a.defaultPrevented||!0===e(r,t.options,{active:i})&&(a.dndKit={capturedBy:t.sensor},H.current=n,tc(r,t))},[L,tc]),td=(0,C.useMemo)(()=>v.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tu(e.handler,t)}))]},[]),[v,tu]);(0,C.useEffect)(()=>{if(!A)return;let e=v.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},v.map(e=>{let{sensor:t}=e;return t})),U(()=>{ej&&S===f.Initializing&&k(f.Initialized)},[ej,S]),(0,C.useEffect)(()=>{let{onDragMove:e}=et.current,{active:t,activatorEvent:r,collisions:n,over:a}=ek.current;if(!t||!r)return;let i={active:t,activatorEvent:r,collisions:n,delta:{x:eW.x,y:eW.y},over:a};(0,R.unstable_batchedUpdates)(()=>{null==e||e(i),D({type:"onDragMove",event:i})})},[eW.x,eW.y]),(0,C.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=ek.current;if(!e||null==H.current||!t||!a)return;let{onDragOver:i}=et.current,l=n.get(e7),o=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,s={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:o};(0,R.unstable_batchedUpdates)(()=>{e9(o),null==i||i(s),D({type:"onDragOver",event:s})})},[e7]),U(()=>{ek.current={activatorEvent:Q,active:G,activeNode:ep,collisionRect:eX,collisions:eV,droppableRects:eo,draggableNodes:L,draggingNode:eP,draggingNodeRect:eO,droppableContainers:I,over:e8,scrollableAncestors:eI,scrollAdjustedTranslate:eW},W.current={initial:eO,translated:eX}},[G,ep,eV,eX,L,eP,eO,eo,I,e8,eI,eW]),function(e){let{acceleration:t,activator:r=c.Pointer,canScroll:n,draggingRect:a,enabled:l,interval:o=5,order:s=u.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:m}=e,g=function(e){let{delta:t,disabled:r}=e,n=B(t);return Y(e=>{if(r||!n||!e)return eG;let a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[i.Backward]:e.x[i.Backward]||-1===a.x,[i.Forward]:e.x[i.Forward]||1===a.x},y:{[i.Backward]:e.y[i.Backward]||-1===a.y,[i.Forward]:e.y[i.Forward]||1===a.y}}},[r,t,n])}({delta:p,disabled:!l}),[v,x]=function(){let e=(0,C.useRef)(null);return[(0,C.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,C.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),b=(0,C.useRef)({x:0,y:0}),y=(0,C.useRef)({x:0,y:0}),w=(0,C.useMemo)(()=>{switch(r){case c.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case c.DraggableRect:return a}},[r,a,d]),j=(0,C.useRef)(null),E=(0,C.useCallback)(()=>{let e=j.current;if(!e)return;let t=b.current.x*y.current.x,r=b.current.y*y.current.y;e.scrollBy(t,r)},[]),D=(0,C.useMemo)(()=>s===u.TreeOrder?[...h].reverse():h,[s,h]);(0,C.useEffect)(()=>{if(!l||!h.length||!w)return void x();for(let e of D){if((null==n?void 0:n(e))===!1)continue;let r=f[h.indexOf(e)];if(!r)continue;let{direction:a,speed:l}=function(e,t,r,n,a){let{top:l,left:o,right:s,bottom:c}=r;void 0===n&&(n=10),void 0===a&&(a=eC);let{isTop:u,isBottom:d,isLeft:h,isRight:f}=eN(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!u&&l<=t.top+g.height?(p.y=i.Backward,m.y=n*Math.abs((t.top+g.height-l)/g.height)):!d&&c>=t.bottom-g.height&&(p.y=i.Forward,m.y=n*Math.abs((t.bottom-g.height-c)/g.height)),!f&&s>=t.right-g.width?(p.x=i.Forward,m.x=n*Math.abs((t.right-g.width-s)/g.width)):!h&&o<=t.left+g.width&&(p.x=i.Backward,m.x=n*Math.abs((t.left+g.width-o)/g.width)),{direction:p,speed:m}}(e,r,w,t,m);for(let e of["x","y"])g[e][a[e]]||(l[e]=0,a[e]=0);if(l.x>0||l.y>0){x(),j.current=e,v(E,o),b.current=l,y.current=a;return}}b.current={x:0,y:0},y.current={x:0,y:0},x()},[t,E,n,x,l,o,JSON.stringify(w),JSON.stringify(g),v,h,D,f,JSON.stringify(m)])}({...ev,delta:q,draggingRect:eX,pointerCoordinates:e$,scrollableAncestors:eI,scrollableAncestorRects:eU});let th=(0,C.useMemo)(()=>({active:G,activeNode:ep,activeNodeRect:ej,activatorEvent:Q,collisions:eV,containerNodeRect:eS,dragOverlay:eT,draggableNodes:L,droppableContainers:I,droppableRects:eo,over:e8,measureDroppableContainers:es,scrollableAncestors:eI,scrollableAncestorRects:eU,measuringConfiguration:ei,measuringScheduled:eu,windowRect:eq}),[G,ep,ej,Q,eV,eS,eT,L,I,eo,e8,es,eI,eU,ei,eu,eq]),tf=(0,C.useMemo)(()=>({activatorEvent:Q,activators:td,active:G,activeNodeRect:ej,ariaDescribedById:{draggable:er},dispatch:E,draggableNodes:L,over:e8,measureDroppableContainers:es}),[Q,td,G,ej,E,er,L,e8,es]);return M().createElement(en.Provider,{value:N},M().createElement(te.Provider,{value:tf},M().createElement(tt.Provider,{value:th},M().createElement(tl.Provider,{value:to},g)),M().createElement(ta,{disabled:(null==p?void 0:p.restoreFocus)===!1})),M().createElement(el,{...p,hiddenTextDescribedById:er}))}),ts=(0,C.createContext)(null),tc="button",tu={timeout:25};function td(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e,l=X("Droppable"),{active:o,dispatch:s,over:c,measureDroppableContainers:u}=(0,C.useContext)(te),d=(0,C.useRef)({disabled:r}),h=(0,C.useRef)(!1),f=(0,C.useRef)(null),p=(0,C.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...tu,...i},x=$(null!=g?g:n),b=eJ({callback:(0,C.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),disabled:m||!o}),[y,w]=_((0,C.useCallback)((e,t)=>{b&&(t&&(b.unobserve(t),h.current=!1),e&&b.observe(e))},[b])),j=$(t);return(0,C.useEffect)(()=>{b&&y.current&&(b.disconnect(),h.current=!1,b.observe(y.current))},[y,b]),(0,C.useEffect)(()=>(s({type:a.RegisterDroppable,element:{id:n,key:l,disabled:r,node:y,rect:f,data:j}}),()=>s({type:a.UnregisterDroppable,key:l,id:n})),[n]),(0,C.useEffect)(()=>{r!==d.current.disabled&&(s({type:a.SetDroppableDisabled,id:n,key:l,disabled:r}),d.current.disabled=r)},[n,l,r,s]),{active:o,rect:f,isOver:(null==c?void 0:c.id)===n,node:y,over:c,setNodeRef:w}}function th(e){let{animation:t,children:r}=e,[n,a]=(0,C.useState)(null),[i,l]=(0,C.useState)(null),o=B(r);return r||n||!o||a(o),U(()=>{if(!i)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;if(null==e||null==r)return void a(null);Promise.resolve(t(r,i)).then(()=>{a(null)})},[t,n,i]),M().createElement(M().Fragment,null,r,n?(0,C.cloneElement)(n,{ref:l}):null)}let tf={x:0,y:0,scaleX:1,scaleY:1};function tp(e){let{children:t}=e;return M().createElement(te.Provider,{value:e9},M().createElement(tl.Provider,{value:tf},t))}let tm={position:"fixed",touchAction:"none"},tg=e=>J(e)?"transform 250ms ease":void 0,tv=(0,C.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:l,rect:o,style:s,transform:c,transition:u=tg}=e;if(!o)return null;let d=a?c:{...c,scaleX:1,scaleY:1},h={...tm,width:o.width,height:o.height,top:o.top,left:o.left,transform:Z.Transform.toString(d),transformOrigin:a&&n?function(e,t){let r=V(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,o):void 0,transition:"function"==typeof u?u(n):u,...s};return M().createElement(r,{className:l,style:h,ref:t},i)}),tx={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Z.Transform.toString(t)},{transform:Z.Transform.toString(r)}]},sideEffects:(n={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:r}=e,a={},{styles:i,className:l}=n;if(null!=i&&i.active)for(let[e,r]of Object.entries(i.active))void 0!==r&&(a[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,r));if(null!=i&&i.dragOverlay)for(let[e,t]of Object.entries(i.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=l&&l.active&&t.node.classList.add(l.active),null!=l&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(let[e,r]of Object.entries(a))t.node.style.setProperty(e,r);null!=l&&l.active&&t.node.classList.remove(l.active)}})},tb=0,ty=M().memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:l,wrapperElement:o="div",className:s,zIndex:c=999}=e,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:f,draggableNodes:p,droppableContainers:m,dragOverlay:g,over:v,measuringConfiguration:x,scrollableAncestors:b,scrollableAncestorRects:y,windowRect:w}=(0,C.useContext)(tt),j=(0,C.useContext)(tl),E=function(e){return(0,C.useMemo)(()=>{if(null!=e)return++tb},[e])}(null==d?void 0:d.id),D=ti(l,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:f,draggingNodeRect:g.rect,over:v,overlayNodeRect:g.rect,scrollableAncestors:b,scrollableAncestorRects:y,transform:j,windowRect:w}),N=eH(h),S=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return F((e,i)=>{if(null===t)return;let l=r.get(e);if(!l)return;let o=l.node.current;if(!o)return;let s=e4(i);if(!s)return;let{transform:c}=O(i).getComputedStyle(i),u=ep(c);if(!u)return;let d="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:a}={...tx,...e};return e=>{let{active:i,dragOverlay:l,transform:o,...s}=e;if(!t)return;let c={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},u={scaleX:1!==o.scaleX?i.rect.width*o.scaleX/l.rect.width:1,scaleY:1!==o.scaleY?i.rect.height*o.scaleY/l.rect.height:1},d={x:o.x-c.x,y:o.y-c.y,...u},h=a({...s,active:i,dragOverlay:l,transform:{initial:o,final:d}}),[f]=h,p=h[h.length-1];if(JSON.stringify(f)===JSON.stringify(p))return;let m=null==n?void 0:n({active:i,dragOverlay:l,...s}),g=l.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return eS(o,a.draggable.measure),d({active:{id:e,data:l.data,node:o,rect:a.draggable.measure(o)},draggableNodes:r,dragOverlay:{node:i,rect:a.dragOverlay.measure(s)},droppableContainers:n,measuringConfiguration:a,transform:u})})}({config:n,draggableNodes:p,droppableContainers:m,measuringConfiguration:x}),k=N?g.setRef:void 0;return M().createElement(tp,null,M().createElement(th,{animation:S},d&&E?M().createElement(tv,{key:E,id:d.id,ref:k,as:o,activatorEvent:u,adjustScale:t,className:s,transition:i,rect:N,style:{zIndex:c,...a},transform:D},r):null))});var tw=r(53125),tj=r(23562),tE=r(86632),tD=r(18780),tN=r(79396),tC=r(6475);let tM=(0,tC.createServerReference)("402bf7cb6a19a4b2cef68633a4421e12950ca7768a",tC.callServer,void 0,tC.findSourceMapURL,"evolvePlant");var tS=r(13972),tk=r(8487);let tR=(0,r(24224).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tA({className:e,variant:t,...r}){return(0,p.jsx)("div",{className:(0,k.cn)(tR({variant:t}),e),...r})}function tT(e){let t=new Date,r=new Date(e);return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function tP(){return(0,p.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:Array.from({length:5}).map((e,t)=>(0,p.jsx)(y,{className:"absolute text-blue-400 animate-water-drop",style:{left:`${100*Math.random()}%`,animationDelay:`${.5*Math.random()}s`,animationDuration:`${.5+.5*Math.random()}s`,width:`${16+16*Math.random()}px`,height:`${16+16*Math.random()}px`}},t))})}function tO(){return(0,p.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:Array.from({length:3}).map((e,t)=>(0,p.jsx)(w.A,{className:"absolute text-yellow-400 animate-float-up",style:{left:`${20+60*Math.random()}%`,bottom:"20px",animationDelay:`${.5*Math.random()}s`,animationDuration:`${1+.5*Math.random()}s`,width:`${20+12*Math.random()}px`,height:`${20+12*Math.random()}px`}},t))})}function tL({plant:e,open:t,onOpenChange:r,onEvolutionStart:n,userId:a}){let{playSfx:i}=(0,tE.G)(),{toast:l}=(0,S.dj)(),{gameData:o}=(0,tD.A)(),[s,c]=(0,C.useState)(!1),[u,d]=(0,C.useState)(!1);if(!e||!o)return null;let h=e.lastWatered?.filter(tT).length??0,f=o.waterRefills>0,g=f||h<4,x=async()=>{if(!g||!e)return;i("watering"),setTimeout(()=>i("watering"),200),c(!0),d(!0);let t=e.xp+200,s=e.level,u=!1;t>=1e3&&(t-=1e3,(s+=1)>=10&&"Base"===e.form?u=!0:(i("reward"),l({title:"Level Up!",description:`${e.name} has reached level ${s}!`})));let p=Date.now(),m=e.lastWatered||[];try{f&&h>=4?(await (0,tN.LS)(a),l({title:"Water Refill Used",description:`You have ${o.waterRefills-1} refills remaining.`})):m=[...m.filter(tT),p],await (0,tN.Z8)(a,e.id,{xp:t,level:s,lastWatered:m}),await (0,tN.B2)(a,10),u&&(n(e.id),r(!1))}catch(e){console.error("Failed to update plant or gold",e),l({variant:"destructive",title:"Error",description:"Could not save watering progress."})}setTimeout(()=>c(!1),2e3),setTimeout(()=>d(!1),1e3)};return(0,p.jsx)(v.lG,{open:t,onOpenChange:r,children:(0,p.jsxs)(v.Cf,{className:"max-w-sm",children:[(0,p.jsx)(v.c7,{children:(0,p.jsx)(v.L3,{className:"text-3xl text-center",children:e.name})}),(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,p.jsxs)("div",{className:"w-64 h-64 relative",children:[(0,p.jsx)("div",{className:"rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100 flex items-center justify-center h-full",children:"placeholder"!==e.image?(0,p.jsx)(N.default,{src:e.image,alt:e.name,width:256,height:256,className:"object-cover w-full h-full","data-ai-hint":e.hint}):(0,p.jsx)(j.A,{className:"w-24 h-24 text-muted-foreground/50"})}),s&&(0,p.jsx)(tP,{}),s&&(0,p.jsx)(tO,{}),u&&(0,p.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-1 bg-yellow-400/80 text-white font-bold px-3 py-1 rounded-full shadow-lg animate-fade-out-fast pointer-events-none",children:[(0,p.jsx)(w.A,{className:"w-5 h-5"}),(0,p.jsx)("span",{children:"+10"})]})]}),(0,p.jsx)("p",{className:"text-muted-foreground text-center mt-2",children:e.description}),(0,p.jsxs)("div",{className:"w-full px-4 space-y-2",children:[(0,p.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,p.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["Level ",e.level]}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.xp," / ",1e3," XP"]})]}),(0,p.jsx)(tj.k,{value:e.xp/1e3*100,className:"w-full"})]})]}),(0,p.jsxs)(v.Es,{className:"flex-col gap-2",children:[(0,p.jsxs)(m.$,{onClick:x,disabled:!g||s,children:[(0,p.jsx)(y,{className:"mr-2 h-4 w-4"}),s?"Watering...":f?`Use Refill (${o.waterRefills} left)`:`Water Plant (${h}/4)`]}),(0,p.jsx)(v.HM,{asChild:!0,children:(0,p.jsx)(m.$,{variant:"outline",className:"w-full",children:"Close"})})]})]})})}function tz({plant:e,open:t,onOpenChange:r}){return e?(0,p.jsx)(v.lG,{open:t,onOpenChange:r,children:(0,p.jsxs)(v.Cf,{className:"max-w-sm",children:[(0,p.jsx)(v.c7,{children:(0,p.jsx)(v.L3,{className:"text-3xl text-center",children:"A new plant!"})}),(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,p.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,p.jsx)(N.default,{src:e.imageDataUri,alt:e.name,width:256,height:256,className:"object-cover w-full h-full"})}),(0,p.jsx)("h3",{className:"text-2xl font-semibold text-primary",children:e.name}),(0,p.jsx)("p",{className:"text-muted-foreground text-center",children:e.description})]}),(0,p.jsx)(v.Es,{children:(0,p.jsx)(v.HM,{asChild:!0,children:(0,p.jsx)(m.$,{className:"w-full text-lg",children:"Collect"})})})]})}):null}function tq(){return(0,p.jsx)("div",{className:"flex h-20 w-20 flex-col items-center justify-center gap-1 rounded-lg border-2 border-dashed border-primary/30 pointer-events-none"})}function tI({plant:e,blendMode:t=!1}){return(0,p.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,p.jsx)("div",{className:"relative h-20 w-20 pointer-events-none flex items-center justify-center",children:"placeholder"!==e.image?(0,p.jsx)(N.default,{src:e.image,alt:e.name,fill:!0,className:(0,k.cn)("object-contain",t&&"mix-blend-multiply"),"data-ai-hint":e.hint}):(0,p.jsx)("div",{className:"w-full h-full flex items-center justify-center rounded-lg bg-muted/20",children:(0,p.jsx)(j.A,{className:"w-12 h-12 text-muted-foreground/50"})})}),(0,p.jsx)("p",{className:"mt-1 text-xs font-semibold text-primary truncate w-full pointer-events-none",children:e.name})]})}function tU({plant:e}){return(0,p.jsx)(g.Zp,{className:"group overflow-hidden shadow-md w-full",children:(0,p.jsxs)(g.Wu,{className:"p-0",children:[(0,p.jsxs)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:["placeholder"!==e.image?(0,p.jsx)(N.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover","data-ai-hint":e.hint}):(0,p.jsx)(j.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"}),"Evolved"===e.form&&(0,p.jsxs)(tA,{variant:"secondary",className:"absolute top-2 right-2 shadow-md",children:[(0,p.jsx)(E,{className:"w-3 h-3 mr-1"}),"Evolved"]})]}),(0,p.jsxs)("div",{className:"p-2 text-center bg-white/50 space-y-1",children:[(0,p.jsx)("p",{className:"text-sm font-semibold text-primary truncate",children:e.name}),(0,p.jsx)(tj.k,{value:e.xp/1e3*100,className:"h-1.5"})]})]})})}function tF({plant:e,source:t,onClick:r}){let{attributes:n,listeners:a,setNodeRef:i,isDragging:l}=function(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e,i=X("Draggable"),{activators:l,activatorEvent:o,active:s,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=(0,C.useContext)(te),{role:f=tc,roleDescription:p="draggable",tabIndex:m=0}=null!=a?a:{},g=(null==s?void 0:s.id)===t,v=(0,C.useContext)(g?tl:ts),[x,b]=_(),[y,w]=_(),j=(0,C.useMemo)(()=>l.reduce((e,r)=>{let{eventName:n,handler:a}=r;return e[n]=e=>{a(e,t)},e},{}),[l,t]),E=$(r);return U(()=>(d.set(t,{id:t,key:i,node:x,activatorNode:y,data:E}),()=>{let e=d.get(t);e&&e.key===i&&d.delete(t)}),[d,t]),{active:s,activatorEvent:o,activeNodeRect:c,attributes:(0,C.useMemo)(()=>({role:f,tabIndex:m,"aria-disabled":n,"aria-pressed":!!g&&f===tc||void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[n,f,m,g,p,u.draggable]),isDragging:g,listeners:n?void 0:j,node:x,over:h,setNodeRef:b,setActivatorNodeRef:w,transform:v}}({id:`${t}:${e.id}`,data:{plant:e,source:t}}),o={opacity:l?.4:1,touchAction:"none"};return"desk"===t?(0,p.jsx)("div",{ref:i,style:o,...a,...n,onClick:r,className:"flex flex-col items-center text-center cursor-grab active:cursor-grabbing h-full w-full justify-center",children:(0,p.jsx)(tI,{plant:e,blendMode:!0})}):(0,p.jsx)("div",{ref:i,style:o,...a,...n,onClick:r,className:"cursor-grab active:cursor-grabbing",children:(0,p.jsx)(tU,{plant:e})})}function t$({plant:e,index:t,activePlantData:r,onClickPlant:n}){let{isOver:a,setNodeRef:i}=td({id:`pot:${t}`});return(0,p.jsx)("div",{ref:i,className:(0,k.cn)("relative flex h-24 w-24 items-center justify-center rounded-lg transition-colors",a&&"bg-primary/20"),children:e?(0,p.jsx)(tF,{plant:e,source:"desk",onClick:()=>n(e)}):a&&r?(0,p.jsx)("div",{className:"flex flex-col items-center text-center opacity-60 pointer-events-none",children:(0,p.jsx)(tI,{plant:r.plant,blendMode:!0})}):(0,p.jsx)(tq,{})})}function tY(){let{user:e,gameData:t}=(0,tD.A)(),{toast:r}=(0,S.dj)(),{playSfx:n}=(0,tE.G)(),[a,i]=(0,C.useState)([,,,].fill(null)),[l,o]=(0,C.useState)([]),[s,c]=(0,C.useState)(!1),[u,d]=(0,C.useState)(null),[h,f]=(0,C.useState)(null),[g,v]=(0,C.useState)(null),[b,y]=(0,C.useState)(null),[w,E]=(0,C.useState)(!1),M=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,C.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(es(eY,{activationConstraint:{distance:8}}),es(eX,{activationConstraint:{delay:150,tolerance:5}})),k=(0,C.useMemo)(()=>t?.plants||{},[t]),R=(0,C.useMemo)(()=>a.map(e=>e?k[e]:null),[a,k]),A=(0,C.useMemo)(()=>l.map(e=>k[e]).filter(Boolean),[l,k]),T=(0,C.useMemo)(()=>b&&k[b]?.name||"",[b,k]),P=(()=>{if(!g)return null;let[e,t]=g.split(":"),r=k[parseInt(t,10)];return r?{plant:r,source:e}:null})(),O=async()=>{if(!e||!t||t.draws<=0)return void r({variant:"destructive",title:"No Draws Left",description:"Visit the shop to get more draws or wait for your daily refill."});c(!0);try{await (0,tw.iF)(e.uid);let r=t.plants?Object.values(t.plants).map(e=>e.name):[],a=await (0,x.a)(r),i=await (0,tk.w)(a.imageDataUri);n("success"),d({...a,imageDataUri:i})}catch(e){console.error(e),"Invalid API Key"===e.message?r({variant:"destructive",title:"Invalid API Key",description:"Please check your GOOGLE_API_KEY in the .env file."}):r({variant:"destructive",title:"Failed to draw a plant",description:"There was an issue with the AI. Please try again."})}finally{c(!1)}},L=async()=>{if(u&&e){try{let t=JSON.parse(JSON.stringify(u));await (0,tN.VS)(e.uid,t)}catch(e){console.error("Failed to save plant to Firestore",e),r({variant:"destructive",title:"Storage Error",description:"Could not save your new plant."})}d(null)}},z=async t=>{if(v(null),!e)return;let{active:r,over:n}=t;if(!n||!r||r.id===n.id)return;let s=r.data.current?.plant;if(!s)return;let[c]=r.id.split(":"),[u,d]=n.id.split(":"),h=[...a],f=[...l],p="desk"===c?h.findIndex(e=>e===s.id):-1;if("pot"===u){let e=parseInt(d,10),t=h[e];"collection"===c?(f=f.filter(e=>e!==s.id),t&&f.push(t),h[e]=s.id):"desk"===c&&-1!==p&&(h[e]=s.id,h[p]=t)}else"collection"===u&&"desk"===c&&-1!==p&&(h[p]=null,f.includes(s.id)||f.push(s.id));let m=f.sort((e,t)=>e-t);i(h),o(m),await (0,tN.hj)(e.uid,m,h)},q=async()=>{if(b&&e){E(!0);try{let t=await (0,tN.uq)(e.uid,b);if(!t)throw Error("Plant not found for evolution.");let{newImageDataUri:a}=await tM({name:t.name,imageDataUri:t.image}),i=await (0,tk.w)(a);await (0,tN.Z8)(e.uid,b,{image:i,form:"Evolved"}),n("success"),r({title:"Evolution Complete!",description:`${t.name} has evolved!`})}catch(e){console.error("Evolution failed",e),r({variant:"destructive",title:"Evolution Failed",description:"Could not evolve your plant. Please try again."})}finally{E(!1),y(null)}}};return e&&t?(0,p.jsx)(to,{sensors:M,onDragStart:e=>v(e.active.id),onDragEnd:z,onDragCancel:()=>v(null),children:(0,p.jsxs)("div",{className:"space-y-4 bg-white min-h-screen",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between p-4",children:[(0,p.jsx)("h1",{className:"text-3xl text-primary",children:"My Room"}),(0,p.jsx)(m.$,{variant:"secondary",className:"font-semibold",onClick:O,disabled:s||t.draws<=0,children:s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Drawing..."]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Draw Plant (",t.draws," left)"]})})]}),(0,p.jsx)("section",{className:"px-4",children:(0,p.jsxs)("div",{className:"relative h-48 rounded-lg border-2 border-primary/20 bg-card/80 p-6 overflow-hidden",children:[(0,p.jsx)(N.default,{src:"/desk.jpg",alt:"A wooden desk for plants",layout:"fill",objectFit:"cover",className:"z-0","data-ai-hint":"desk wood"}),(0,p.jsx)("div",{className:"relative z-10 flex h-full items-end justify-around",children:R.map((e,t)=>(0,p.jsx)(t$,{plant:e,index:t,activePlantData:P,onClickPlant:e=>f(k[e.id])},e?.id||`pot-${t}`))})]})}),(0,p.jsxs)("section",{className:"px-4 pb-4",children:[(0,p.jsx)("h2",{className:"mb-4 text-xl text-primary",children:"My Collection"}),(0,p.jsx)(t_,{children:(0,p.jsx)("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-4 lg:grid-cols-5",children:A.length>0?A.map(e=>(0,p.jsx)(tF,{plant:e,source:"collection",onClick:()=>f(k[e.id])},e.id)):(0,p.jsx)("div",{className:"col-span-3 text-center text-muted-foreground py-8",children:"Your collection is empty. Go to the Home screen to draw a new plant!"})})})]}),(0,p.jsx)(tL,{plant:h?k[h.id]:null,open:!!h,onOpenChange:e=>!e&&f(null),onEvolutionStart:e=>{k[e]&&y(e)},userId:e.uid}),(0,p.jsx)(tz,{plant:u,open:!!u,onOpenChange:e=>{e||L()}}),(0,p.jsx)(tS.Lt,{open:!!b||w,onOpenChange:e=>!e&&y(null),children:(0,p.jsxs)(tS.EO,{children:[(0,p.jsxs)(tS.wd,{children:[(0,p.jsx)(tS.r7,{children:w?"Evolving...":"Your plant is growing!"}),(0,p.jsx)(tS.$v,{children:w?"Please wait a moment.":`${T} is ready for a new form! Would you like to evolve it?`})]}),w&&(0,p.jsx)("div",{className:"flex justify-center p-4",children:(0,p.jsx)(D.A,{className:"w-12 h-12 text-primary animate-spin"})}),(0,p.jsxs)(tS.ck,{children:[(0,p.jsx)(tS.Zr,{disabled:w,children:"Later"}),(0,p.jsx)(tS.Rx,{onClick:q,disabled:w,children:w?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"})," Evolving..."]}):"Evolve"})]})]})}),(0,p.jsx)(ty,{children:P?"desk"===P.source?(0,p.jsx)(tI,{plant:P.plant,blendMode:!0}):(0,p.jsx)("div",{className:"w-28",children:(0,p.jsx)(tU,{plant:P.plant})}):null})]})}):(0,p.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-white",children:(0,p.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})})}function t_({children:e}){let{isOver:t,setNodeRef:r}=td({id:"collection:area"});return(0,p.jsx)("div",{ref:r,className:(0,k.cn)("rounded-lg border bg-muted/10 p-2 min-h-24",t&&"bg-primary/10 border-2 border-dashed border-primary/50"),children:e})}},2985:(e,t,r)=>{"use strict";r.d(t,{a:()=>v});var n=r(91199);r(42087);var a=r(95427),i=r(37612),l=r(79748),o=r.n(l),s=r(33873),c=r.n(s),u=r(33331);let d=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")});async function h(e,t){let r=(await o().readFile(e)).toString("base64");return`data:${t};base64,${r}`}let f=a.ai.definePrompt({name:"fallbackPlantDetailsPrompt",input:{schema:i.z.object({plantType:i.z.string().describe("The type of plant, e.g. 'succulent', 'fern'.")})},output:{format:"json",schema:i.z.object({name:i.z.string().describe("A creative and unique two-word name for the provided plant type."),description:i.z.string().describe("A short, whimsical, one-sentence description for this plant.")})},prompt:'You are a creative botanist for a game. For the plant type "{{plantType}}", generate a unique two-word name and a whimsical one-sentence description for it. Return the response as a JSON object.'}),p=a.ai.defineFlow({name:"getFallbackPlantFlow",inputSchema:i.z.object({}),outputSchema:d},async()=>{try{let e=c().join(process.cwd(),"public","fallback-plants");await o().mkdir(e,{recursive:!0});let t=(await o().readdir(e)).filter(e=>e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg"));if(0===t.length)throw Error("No fallback images found in the directory.");let r=t[Math.floor(Math.random()*t.length)],n=c().parse(r).name,a=c().join(e,r),i=`image/${c().extname(r).substring(1)}`,l=await h(a,i),{output:s}=await f({plantType:n});if(!s)throw Error("Could not generate details for fallback.");return{name:s.name,description:s.description,imageDataUri:l}}catch(e){return console.error("Critical error in fallback flow, returning hardcoded plant.",e),{name:"Resilient Succulent",description:"This little plant survived an error to be here!",imageDataUri:"https://placehold.co/256x256.png"}}});(0,u.D)([p]),(0,n.A)(p,"7fbc9457e961ba121fffc4a9e74fa1764843839712",null);let m=i.z.object({existingNames:i.z.array(i.z.string()).optional().describe("A list of existing plant names to avoid duplicating.")}),g=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")});async function v(e=[]){return b({existingNames:e})}let x=a.ai.definePrompt({name:"plantDetailsPrompt",input:{schema:m},output:{schema:i.z.object({name:i.z.string().describe('A creative and unique name for a new fantasy plant. Should be two words. Avoid common plant names like "fern" or "cactus".'),description:i.z.string().describe("A short, whimsical description for this new plant, in one sentence."),imagePrompt:i.z.string().describe('A simple visual prompt for an image generation model to create a picture of this plant. e.g., "A whimsical glowing mushroom plant with a happy face."')})},prompt:`You are a creative botanist for a 2D game about collecting cute, magical plants. Generate one new, unique, and whimsical plant. The plant should have a cute and simple design, not a strange or other-worldly appearance. The plant must have a highly creative and unusual two-word name that is not a common plant type. It should also have a short, one-sentence description, and a prompt for an image generator.

You MUST NOT use any of the following names:
{{#each existingNames}}
- {{this}}
{{/each}}
`}),b=a.ai.defineFlow({name:"drawPlantFlow",inputSchema:m,outputSchema:g},async({existingNames:e})=>{let t;try{let{output:r}=await x({existingNames:e});if(!r)throw Error("Could not generate plant details.");let n=c().join(process.cwd(),"public","fern.png"),i=await o().readFile(n),l=`data:image/png;base64,${i.toString("base64")}`;if(!(t=(await a.ai.generate({model:"googleai/gemini-2.0-flash-preview-image-generation",prompt:[{media:{url:l,contentType:"image/png"}},{text:`Your primary goal is to replicate the art style of the provided reference image EXACTLY. Create a new plant character based on the description: "${r.imagePrompt}".

          You MUST adhere to the following rules without exception:
          1. **Art Style:** The final image must perfectly match the clean, 2D, illustrated style of the reference image.
          2. **The Pot:** The plant MUST be in a simple, smiling terracotta pot. The pot's style, shape, color, and happy face must be identical to the one in the reference image. Do not add feet, patterns, or any other decorations to the pot.
          3. **The Plant:** The new plant character must be cute and simple. It absolutely MUST NOT have arms, legs, or a human-like body.
          4. **The Background:** The background MUST be a solid, pure white. No gradients, textures, or shadows.
          5. **Composition:** The image must contain ONLY the single plant character in its pot. NO other objects, text, people, hands, or background elements are allowed.`}],config:{responseModalities:["TEXT","IMAGE"]}})).media)||!t.url)throw Error("Could not generate plant image from AI.");let s=c().join(process.cwd(),"public","fallback-plants"),u=`${r.name.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-")}.png`,d=c().join(s,u),h=t.url.split(";base64,").pop();if(h)try{await o().mkdir(s,{recursive:!0}),await o().writeFile(d,h,"base64"),console.log(`Saved new plant image to: ${d}`)}catch(e){console.error(`Failed to save new plant image to fallback folder: ${e}`)}return{name:r.name,description:r.description,imageDataUri:t.url}}catch(e){if(e.message&&e.message.includes("API key not valid"))throw console.error("Authentication Error: The provided Google AI API key is invalid or missing.",e),Error("Invalid API Key");return console.error("Primary plant generation failed, triggering fallback.",e),p({})}});(0,u.D)([v]),(0,n.A)(v,"407c3e545aff6f125174734bb934867686df960b4e",null)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},5666:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var n=r(6475);let a=(0,n.createServerReference)("407c3e545aff6f125174734bb934867686df960b4e",n.callServer,void 0,n.findSourceMapURL,"drawPlant")},6854:(e,t,r)=>{Promise.resolve().then(r.bind(r,25883))},7252:e=>{"use strict";e.exports=require("express")},8487:(e,t,r)=>{"use strict";async function n(e,t=256){return new Promise((r,n)=>{let a=new window.Image;a.crossOrigin="anonymous",a.onload=()=>{let e=document.createElement("canvas"),{width:i,height:l}=a;i>l?i>t&&(l=Math.round(l*t/i),i=t):l>t&&(i=Math.round(i*t/l),l=t),e.width=i,e.height=l;let o=e.getContext("2d");if(!o)return n(Error("Could not get canvas context"));o.drawImage(a,0,0,i,l),r(e.toDataURL("image/jpeg",.7))},a.onerror=n,a.src=e})}r.d(t,{w:()=>n})},9812:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23562:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var n=r(60687),a=r(43210),i=r(25177),l=r(4780);let o=a.forwardRef(({className:e,value:t,...r},a)=>(0,n.jsx)(i.bL,{ref:a,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,n.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));o.displayName=i.bL.displayName},25883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(app)/room/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(app)/room/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},43747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"402bf7cb6a19a4b2cef68633a4421e12950ca7768a":()=>u,"407c3e545aff6f125174734bb934867686df960b4e":()=>n.a});var n=r(2985),a=r(91199);r(42087);var i=r(95427),l=r(37612),o=r(33331);let s=l.z.object({name:l.z.string().describe("The name of the plant being evolved."),imageDataUri:l.z.string().describe("The current image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")}),c=l.z.object({newImageDataUri:l.z.string().describe("The newly generated, evolved image of the plant, as a data URI.")});async function u(e){return d(e)}let d=i.ai.defineFlow({name:"evolvePlantFlow",inputSchema:s,outputSchema:c},async({name:e,imageDataUri:t})=>{try{let{media:r}=await i.ai.generate({model:"googleai/gemini-2.0-flash-preview-image-generation",prompt:[{media:{url:t,contentType:"image/png"}},{text:`This is a plant character named ${e}. Generate a more grown-up, evolved, or mature version of this exact plant. It should clearly be the same character, but bigger, more detailed, or with added features like small flowers or glowing effects. Keep the same art style, the same pot, and the same happy face. The background must be a solid white color. Do NOT change the core character.`}],config:{responseModalities:["TEXT","IMAGE"]}});if(!r||!r.url)throw Error("Could not generate evolved plant image from AI.");return{newImageDataUri:r.url}}catch(e){return console.error("Plant evolution failed.",e),{newImageDataUri:t}}});(0,o.D)([u]),(0,a.A)(u,"402bf7cb6a19a4b2cef68633a4421e12950ca7768a",null)},44708:e=>{"use strict";e.exports=require("node:https")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},55044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c});var n=r(65239),a=r(48088),i=r(88170),l=r.n(i),o=r(30893),s={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>o[e]);r.d(t,s);let c={children:["",{children:["(app)",{children:["room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25883)),"/home/user/studio/src/app/(app)/room/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/user/studio/src/app/(app)/room/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/room/page",pathname:"/room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>h,Es:()=>p,HM:()=>u,L3:()=>m,c7:()=>f,lG:()=>s});var n=r(60687),a=r(43210),i=r(23655),l=r(78726),o=r(4780);let s=i.bL;i.l9;let c=i.ZL,u=i.bm,d=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(i.hJ,{ref:r,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));d.displayName=i.hJ.displayName;let h=a.forwardRef(({className:e,children:t,...r},a)=>(0,n.jsxs)(c,{children:[(0,n.jsx)(d,{}),(0,n.jsxs)(i.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,n.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=i.UC.displayName;let f=({className:e,...t})=>(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});f.displayName="DialogHeader";let p=({className:e,...t})=>(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});p.displayName="DialogFooter";let m=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(i.hE,{ref:r,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));m.displayName=i.hE.displayName,a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(i.VY,{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName=i.VY.displayName},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76590:(e,t,r)=>{Promise.resolve().then(r.bind(r,2340))},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95427:(e,t,r)=>{"use strict";r.d(t,{ai:()=>i});var n=r(37612),a=r(56758);let i=(0,n.genkit)({plugins:[(0,a.YF)({apiKey:process.env.GOOGLE_API_KEY})],model:"googleai/gemini-2.0-flash"})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,567,711,814,546,474,669,281,86],()=>r(55044));module.exports=n})();