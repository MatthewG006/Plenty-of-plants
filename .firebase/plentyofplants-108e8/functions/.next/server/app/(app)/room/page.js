(()=>{var e={};e.id=327,e.ids=[327],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},916:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3902:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40083cf436102374a173646e5e605cd3a64d1fb222":()=>h.G,"40c3d011e50991b9caaf6c4277aa4c5a9f92dd46dd":()=>u});var n=r(91199);r(42087);var l=r(95427),a=r(29214),i=r(33331);let s=a.z.object({name:a.z.string().describe("The name of the plant being evolved."),imageDataUri:a.z.string().describe("The current image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")}),o=a.z.object({newImageDataUri:a.z.string().describe("The newly generated, evolved image of the plant, as a data URI.")});async function c(e){return d(e)}let d=l.ai.defineFlow({name:"evolvePlantFlow",inputSchema:s,outputSchema:o},async({name:e,imageDataUri:t})=>{try{let{media:r}=await l.ai.generate({model:"googleai/gemini-2.0-flash-preview-image-generation",prompt:[{media:{url:t,contentType:"image/jpeg"}},{text:`This is a plant character named ${e}. Your task is to generate an evolved, more mature version of this exact plant.

**CRITICAL INSTRUCTIONS:**
1.  **Evolve the Plant ONLY:** The changes should apply *only* to the plant itself. Make it bigger, more detailed, or add features like small flowers, glowing effects, or extra leaves.
2.  **The Pot MUST NOT Change:** The pot it is in must remain absolutely identical to the original image. Do not change its color, shape, size, or the happy face on it.
3.  **Maintain Art Style:** The overall art style and character design must be consistent with the original.
4.  **The Background:** The background of the image MUST be a solid white color.

The final image should clearly be the same character, just a more advanced version. Do NOT change the core character, pot, or face.`}],config:{responseModalities:["TEXT","IMAGE"]}});if(!r||!r.url)throw Error("Could not generate evolved plant image from AI.");return{newImageDataUri:r.url}}catch(e){return console.error("Plant evolution failed.",e),{newImageDataUri:t}}});async function u(e){return await c(e)}(0,i.D)([c]),(0,n.A)(c,"40cef4ad2efbe6768fb5c27ec99c80bdd086a758dd",null),(0,i.D)([u]),(0,n.A)(u,"40c3d011e50991b9caaf6c4277aa4c5a9f92dd46dd",null);var h=r(86826)},4573:e=>{"use strict";e.exports=require("node:buffer")},6854:(e,t,r)=>{Promise.resolve().then(r.bind(r,25883))},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21039:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tQ});var l,a,i,s,o,c,d,u,h,p,f=r(60687),m=r(43210),g=r.n(m),x=r(29523),v=r(44493),y=r(63503),w=r(24555),b=r(82614);let j=(0,b.A)("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);var N=r(9812);let C=(0,b.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var D=r(11516),E=r(81292),A=r(77368),S=r(916);let k=(0,b.A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var M=r(40219),R=r(30474),P=r(29867),T=r(4780),O=r(51215);let L="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function q(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function G(e){return"nodeType"in e}function z(e){var t,r;return e?q(e)?e:G(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function $(e){let{Document:t}=z(e);return e instanceof t}function I(e){return!q(e)&&e instanceof z(e).HTMLElement}function F(e){return e instanceof z(e).SVGElement}function U(e){return e?q(e)?e.document:G(e)?$(e)?e:I(e)||F(e)?e.ownerDocument:document:document:document}let W=L?m.useLayoutEffect:m.useEffect;function Y(e){let t=(0,m.useRef)(e);return W(()=>{t.current=e}),(0,m.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function B(e,t){void 0===t&&(t=[e]);let r=(0,m.useRef)(e);return W(()=>{r.current!==e&&(r.current=e)},t),r}function _(e,t){let r=(0,m.useRef)();return(0,m.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function X(e){let t=Y(e),r=(0,m.useRef)(null),n=(0,m.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function V(e){let t=(0,m.useRef)();return(0,m.useEffect)(()=>{t.current=e},[e]),t.current}let K={};function H(e,t){return(0,m.useMemo)(()=>{if(t)return t;let r=null==K[e]?0:K[e]+1;return K[e]=r,e+"-"+r},[e,t])}function Z(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];return n.reduce((t,r)=>{for(let[n,l]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*l)}return t},{...t})}}let J=Z(1),Q=Z(-1);function ee(e){if(!e)return!1;let{KeyboardEvent:t}=z(e.target);return t&&e instanceof t}function et(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=z(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let er=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[er.Translate.toString(e),er.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",el={display:"none"};function ea(e){let{id:t,value:r}=e;return g().createElement("div",{id:t,style:el},r)}function ei(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return g().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let es=(0,m.createContext)(null),eo={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ec={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ed(e){let{announcements:t=ec,container:r,hiddenTextDescribedById:n,screenReaderInstructions:l=eo}=e,{announce:a,announcement:i}=function(){let[e,t]=(0,m.useState)("");return{announce:(0,m.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),s=H("DndLiveRegion"),[o,c]=(0,m.useState)(!1);(0,m.useEffect)(()=>{c(!0)},[]);var d=(0,m.useMemo)(()=>({onDragStart(e){let{active:r}=e;a(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&a(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;a(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;a(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;a(t.onDragCancel({active:r,over:n}))}}),[a,t]);let u=(0,m.useContext)(es);if((0,m.useEffect)(()=>{if(!u)throw Error("useDndMonitor must be used within a children of <DndContext>");return u(d)},[d,u]),!o)return null;let h=g().createElement(g().Fragment,null,g().createElement(ea,{id:n,value:l.draggable}),g().createElement(ei,{id:s,announcement:i}));return r?(0,O.createPortal)(h,r):h}function eu(){}function eh(e,t){return(0,m.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(l||(l={}));let ep=Object.freeze({x:0,y:0});function ef(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let em=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,l=[];for(let e of n){let{id:n}=e,a=r.get(n);if(a){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(n<l&&r<a){let i=t.width*t.height,s=e.width*e.height,o=(l-n)*(a-r);return Number((o/(i+s-o)).toFixed(4))}return 0}(a,t);r>0&&l.push({id:n,data:{droppableContainer:e,value:r}})}}return l.sort(ef)};function eg(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ep}let ex=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}(1);function ev(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let ey={ignoreTransform:!1};function ew(e,t){void 0===t&&(t=ey);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=z(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=ev(t);if(!n)return e;let{scaleX:l,scaleY:a,x:i,y:s}=n,o=e.left-i-(1-l)*parseFloat(r),c=e.top-s-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),d=l?e.width/l:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,n))}let{top:n,left:l,width:a,height:i,bottom:s,right:o}=r;return{top:n,left:l,width:a,height:i,bottom:s,right:o}}function eb(e){return ew(e,{ignoreTransform:!0})}function ej(e,t){let r=[];return e?function n(l){var a;if(null!=t&&r.length>=t||!l)return r;if($(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!I(l)||F(l)||r.includes(l))return r;let i=z(e).getComputedStyle(l);return(l!==e&&function(e,t){void 0===t&&(t=z(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let n=t[e];return"string"==typeof n&&r.test(n)})}(l,i)&&r.push(l),void 0===(a=i)&&(a=z(l).getComputedStyle(l)),"fixed"===a.position)?r:n(l.parentNode)}(e):r}function eN(e){let[t]=ej(e,1);return null!=t?t:null}function eC(e){return L&&e?q(e)?e:G(e)?$(e)||e===U(e).scrollingElement?window:I(e)?e:null:null:null}function eD(e){return q(e)?e.scrollX:e.scrollLeft}function eE(e){return q(e)?e.scrollY:e.scrollTop}function eA(e){return{x:eD(e),y:eE(e)}}function eS(e){return!!L&&!!e&&e===document.scrollingElement}function ek(e){let t={x:0,y:0},r=eS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,a=e.scrollLeft<=t.x;return{isTop:l,isLeft:a,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(a||(a={}));let eM={x:.2,y:.2};function eR(e){return e.reduce((e,t)=>J(e,eA(t)),ep)}function eP(e,t){if(void 0===t&&(t=ew),!e)return;let{top:r,left:n,bottom:l,right:a}=t(e);eN(e)&&(l<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eT=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eD(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eE(t),0)}]];class eO{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=ej(t),n=eR(r);for(let[t,l,a]of(this.rect={...e},this.width=e.width,this.height=e.height,eT))for(let e of l)Object.defineProperty(this,e,{get:()=>{let l=a(r),i=n[t]-l;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eL{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eq(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eG(e){e.preventDefault()}function ez(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(i||(i={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(s||(s={}));let e$={start:[s.Space,s.Enter],cancel:[s.Esc],end:[s.Space,s.Enter,s.Tab]},eI=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case s.Right:return{...r,x:r.x+25};case s.Left:return{...r,x:r.x-25};case s.Down:return{...r,y:r.y+25};case s.Up:return{...r,y:r.y-25}}};class eF{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new eL(U(t)),this.windowListeners=new eL(z(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(i.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eP(r),t(ep)}handleKeyDown(e){if(ee(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:l=e$,coordinateGetter:a=eI,scrollBehavior:i="smooth"}=n,{code:o}=e;if(l.end.includes(o))return void this.handleEnd(e);if(l.cancel.includes(o))return void this.handleCancel(e);let{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:ep;this.referenceCoordinates||(this.referenceCoordinates=d);let u=a(e,{active:t,context:r.current,currentCoordinates:d});if(u){let t=Q(u,d),n={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:a,isRight:o,isLeft:c,isBottom:d,maxScroll:h,minScroll:p}=ek(r),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(l===s.Right?f.right-f.width/2:f.right,Math.max(l===s.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(l===s.Down?f.bottom-f.height/2:f.bottom,Math.max(l===s.Down?f.top:f.top+f.height/2,u.y))},g=l===s.Right&&!o||l===s.Left&&!c,x=l===s.Down&&!d||l===s.Up&&!a;if(g&&m.x!==u.x){let e=r.scrollLeft+t.x,a=l===s.Right&&e<=h.x||l===s.Left&&e>=p.x;if(a&&!t.y)return void r.scrollTo({left:e,behavior:i});a?n.x=r.scrollLeft-e:n.x=l===s.Right?r.scrollLeft-h.x:r.scrollLeft-p.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(x&&m.y!==u.y){let e=r.scrollTop+t.y,a=l===s.Down&&e<=h.y||l===s.Up&&e>=p.y;if(a&&!t.x)return void r.scrollTo({top:e,behavior:i});a?n.y=r.scrollTop-e:n.y=l===s.Down?r.scrollTop-h.y:r.scrollTop-p.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,J(Q(u,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eU(e){return!!(e&&"distance"in e)}function eW(e){return!!(e&&"delay"in e)}eF.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=e$,onActivation:l}=t,{active:a}=r,{code:i}=e.nativeEvent;if(n.start.includes(i)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class eY{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=z(e);return e instanceof t?e:U(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=U(a),this.documentListeners=new eL(this.document),this.listeners=new eL(r),this.windowListeners=new eL(z(a)),this.initialCoordinates=null!=(n=et(l))?n:ep,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.DragStart,eG),this.windowListeners.add(i.VisibilityChange,this.handleCancel),this.windowListeners.add(i.ContextMenu,eG),this.documentListeners.add(i.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eU(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(i.Click,ez,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(i.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!n)return;let s=null!=(t=et(e))?t:ep,o=Q(n,s);if(!r&&i){if(eU(i)){if(null!=i.tolerance&&eq(o,i.tolerance))return this.handleCancel();if(eq(o,i.distance))return this.handleStart()}return eW(i)&&eq(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===s.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e_ extends eY{constructor(e){let{event:t}=e;super(e,eB,U(t.target))}}e_.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];let eX={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class eV extends eY{constructor(e){super(e,eX,U(e.event.target))}}eV.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==o.RightClick&&(null==n||n({event:r}),!0)}}];let eK={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eH extends eY{constructor(e){super(e,eK)}static setup(){return window.addEventListener(eK.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eK.move.name,e)};function e(){}}}eH.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:l}=r;return!(l.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(c||(c={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(d||(d={}));let eZ={x:{[a.Backward]:!1,[a.Forward]:!1},y:{[a.Backward]:!1,[a.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(u||(u={})),(h||(h={})).Optimized="optimized";let eJ=new Map;function eQ(e,t){return _(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function e0(e){let{callback:t,disabled:r}=e,n=Y(t),l=(0,m.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,m.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function e1(e){return new eO(ew(e),e)}function e2(e,t,r){void 0===t&&(t=e1);let[n,l]=(0,m.useState)(null);function a(){l(n=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=n?n:r)?l:null}let a=t(e);return JSON.stringify(n)===JSON.stringify(a)?n:a})}let i=function(e){let{callback:t,disabled:r}=e,n=Y(t),l=(0,m.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,m.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){a();break}}}}),s=e0({callback:a});return W(()=>{a(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),n}let e5=[];function e4(e,t){void 0===t&&(t=[]);let r=(0,m.useRef)(null);return(0,m.useEffect)(()=>{r.current=null},t),(0,m.useEffect)(()=>{let t=e!==ep;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?Q(e,r.current):ep}function e3(e){return(0,m.useMemo)(()=>e?function(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}let e7=[];function e9(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return I(t)?t:e}let e6=[{sensor:e_,options:{}},{sensor:eF,options:{}}],e8={current:{}},te={draggable:{measure:eb},droppable:{measure:eb,strategy:u.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:ew}};class tt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:te,measureDroppableContainers:eu,windowRect:null,measuringScheduled:!1},tn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eu,draggableNodes:new Map,over:null,measureDroppableContainers:eu},tl=(0,m.createContext)(tn),ta=(0,m.createContext)(tr);function ti(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tt}}}function ts(e,t){switch(t.type){case l.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case l.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case l.DragEnd:case l.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case l.RegisterDroppable:{let{element:r}=t,{id:n}=r,l=new tt(e.droppable.containers);return l.set(n,r),{...e,droppable:{...e.droppable,containers:l}}}case l.SetDroppableDisabled:{let{id:r,key:n,disabled:l}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let i=new tt(e.droppable.containers);return i.set(r,{...a,disabled:l}),{...e,droppable:{...e.droppable,containers:i}}}case l.UnregisterDroppable:{let{id:r,key:n}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let a=new tt(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function to(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:l}=(0,m.useContext)(tl),a=V(n),i=V(null==r?void 0:r.id);return(0,m.useEffect)(()=>{if(!t&&!n&&a&&null!=i){if(!ee(a)||document.activeElement===a.target)return;let e=l.get(i);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(en)?e:e.querySelector(en);if(t){t.focus();break}}})}},[n,t,l,i,a]),null}function tc(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let td=(0,m.createContext)({...ep,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(p||(p={}));let tu=(0,m.memo)(function(e){var t,r,n,i,s,o;let{id:h,accessibility:f,autoScroll:x=!0,children:v,sensors:y=e6,collisionDetection:w=em,measuring:b,modifiers:j,...N}=e,[C,D]=(0,m.useReducer)(ts,void 0,ti),[E,A]=function(){let[e]=(0,m.useState)(()=>new Set),t=(0,m.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,m.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[S,k]=(0,m.useState)(p.Uninitialized),M=S===p.Initialized,{draggable:{active:R,nodes:P,translate:T},droppable:{containers:q}}=C,G=null!=R?P.get(R):null,$=(0,m.useRef)({initial:null,translated:null}),F=(0,m.useMemo)(()=>{var e;return null!=R?{id:R,data:null!=(e=null==G?void 0:G.data)?e:e8,rect:$}:null},[R,G]),U=(0,m.useRef)(null),[Y,K]=(0,m.useState)(null),[Z,Q]=(0,m.useState)(null),ee=B(N,Object.values(N)),er=H("DndDescribedBy",h),en=(0,m.useMemo)(()=>q.getEnabled(),[q]),el=(0,m.useMemo)(()=>({draggable:{...te.draggable,...null==b?void 0:b.draggable},droppable:{...te.droppable,...null==b?void 0:b.droppable},dragOverlay:{...te.dragOverlay,...null==b?void 0:b.dragOverlay}}),[null==b?void 0:b.draggable,null==b?void 0:b.droppable,null==b?void 0:b.dragOverlay]),{droppableRects:ea,measureDroppableContainers:ei,measuringScheduled:eo}=function(e,t){let{dragging:r,dependencies:n,config:l}=t,[a,i]=(0,m.useState)(null),{frequency:s,measure:o,strategy:c}=l,d=(0,m.useRef)(e),h=function(){switch(c){case u.Always:return!1;case u.BeforeDragging:return r;default:return!r}}(),p=B(h),f=(0,m.useCallback)(function(e){void 0===e&&(e=[]),p.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),g=(0,m.useRef)(null),x=_(t=>{if(h&&!r)return eJ;if(!t||t===eJ||d.current!==e||null!=a){let t=new Map;for(let r of e){if(!r)continue;if(a&&a.length>0&&!a.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eO(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,a,r,h,o]);return(0,m.useEffect)(()=>{d.current=e},[e]),(0,m.useEffect)(()=>{h||f()},[r,h]),(0,m.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),(0,m.useEffect)(()=>{h||"number"!=typeof s||null!==g.current||(g.current=setTimeout(()=>{f(),g.current=null},s))},[s,h,f,...n]),{droppableRects:x,measureDroppableContainers:f,measuringScheduled:null!=a}}(en,{dragging:M,dependencies:[T.x,T.y],config:el.droppable}),ec=function(e,t){let r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return _(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(P,R),eu=(0,m.useMemo)(()=>Z?et(Z):null,[Z]),eh=function(){let e=(null==Y?void 0:Y.autoScrollEnabled)===!1,t="object"==typeof x?!1===x.enabled:!1===x,r=M&&!e&&!t;return"object"==typeof x?{...x,enabled:r}:{enabled:r}}(),ef=eQ(ec,el.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:l=!0}=e,a=(0,m.useRef)(!1),{x:i,y:s}="boolean"==typeof l?{x:l,y:l}:l;W(()=>{if(!i&&!s||!t){a.current=!1;return}if(a.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=eg(r(e),n);if(i||(l.x=0),s||(l.y=0),a.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eN(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,i,s,n,r])}({activeNode:null!=R?P.get(R):null,config:eh.layoutShiftCompensation,initialRect:ef,measure:el.draggable.measure});let ev=e2(ec,el.draggable.measure,ef),ey=e2(ec?ec.parentElement:null),eb=(0,m.useRef)({activatorEvent:null,active:null,activeNode:ec,collisionRect:null,collisions:null,droppableRects:ea,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eD=q.getNodeFor(null==(t=eb.current.over)?void 0:t.id),eE=function(e){let{measure:t}=e,[r,n]=(0,m.useState)(null),l=e0({callback:(0,m.useCallback)(e=>{for(let{target:r}of e)if(I(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[a,i]=X((0,m.useCallback)(e=>{let r=e9(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),n(r?t(r):null)},[t,l]));return(0,m.useMemo)(()=>({nodeRef:a,rect:r,setRef:i}),[r,a,i])}({measure:el.dragOverlay.measure}),eP=null!=(r=eE.nodeRef.current)?r:ec,eT=M?null!=(n=eE.rect)?n:ev:null,eL=!!(eE.nodeRef.current&&eE.rect),eq=function(e){let t=eQ(e);return eg(e,t)}(eL?null:ev),eG=e3(eP?z(eP):null),ez=function(e){let t=(0,m.useRef)(e),r=_(r=>e?r&&r!==e5&&e&&t.current&&e.parentNode===t.current.parentNode?r:ej(e):e5,[e]);return(0,m.useEffect)(()=>{t.current=e},[e]),r}(M?null!=eD?eD:ec:null),e$=function(e,t){void 0===t&&(t=ew);let[r]=e,n=e3(r?z(r):null),[l,a]=(0,m.useState)(e7);function i(){a(()=>e.length?e.map(e=>eS(e)?n:new eO(t(e),e)):e7)}let s=e0({callback:i});return W(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),l}(ez),eI=tc(j,{transform:{x:T.x-eq.x,y:T.y-eq.y,scaleX:1,scaleY:1},activatorEvent:Z,active:F,activeNodeRect:ev,containerNodeRect:ey,draggingNodeRect:eT,over:eb.current.over,overlayNodeRect:eE.rect,scrollableAncestors:ez,scrollableAncestorRects:e$,windowRect:eG}),eF=eu?J(eu,T):null,eU=function(e){let[t,r]=(0,m.useState)(null),n=(0,m.useRef)(e),l=(0,m.useCallback)(e=>{let t=eC(e.target);t&&r(e=>e?(e.set(t,eA(t)),new Map(e)):null)},[]);return(0,m.useEffect)(()=>{let t=n.current;if(e!==t){a(t);let i=e.map(e=>{let t=eC(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,eA(t)]):null}).filter(e=>null!=e);r(i.length?new Map(i):null),n.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=eC(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,m.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>J(e,t),ep):eR(e):ep,[e,t])}(ez),eW=e4(eU),eY=e4(eU,[ev]),eB=J(eI,eW),e_=eT?ex(eT,eI):null,eX=F&&e_?w({active:F,collisionRect:e_,droppableRects:ea,droppableContainers:en,pointerCoordinates:eF}):null,eV=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(eX,"id"),[eK,eH]=(0,m.useState)(null),e1=(s=eL?eI:J(eI,eY),o=null!=(i=null==eK?void 0:eK.rect)?i:null,{...s,scaleX:o&&ev?o.width/ev.width:1,scaleY:o&&ev?o.height/ev.height:1}),tt=(0,m.useRef)(null),tr=(0,m.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==U.current)return;let a=P.get(U.current);if(!a)return;let i=e.nativeEvent,s=new r({active:U.current,activeNode:a,event:i,options:n,context:eb,onAbort(e){if(!P.get(e))return;let{onDragAbort:t}=ee.current,r={id:e};null==t||t(r),E({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!P.get(e))return;let{onDragPending:l}=ee.current,a={id:e,constraint:t,initialCoordinates:r,offset:n};null==l||l(a),E({type:"onDragPending",event:a})},onStart(e){let t=U.current;if(null==t)return;let r=P.get(t);if(!r)return;let{onDragStart:n}=ee.current,a={activatorEvent:i,active:{id:t,data:r.data,rect:$}};(0,O.unstable_batchedUpdates)(()=>{null==n||n(a),k(p.Initializing),D({type:l.DragStart,initialCoordinates:e,active:t}),E({type:"onDragStart",event:a}),K(tt.current),Q(i)})},onMove(e){D({type:l.DragMove,coordinates:e})},onEnd:o(l.DragEnd),onCancel:o(l.DragCancel)});function o(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=eb.current,s=null;if(t&&a){let{cancelDrop:o}=ee.current;s={activatorEvent:i,active:t,collisions:r,delta:a,over:n},e===l.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=l.DragCancel)}U.current=null,(0,O.unstable_batchedUpdates)(()=>{D({type:e}),k(p.Uninitialized),eH(null),K(null),Q(null),tt.current=null;let t=e===l.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=ee.current[t];null==e||e(s),E({type:t,event:s})}})}}tt.current=s},[P]),tn=(0,m.useCallback)((e,t)=>(r,n)=>{let l=r.nativeEvent,a=P.get(n);null!==U.current||!a||l.dndKit||l.defaultPrevented||!0===e(r,t.options,{active:a})&&(l.dndKit={capturedBy:t.sensor},U.current=n,tr(r,t))},[P,tr]),tu=(0,m.useMemo)(()=>y.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tn(e.handler,t)}))]},[]),[y,tn]);(0,m.useEffect)(()=>{if(!L)return;let e=y.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},y.map(e=>{let{sensor:t}=e;return t})),W(()=>{ev&&S===p.Initializing&&k(p.Initialized)},[ev,S]),(0,m.useEffect)(()=>{let{onDragMove:e}=ee.current,{active:t,activatorEvent:r,collisions:n,over:l}=eb.current;if(!t||!r)return;let a={active:t,activatorEvent:r,collisions:n,delta:{x:eB.x,y:eB.y},over:l};(0,O.unstable_batchedUpdates)(()=>{null==e||e(a),E({type:"onDragMove",event:a})})},[eB.x,eB.y]),(0,m.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:l}=eb.current;if(!e||null==U.current||!t||!l)return;let{onDragOver:a}=ee.current,i=n.get(eV),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:s};(0,O.unstable_batchedUpdates)(()=>{eH(s),null==a||a(o),E({type:"onDragOver",event:o})})},[eV]),W(()=>{eb.current={activatorEvent:Z,active:F,activeNode:ec,collisionRect:e_,collisions:eX,droppableRects:ea,draggableNodes:P,draggingNode:eP,draggingNodeRect:eT,droppableContainers:q,over:eK,scrollableAncestors:ez,scrollAdjustedTranslate:eB},$.current={initial:eT,translated:e_}},[F,ec,eX,e_,P,eP,eT,ea,q,eK,ez,eB]),function(e){let{acceleration:t,activator:r=c.Pointer,canScroll:n,draggingRect:l,enabled:i,interval:s=5,order:o=d.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:p,delta:f,threshold:g}=e,x=function(e){let{delta:t,disabled:r}=e,n=V(t);return _(e=>{if(r||!n||!e)return eZ;let l={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[a.Backward]:e.x[a.Backward]||-1===l.x,[a.Forward]:e.x[a.Forward]||1===l.x},y:{[a.Backward]:e.y[a.Backward]||-1===l.y,[a.Forward]:e.y[a.Forward]||1===l.y}}},[r,t,n])}({delta:f,disabled:!i}),[v,y]=function(){let e=(0,m.useRef)(null);return[(0,m.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,m.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),w=(0,m.useRef)({x:0,y:0}),b=(0,m.useRef)({x:0,y:0}),j=(0,m.useMemo)(()=>{switch(r){case c.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case c.DraggableRect:return l}},[r,l,u]),N=(0,m.useRef)(null),C=(0,m.useCallback)(()=>{let e=N.current;if(!e)return;let t=w.current.x*b.current.x,r=w.current.y*b.current.y;e.scrollBy(t,r)},[]),D=(0,m.useMemo)(()=>o===d.TreeOrder?[...h].reverse():h,[o,h]);(0,m.useEffect)(()=>{if(!i||!h.length||!j)return void y();for(let e of D){if((null==n?void 0:n(e))===!1)continue;let r=p[h.indexOf(e)];if(!r)continue;let{direction:l,speed:i}=function(e,t,r,n,l){let{top:i,left:s,right:o,bottom:c}=r;void 0===n&&(n=10),void 0===l&&(l=eM);let{isTop:d,isBottom:u,isLeft:h,isRight:p}=ek(e),f={x:0,y:0},m={x:0,y:0},g={height:t.height*l.y,width:t.width*l.x};return!d&&i<=t.top+g.height?(f.y=a.Backward,m.y=n*Math.abs((t.top+g.height-i)/g.height)):!u&&c>=t.bottom-g.height&&(f.y=a.Forward,m.y=n*Math.abs((t.bottom-g.height-c)/g.height)),!p&&o>=t.right-g.width?(f.x=a.Forward,m.x=n*Math.abs((t.right-g.width-o)/g.width)):!h&&s<=t.left+g.width&&(f.x=a.Backward,m.x=n*Math.abs((t.left+g.width-s)/g.width)),{direction:f,speed:m}}(e,r,j,t,g);for(let e of["x","y"])x[e][l[e]]||(i[e]=0,l[e]=0);if(i.x>0||i.y>0){y(),N.current=e,v(C,s),w.current=i,b.current=l;return}}w.current={x:0,y:0},b.current={x:0,y:0},y()},[t,C,n,y,i,s,JSON.stringify(j),JSON.stringify(x),v,h,D,p,JSON.stringify(g)])}({...eh,delta:T,draggingRect:e_,pointerCoordinates:eF,scrollableAncestors:ez,scrollableAncestorRects:e$});let th=(0,m.useMemo)(()=>({active:F,activeNode:ec,activeNodeRect:ev,activatorEvent:Z,collisions:eX,containerNodeRect:ey,dragOverlay:eE,draggableNodes:P,droppableContainers:q,droppableRects:ea,over:eK,measureDroppableContainers:ei,scrollableAncestors:ez,scrollableAncestorRects:e$,measuringConfiguration:el,measuringScheduled:eo,windowRect:eG}),[F,ec,ev,Z,eX,ey,eE,P,q,ea,eK,ei,ez,e$,el,eo,eG]),tp=(0,m.useMemo)(()=>({activatorEvent:Z,activators:tu,active:F,activeNodeRect:ev,ariaDescribedById:{draggable:er},dispatch:D,draggableNodes:P,over:eK,measureDroppableContainers:ei}),[Z,tu,F,ev,D,er,P,eK,ei]);return g().createElement(es.Provider,{value:A},g().createElement(tl.Provider,{value:tp},g().createElement(ta.Provider,{value:th},g().createElement(td.Provider,{value:e1},v)),g().createElement(to,{disabled:(null==f?void 0:f.restoreFocus)===!1})),g().createElement(ed,{...f,hiddenTextDescribedById:er}))}),th=(0,m.createContext)(null),tp="button",tf={timeout:25};function tm(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e,i=H("Droppable"),{active:s,dispatch:o,over:c,measureDroppableContainers:d}=(0,m.useContext)(tl),u=(0,m.useRef)({disabled:r}),h=(0,m.useRef)(!1),p=(0,m.useRef)(null),f=(0,m.useRef)(null),{disabled:g,updateMeasurementsFor:x,timeout:v}={...tf,...a},y=B(null!=x?x:n),w=e0({callback:(0,m.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{d(Array.isArray(y.current)?y.current:[y.current]),f.current=null},v)},[v]),disabled:g||!s}),[b,j]=X((0,m.useCallback)((e,t)=>{w&&(t&&(w.unobserve(t),h.current=!1),e&&w.observe(e))},[w])),N=B(t);return(0,m.useEffect)(()=>{w&&b.current&&(w.disconnect(),h.current=!1,w.observe(b.current))},[b,w]),(0,m.useEffect)(()=>(o({type:l.RegisterDroppable,element:{id:n,key:i,disabled:r,node:b,rect:p,data:N}}),()=>o({type:l.UnregisterDroppable,key:i,id:n})),[n]),(0,m.useEffect)(()=>{r!==u.current.disabled&&(o({type:l.SetDroppableDisabled,id:n,key:i,disabled:r}),u.current.disabled=r)},[n,i,r,o]),{active:s,rect:p,isOver:(null==c?void 0:c.id)===n,node:b,over:c,setNodeRef:j}}function tg(e){let{animation:t,children:r}=e,[n,l]=(0,m.useState)(null),[a,i]=(0,m.useState)(null),s=V(r);return r||n||!s||l(s),W(()=>{if(!a)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;if(null==e||null==r)return void l(null);Promise.resolve(t(r,a)).then(()=>{l(null)})},[t,n,a]),g().createElement(g().Fragment,null,r,n?(0,m.cloneElement)(n,{ref:i}):null)}let tx={x:0,y:0,scaleX:1,scaleY:1};function tv(e){let{children:t}=e;return g().createElement(tl.Provider,{value:tn},g().createElement(td.Provider,{value:tx},t))}let ty={position:"fixed",touchAction:"none"},tw=e=>ee(e)?"transform 250ms ease":void 0,tb=(0,m.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:l,children:a,className:i,rect:s,style:o,transform:c,transition:d=tw}=e;if(!s)return null;let u=l?c:{...c,scaleX:1,scaleY:1},h={...ty,width:s.width,height:s.height,top:s.top,left:s.left,transform:er.Transform.toString(u),transformOrigin:l&&n?function(e,t){let r=et(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,s):void 0,transition:"function"==typeof d?d(n):d,...o};return g().createElement(r,{className:i,style:h,ref:t},a)}),tj={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:er.Transform.toString(t)},{transform:er.Transform.toString(r)}]},sideEffects:(n={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:r}=e,l={},{styles:a,className:i}=n;if(null!=a&&a.active)for(let[e,r]of Object.entries(a.active))void 0!==r&&(l[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,r));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=i&&i.active&&t.node.classList.add(i.active),null!=i&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(let[e,r]of Object.entries(l))t.node.style.setProperty(e,r);null!=i&&i.active&&t.node.classList.remove(i.active)}})},tN=0,tC=g().memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:l,transition:a,modifiers:i,wrapperElement:s="div",className:o,zIndex:c=999}=e,{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:p,draggableNodes:f,droppableContainers:x,dragOverlay:v,over:y,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:j,windowRect:N}=(0,m.useContext)(ta),C=(0,m.useContext)(td),D=function(e){return(0,m.useMemo)(()=>{if(null!=e)return++tN},[e])}(null==u?void 0:u.id),E=tc(i,{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:y,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:j,transform:C,windowRect:N}),A=eQ(h),S=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:l}=e;return Y((e,a)=>{if(null===t)return;let i=r.get(e);if(!i)return;let s=i.node.current;if(!s)return;let o=e9(a);if(!o)return;let{transform:c}=z(a).getComputedStyle(a),d=ev(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:l}={...tj,...e};return e=>{let{active:a,dragOverlay:i,transform:s,...o}=e;if(!t)return;let c={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},d={scaleX:1!==s.scaleX?a.rect.width*s.scaleX/i.rect.width:1,scaleY:1!==s.scaleY?a.rect.height*s.scaleY/i.rect.height:1},u={x:s.x-c.x,y:s.y-c.y,...d},h=l({...o,active:a,dragOverlay:i,transform:{initial:s,final:u}}),[p]=h,f=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(f))return;let m=null==n?void 0:n({active:a,dragOverlay:i,...o}),g=i.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return eP(s,l.draggable.measure),u({active:{id:e,data:i.data,node:s,rect:l.draggable.measure(s)},draggableNodes:r,dragOverlay:{node:a,rect:l.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:l,transform:d})})}({config:n,draggableNodes:f,droppableContainers:x,measuringConfiguration:w}),k=A?v.setRef:void 0;return g().createElement(tv,null,g().createElement(tg,{animation:S},u&&D?g().createElement(tb,{key:D,id:u.id,ref:k,as:s,activatorEvent:d,adjustScale:t,className:o,transition:a,rect:A,style:{zIndex:c,...l},transform:E},r):null))});var tD=r(53125),tE=r(23562),tA=r(86632),tS=r(18780),tk=r(79396),tM=r(48104),tR=r(8487);let tP=(0,r(48946).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tT({className:e,variant:t,...r}){return(0,f.jsx)("div",{className:(0,T.cn)(tP({variant:t}),e),...r})}var tO=r(6475);let tL=(0,tO.createServerReference)("40c3d011e50991b9caaf6c4277aa4c5a9f92dd46dd",tO.callServer,void 0,tO.findSourceMapURL,"evolvePlantAction");var tq=r(63102),tG=r(46982);function tz(e){let t=new Date,r=new Date(e);return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function t$(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden rounded-lg",children:(0,f.jsx)("div",{className:"absolute -top-1/2 w-1/12 h-[200%] bg-white/30 animate-sheen"})})}function tI(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:10}).map((e,t)=>(0,f.jsx)(w.A,{className:"absolute animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,color:`hsl(${360*Math.random()}, 100%, 70%)`,width:`${5+5*Math.random()}px`,height:`${5+5*Math.random()}px`}},t))})}function tF(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:7}).map((e,t)=>(0,f.jsx)(w.A,{className:"absolute text-red-500 animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,width:`${8+8*Math.random()}px`,height:`${8+8*Math.random()}px`}},t))})}function tU(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:7}).map((e,t)=>(0,f.jsx)(w.A,{className:"absolute text-yellow-300 animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,width:`${5+5*Math.random()}px`,height:`${5+5*Math.random()}px`}},t))})}function tW(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:Array.from({length:5}).map((e,t)=>(0,f.jsx)(j,{className:"absolute text-blue-400 animate-water-drop",style:{left:`${100*Math.random()}%`,animationDelay:`${.5*Math.random()}s`,animationDuration:`${.5+.5*Math.random()}s`,width:`${16+16*Math.random()}px`,height:`${16+16*Math.random()}px`}},t))})}function tY(){return(0,f.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:Array.from({length:3}).map((e,t)=>(0,f.jsx)(N.A,{className:"absolute text-yellow-400 animate-float-up",style:{left:`${20+60*Math.random()}%`,bottom:"20px",animationDelay:`${.5*Math.random()}s`,animationDuration:`${1+.5*Math.random()}s`,width:`${20+12*Math.random()}px`,height:`${20+12*Math.random()}px`}},t))})}function tB({plant:e,open:t,onOpenChange:r,onAddToEvolutionQueue:n,userId:l}){let{playSfx:a}=(0,tA.n)(),{toast:i}=(0,P.dj)(),{gameData:s}=(0,tS.A)(),[o,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),[h,p]=(0,m.useState)(e?.xp||0),[g,v]=(0,m.useState)(!1),[b,S]=(0,m.useState)(!1),[k,M]=(0,m.useState)(!1);if(!e||!s)return null;let T=e.lastWatered?.filter(tz).length??0,O=T<4,L=b?`Base: ${e.name}`:e.name,q=b?e.baseImage:e.image,G=async()=>{if(e&&!(s.waterRefillCount<=0)){M(!0);try{await (0,tk.LS)(l,e.id),a("chime"),i({title:"Water Refilled!",description:`${e.name} is ready for more water.`})}catch(e){i({variant:"destructive",title:"Error",description:e.message})}finally{M(!1)}}},z=async()=>{if(!O||!e)return;c(!0),a("watering"),u(!0);let t=e.xp+200,s=e.level,o=!1;t>=1e3?(p(1e3),await new Promise(e=>setTimeout(e,500)),s+=1,t-=1e3,p(0),await new Promise(e=>setTimeout(e,50)),p(t),s>=10&&"Base"===e.form?o=!0:(a("reward"),i({title:"Level Up!",description:`${e.name} has reached level ${s}!`}))):p(t);let d=Date.now(),h=[...e.lastWatered||[],d];try{await (0,tk.Z8)(l,e.id,{xp:t,level:s,lastWatered:h}),await (0,tk.B2)(l,5),"Evolved"===e.form?await (0,tG.fF)(l):await (0,tG.w6)(l),o&&(n(e.id),r(!1))}catch(e){console.error("Failed to update plant or gold",e),i({variant:"destructive",title:"Error",description:"Could not save watering progress."})}setTimeout(()=>c(!1),1200),setTimeout(()=>u(!1),1e3)},$=async()=>{if(e){v(!0);try{await (0,tk.pv)(l,e.id),i({title:"Plant Deleted",description:`${e.name} has been removed from your collection.`}),r(!1)}catch(e){console.error("Failed to delete plant",e),i({variant:"destructive",title:"Error",description:"Could not delete the plant."})}finally{v(!1)}}};return(0,f.jsx)(y.lG,{open:t,onOpenChange:r,children:(0,f.jsxs)(y.Cf,{className:"max-w-sm",children:[(0,f.jsxs)(y.c7,{children:[(0,f.jsx)(y.L3,{className:"text-3xl text-center text-primary",children:L}),(0,f.jsxs)("div",{className:"flex flex-row items-center justify-center pt-2 gap-2",children:[e.baseImage&&(0,f.jsxs)(x.$,{variant:"outline",size:"sm",className:"text-xs h-7 px-2",onClick:()=>S(e=>!e),children:[(0,f.jsx)(w.A,{className:"mr-1 h-3 w-3"}),b?"View Evolved":"View Base Form"]}),(0,f.jsxs)(tM.Lt,{children:[(0,f.jsx)(tM.tv,{asChild:!0,children:(0,f.jsxs)(x.$,{variant:"outline",size:"sm",className:"border-destructive text-destructive hover:bg-destructive/10 hover:text-destructive text-xs h-7 px-2",children:[(0,f.jsx)(C,{className:"mr-1 h-3 w-3"}),"Delete Plant"]})}),(0,f.jsxs)(tM.EO,{children:[(0,f.jsxs)(tM.wd,{children:[(0,f.jsx)(tM.r7,{children:"Are you sure?"}),(0,f.jsxs)(tM.$v,{children:["This will permanently delete ",e.name," from your collection. This action cannot be undone."]})]}),(0,f.jsxs)(tM.ck,{children:[(0,f.jsx)(tM.Zr,{disabled:g,children:"Cancel"}),(0,f.jsx)(tM.Rx,{onClick:$,disabled:g,className:"bg-destructive hover:bg-destructive/90",children:g?(0,f.jsx)(D.A,{className:"animate-spin"}):"Yes, delete it"})]})]})]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col items-center gap-4 pt-4",children:[(0,f.jsxs)("div",{className:"w-64 h-64 relative",children:[(0,f.jsx)("div",{className:"rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100 flex items-center justify-center h-full",children:q&&"placeholder"!==q?(0,f.jsx)(R.default,{src:q,alt:e.name,width:256,height:256,className:"object-cover w-full h-full","data-ai-hint":e.hint}):(0,f.jsx)(E.A,{className:"w-24 h-24 text-muted-foreground/50"})}),e.hasGlitter&&!b&&(0,f.jsx)(tU,{}),e.hasRedGlitter&&!b&&(0,f.jsx)(tF,{}),e.hasSheen&&!b&&(0,f.jsx)(t$,{}),e.hasRainbowGlitter&&!b&&(0,f.jsx)(tI,{}),o&&(0,f.jsx)(tW,{}),o&&(0,f.jsx)(tY,{}),d&&(0,f.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-1 bg-yellow-400/80 text-white font-bold px-3 py-1 rounded-full shadow-lg animate-fade-out-fast pointer-events-none",children:[(0,f.jsx)(N.A,{className:"w-5 h-5"}),(0,f.jsxs)("span",{children:["+",5]})]})]}),(0,f.jsx)("p",{className:"text-muted-foreground text-center mt-2 px-4",children:e.description}),(0,f.jsxs)("div",{className:"w-full px-4 space-y-2",children:[(0,f.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,f.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["Level ",e.level]}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:[h," / ",1e3," XP"]})]}),(0,f.jsx)(tE.k,{value:h/1e3*100,className:"w-full"})]})]}),(0,f.jsxs)(y.Es,{className:"pt-2 flex-col sm:flex-col sm:space-x-0 gap-2",children:[(0,f.jsxs)(x.$,{onClick:z,disabled:!O||o||b,className:"w-full bg-blue-500 hover:bg-blue-600",children:[(0,f.jsx)(j,{className:"mr-2 h-4 w-4"}),o?"Watering...":`Water Plant (${T}/4)`]}),!O&&s.waterRefillCount>0&&(0,f.jsx)(x.$,{onClick:G,disabled:k||b,className:"w-full",variant:"secondary",children:k?(0,f.jsx)(D.A,{className:"animate-spin"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(A.A,{className:"mr-2 h-4 w-4"})," Use Refill (",s.waterRefillCount,")"]})})]})]})})}function t_({plant:e,open:t,onOpenChange:r}){return e?(0,f.jsx)(y.lG,{open:t,onOpenChange:r,children:(0,f.jsxs)(y.Cf,{className:"max-w-sm",children:[(0,f.jsx)(y.c7,{children:(0,f.jsx)(y.L3,{className:"text-3xl text-center text-primary",children:"A new plant!"})}),(0,f.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,f.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,f.jsx)(R.default,{src:e.imageDataUri,alt:e.name,width:256,height:256,className:"object-cover w-full h-full"})}),(0,f.jsx)("h3",{className:"text-2xl font-semibold text-primary",children:e.name}),(0,f.jsx)("p",{className:"text-muted-foreground text-center",children:e.description})]}),(0,f.jsx)(y.Es,{children:(0,f.jsx)(y.HM,{asChild:!0,children:(0,f.jsx)(x.$,{className:"w-full text-lg",children:"Collect"})})})]})}):null}function tX({plant:e,image:t,canWater:r}){return(0,f.jsxs)("div",{className:(0,T.cn)("flex flex-col items-center text-center pointer-events-none w-full h-full rounded-lg",r&&"animate-glow"),children:[(0,f.jsxs)("div",{className:"relative h-20 w-20 flex items-center justify-center",children:[t&&"placeholder"!==t?(0,f.jsx)(R.default,{src:t,alt:e.name,fill:!0,sizes:"80px",className:"object-contain","data-ai-hint":e.hint}):(0,f.jsx)("div",{className:"w-full h-full flex items-center justify-center rounded-lg bg-muted/20",children:(0,f.jsx)(E.A,{className:"w-12 h-12 text-muted-foreground/50"})}),e.hasGlitter&&(0,f.jsx)(tU,{}),e.hasRedGlitter&&(0,f.jsx)(tF,{}),e.hasSheen&&(0,f.jsx)(t$,{}),e.hasRainbowGlitter&&(0,f.jsx)(tI,{})]}),(0,f.jsx)("p",{className:"mt-1 text-xs font-semibold text-primary truncate w-full",children:e.name})]})}function tV({plant:e,canWater:t,onApplyGlitter:r,canApplyGlitter:n,onApplySheen:l,canApplySheen:a,onApplyRainbowGlitter:i,canApplyRainbowGlitter:s,onApplyRedGlitter:o,canApplyRedGlitter:c}){let d=e.hasGlitter||e.hasSheen||e.hasRainbowGlitter||e.hasRedGlitter;return(0,f.jsxs)(v.Zp,{className:(0,T.cn)("group overflow-hidden shadow-md w-full relative",t&&"animate-glow"),children:[(0,f.jsxs)("div",{className:"absolute top-1 left-1 z-10 flex flex-col gap-1",children:[n&&!d&&(0,f.jsx)(x.$,{size:"icon",className:"h-7 w-7 bg-yellow-400/80 text-white hover:bg-yellow-500/90",onClick:()=>r(e.id),onPointerDown:e=>e.stopPropagation(),children:(0,f.jsx)(w.A,{className:"h-4 w-4"})}),a&&!d&&(0,f.jsx)(x.$,{size:"icon",className:"h-7 w-7 bg-blue-400/80 text-white hover:bg-blue-500/90",onClick:()=>l(e.id),onPointerDown:e=>e.stopPropagation(),children:(0,f.jsx)(S.A,{className:"h-4 w-4"})}),s&&!d&&(0,f.jsx)(x.$,{size:"icon",className:"h-7 w-7 bg-gradient-to-r from-pink-500 to-yellow-500 text-white",onClick:()=>i(e.id),onPointerDown:e=>e.stopPropagation(),children:(0,f.jsx)(w.A,{className:"h-4 w-4"})}),c&&!d&&(0,f.jsx)(x.$,{size:"icon",className:"h-7 w-7 bg-red-500/80 text-white hover:bg-red-600/90",onClick:()=>o(e.id),onPointerDown:e=>e.stopPropagation(),children:(0,f.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,f.jsxs)(v.Wu,{className:"p-0",children:[(0,f.jsxs)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:["placeholder"!==e.image?(0,f.jsx)(R.default,{src:e.image,alt:e.name,fill:!0,sizes:"100px",className:"object-cover","data-ai-hint":e.hint}):(0,f.jsx)(E.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"}),e.hasGlitter&&(0,f.jsx)(tU,{}),e.hasRedGlitter&&(0,f.jsx)(tF,{}),e.hasSheen&&(0,f.jsx)(t$,{}),e.hasRainbowGlitter&&(0,f.jsx)(tI,{}),"Evolved"===e.form&&(0,f.jsxs)(tT,{variant:"secondary",className:"absolute top-2 right-2 shadow-md",children:[(0,f.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Evolved"]})]}),(0,f.jsxs)("div",{className:"p-2 text-center bg-white/50 space-y-1",children:[(0,f.jsx)("p",{className:"text-sm font-semibold text-primary truncate",children:e.name}),(0,f.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Lvl ",e.level]}),(0,f.jsx)(tE.k,{value:e.xp/1e3*100,className:"h-1.5"})]})]})]})}function tK({plant:e,source:t,canWater:r,onApplyGlitter:n,canApplyGlitter:l,onApplySheen:a,canApplySheen:i,onApplyRainbowGlitter:s,canApplyRainbowGlitter:o,onApplyRedGlitter:c,canApplyRedGlitter:d,...u}){let{attributes:h,listeners:p,setNodeRef:g,isDragging:x}=function(e){let{id:t,data:r,disabled:n=!1,attributes:l}=e,a=H("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,m.useContext)(tl),{role:p=tp,roleDescription:f="draggable",tabIndex:g=0}=null!=l?l:{},x=(null==o?void 0:o.id)===t,v=(0,m.useContext)(x?td:th),[y,w]=X(),[b,j]=X(),N=(0,m.useMemo)(()=>i.reduce((e,r)=>{let{eventName:n,handler:l}=r;return e[n]=e=>{l(e,t)},e},{}),[i,t]),C=B(r);return W(()=>(u.set(t,{id:t,key:a,node:y,activatorNode:b,data:C}),()=>{let e=u.get(t);e&&e.key===a&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:c,attributes:(0,m.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":n,"aria-pressed":!!x&&p===tp||void 0,"aria-roledescription":f,"aria-describedby":d.draggable}),[n,p,g,x,f,d.draggable]),isDragging:x,listeners:n?void 0:N,node:y,over:h,setNodeRef:w,setActivatorNodeRef:j,transform:v}}({id:`${t}:${e.id}`,data:{plant:e,source:t}});return(0,f.jsx)("div",{ref:g,style:{opacity:x?.4:1,touchAction:"none"},...p,...h,...u,children:"collection"===t?(0,f.jsx)(tV,{plant:e,canWater:r,onApplyGlitter:n,canApplyGlitter:l,onApplySheen:a,canApplySheen:i,onApplyRainbowGlitter:s,canApplyRainbowGlitter:o,onApplyRedGlitter:c,canApplyRedGlitter:d}):(0,f.jsx)(tX,{plant:e,image:e.image,canWater:r})})}function tH({plant:e,index:t,onClickPlant:r,processedImage:n,canWater:l}){let{setNodeRef:a,isOver:i}=tm({id:`pot:${t}`}),s=(0,m.useRef)([0,0]);return e?(0,f.jsxs)("div",{className:"relative flex h-24 w-24 items-end justify-center",onPointerDown:e=>{s.current=[e.clientX,e.clientY]},onPointerUp:t=>{if(!e)return;let[n,l]=s.current;5>Math.sqrt(Math.pow(t.clientX-n,2)+Math.pow(t.clientY-l,2))&&r(e)},children:[(0,f.jsx)(tK,{plant:{...e,image:n||e.image},source:"desk",canWater:l,onApplyGlitter:()=>{},canApplyGlitter:!1,onApplySheen:()=>{},canApplySheen:!1,onApplyRainbowGlitter:()=>{},canApplyRainbowGlitter:!1,onApplyRedGlitter:()=>{},canApplyRedGlitter:!1,className:"cursor-grab active:cursor-grabbing w-full h-full z-10"}),(0,f.jsx)("div",{ref:a,className:(0,T.cn)("absolute inset-0 z-0",i&&"bg-primary/20 rounded-lg")})]}):(0,f.jsx)(()=>(0,f.jsx)("div",{ref:a,className:(0,T.cn)("relative flex h-24 w-24 items-end justify-center rounded-lg transition-colors",i?"bg-primary/20":"bg-transparent"),children:(0,f.jsx)("div",{className:"flex h-20 w-20 flex-col items-center justify-center gap-1 rounded-lg border-2 border-dashed border-primary/30"})}),{})}function tZ({plant:e,open:t,onOpenChange:r,onDelete:n,onToggleShowcase:l,isPlantInShowcase:a,canAddToShowcase:i}){return e?(0,f.jsx)(y.lG,{open:t,onOpenChange:r,children:(0,f.jsxs)(y.Cf,{className:"max-w-sm",children:[(0,f.jsxs)(y.c7,{children:[(0,f.jsx)(y.L3,{className:"text-2xl text-center",children:e.name}),(0,f.jsx)(y.rr,{className:"text-center",children:"Select an action for your plant."})]}),(0,f.jsxs)("div",{className:"flex flex-col gap-3 py-4",children:[(0,f.jsxs)(x.$,{onClick:()=>{l(e.id),r(!1)},disabled:!a&&!i,children:[(0,f.jsx)(S.A,{className:"mr-2 h-4 w-4"}),a?"Remove from Showcase":"Add to Showcase"]}),(0,f.jsxs)(tM.Lt,{children:[(0,f.jsx)(tM.tv,{asChild:!0,children:(0,f.jsxs)(x.$,{variant:"destructive",children:[(0,f.jsx)(C,{className:"mr-2 h-4 w-4"}),"Delete Plant"]})}),(0,f.jsxs)(tM.EO,{children:[(0,f.jsxs)(tM.wd,{children:[(0,f.jsx)(tM.r7,{children:"Are you sure?"}),(0,f.jsxs)(tM.$v,{children:["This will permanently delete ",e.name," from your collection. This action cannot be undone."]})]}),(0,f.jsxs)(tM.ck,{children:[(0,f.jsx)(tM.Zr,{children:"Cancel"}),(0,f.jsx)(tM.Rx,{onClick:()=>{n(e.id),r(!1)},className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete it"})]})]})]})]})]})}):null}function tJ({open:e,onOpenChange:t}){return(0,f.jsx)(y.lG,{open:e,onOpenChange:t,children:(0,f.jsxs)(y.Cf,{className:"max-w-sm",children:[(0,f.jsxs)(y.c7,{children:[(0,f.jsx)("div",{className:"mx-auto bg-accent rounded-full p-3 mb-2",children:(0,f.jsx)(k,{className:"h-8 w-8 text-accent-foreground"})}),(0,f.jsx)(y.L3,{className:"text-2xl text-center",children:"New Feature: Quick Actions"}),(0,f.jsx)(y.rr,{className:"text-center pt-2",children:"Long-press on a plant in your collection to quickly add it to your showcase or delete it."})]}),(0,f.jsx)(y.Es,{children:(0,f.jsx)(y.HM,{asChild:!0,children:(0,f.jsx)(x.$,{children:"Got it!"})})})]})})}function tQ(){let{user:e,gameData:t,plantsToEvolveQueue:r,setPlantsToEvolveQueue:n}=(0,tS.A)(),{toast:l}=(0,P.dj)(),{playSfx:a}=(0,tA.n)(),[i,s]=(0,m.useState)([,,,].fill(null)),[o,c]=(0,m.useState)([]),[d,u]=(0,m.useState)(!1),[h,p]=(0,m.useState)(!1),[g,y]=(0,m.useState)(null),[b,N]=(0,m.useState)(null),[C,A]=(0,m.useState)(null),[k,T]=(0,m.useState)(null),[O,L]=(0,m.useState)(!1),[q,G]=(0,m.useState)({}),[z,$]=(0,m.useState)(null),I=(0,m.useRef)(null),[F,U]=(0,m.useState)(!1),W=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(eh(e_,{activationConstraint:{distance:8}}),eh(eH,{activationConstraint:{delay:100,tolerance:5}})),Y=(0,m.useMemo)(()=>t?.plants||{},[t]),B=(0,m.useMemo)(()=>i.map(e=>e?Y[e]:null),[i,Y]),_=(0,m.useMemo)(()=>o.map(e=>Y[e]).filter(Boolean),[o,Y]),X=(0,m.useMemo)(()=>k&&Y[k]?.name||"",[k,Y]),V=(0,m.useMemo)(()=>{if(!C)return null;let[e,t]=C.split(":"),r=Y[parseInt(t,10)],n=r?.image;return"desk"===e&&r&&q[r.id]&&(n=q[r.id]??r.image),r?{plant:r,source:e,image:n}:null},[C,Y,q]),K=async()=>{if(!e||!t||t.draws<=0)return void l({variant:"destructive",title:"No Draws Left",description:"Visit the shop to get more draws or wait for your daily refill."});u(!0);try{await (0,tD.iF)(e.uid);let r=t.plants?Object.values(t.plants).map(e=>e.name):[],n=await (0,tq.G)(r),l=await (0,tR.w)(n.imageDataUri);a("success"),y({...n,imageDataUri:l})}catch(t){console.error(t),await (0,tD.tM)(e.uid),"Invalid API Key"===t.message?l({variant:"destructive",title:"Invalid API Key",description:"Please check your GOOGLE_API_KEY. Your draw has been refunded."}):l({variant:"destructive",title:"Failed to draw a plant",description:"There was an issue with the AI. Your draw has been refunded."})}finally{u(!1)}},H=async()=>{if(g&&e){try{let t=JSON.parse(JSON.stringify(g));await (0,tk.VS)(e.uid,t),await (0,tG.JD)(e.uid)}catch(e){console.error("Failed to save plant to Firestore",e),l({variant:"destructive",title:"Storage Error",description:"Could not save your new plant."})}y(null)}},Z=async()=>{if(e&&t){p(!0);try{let t=await (0,tk.U3)(e.uid);t.plantsWatered>0?(a("reward"),l({title:"Plants Watered!",description:`Watered ${t.plantsWatered} plant(s) and gained ${t.goldGained} gold.`}),t.newlyEvolvablePlants.length>0&&n(e=>[...e,...t.newlyEvolvablePlants])):l({title:"All Set!",description:"All your plants are already watered for the day."})}catch(e){console.error("Failed to use sprinkler",e),l({variant:"destructive",title:"Error",description:e.message||"Could not use sprinkler."})}finally{p(!1)}}},J=async t=>{if(A(null),a("tap"),!e)return;let{active:r,over:n}=t;if(!n||!r.data.current?.plant)return;let l=r.data.current.plant,[d]=r.id.split(":"),[u,h]=n.id.split(":"),p=[...i],f=[...o];if("collection"===d){if("pot"===u){let e=parseInt(h,10),t=p[e];p[e]=l.id,f=f.filter(e=>e!==l.id),t&&f.push(t)}}else if("desk"===d){let e=p.findIndex(e=>e===l.id);if(-1===e)return;if("pot"===u){let t=parseInt(h,10),r=p[t];p[t]=l.id,p[e]=r}else"collection"===u&&(p[e]=null,f.includes(l.id)||f.push(l.id))}let m=f.sort((e,t)=>e-t);s(p),c(m),await (0,tk.hj)(e.uid,m,p)},Q=()=>{L(!1),T(null),n(e=>e.slice(1))},ee=async()=>{if(k&&e){L(!0);try{let t=await (0,tk.uq)(e.uid,k);if(!t)throw Error("Plant not found for evolution.");let{newImageDataUri:r}=await tL({name:t.name,imageDataUri:t.image}),n=await (0,tR.w)(r);await (0,tk.Z8)(e.uid,k,{image:n,baseImage:t.image,form:"Evolved"}),await (0,tG.Gx)(e.uid),a("success"),l({title:"Evolution Complete!",description:`${t.name} has evolved!`})}catch(e){console.error("Evolution failed",e),l({variant:"destructive",title:"Evolution Failed",description:"Could not evolve your plant. Please try again."})}finally{Q()}}},et=async t=>{if(e)try{await (0,tk.vV)(e.uid),await (0,tk.Z8)(e.uid,t,{hasGlitter:!0}),await (0,tG.Gz)(e.uid),a("chime"),l({title:"Sparkly!",description:"Your plant is now shimmering."})}catch(e){console.error("Failed to apply glitter",e),l({variant:"destructive",title:"Error",description:e.message||"Could not apply glitter."})}},er=async t=>{if(e)try{await (0,tk.Zk)(e.uid),await (0,tk.Z8)(e.uid,t,{hasSheen:!0}),a("chime"),l({title:"Sheen applied!",description:"Your plant is now shimmering beautifully."})}catch(e){console.error("Failed to apply sheen",e),l({variant:"destructive",title:"Error",description:e.message||"Could not apply sheen."})}},en=async t=>{if(e)try{await (0,tk.F$)(e.uid),await (0,tk.Z8)(e.uid,t,{hasRainbowGlitter:!0}),a("chime"),l({title:"Rainbow Glitter applied!",description:"Your plant is sparkling with all the colors."})}catch(e){console.error("Failed to apply rainbow glitter",e),l({variant:"destructive",title:"Error",description:e.message||"Could not apply rainbow glitter."})}},el=async t=>{if(e)try{await (0,tk.uM)(e.uid),await (0,tk.Z8)(e.uid,t,{hasRedGlitter:!0}),a("chime"),l({title:"Red Glitter applied!",description:"Your plant is sparkling with a fiery red."})}catch(e){console.error("Failed to apply red glitter",e),l({variant:"destructive",title:"Error",description:e.message||"Could not apply red glitter."})}},ea=e=>{I.current=setTimeout(()=>{$(e)},500)},ei=e=>{I.current&&(clearTimeout(I.current),I.current=null,z||N(Y[e.id]))},es=()=>{I.current&&(clearTimeout(I.current),I.current=null)},eo=async t=>{if(e)try{await (0,tk.pv)(e.uid,t),l({title:"Plant Deleted",description:"The plant has been removed from your collection."})}catch(e){l({variant:"destructive",title:"Error",description:"Could not delete the plant."})}},ec=async r=>{let n;if(!e||!t)return;let a=t.showcasePlantIds||[],i="";if(a.includes(r))n=a.filter(e=>e!==r),i="Plant removed from your showcase.";else{if(a.length>=5)return void l({variant:"destructive",title:"Showcase Full",description:"You can only select up to 5 plants."});n=[...a,r],i="Plant added to your showcase!"}try{await (0,tk.zw)(e.uid,n),l({title:"Showcase Updated",description:i})}catch(e){l({variant:"destructive",title:"Error",description:"Could not update your showcase."})}};if(!e||!t)return(0,f.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-white",children:(0,f.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})});let ed=t.showcasePlantIds||[],eu=!!(z&&ed.includes(z.id)),ep=ed.length<5;return(0,f.jsx)(tu,{sensors:W,onDragStart:e=>{a("pickup"),I.current&&(clearTimeout(I.current),I.current=null),A(e.active.id)},onDragEnd:J,onDragCancel:()=>A(null),children:(0,f.jsxs)("div",{className:"space-y-4 bg-white min-h-screen",children:[(0,f.jsxs)("header",{className:"flex flex-col items-center gap-4 p-4 text-center",children:[(0,f.jsx)("h1",{className:"text-3xl text-primary text-center",children:"My Room"}),(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-yellow-100/80 px-2 py-0.5 border border-yellow-300/80",children:[(0,f.jsx)(w.A,{className:"h-4 w-4 text-yellow-500"}),(0,f.jsx)("span",{className:"font-bold text-sm text-yellow-700",children:t.glitterCount})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-blue-100/80 px-2 py-0.5 border border-blue-300/80",children:[(0,f.jsx)(S.A,{className:"h-4 w-4 text-blue-500"}),(0,f.jsx)("span",{className:"font-bold text-sm text-blue-700",children:t.sheenCount})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-pink-100/80 px-2 py-0.5 border border-pink-300/80",children:[(0,f.jsx)(w.A,{className:"h-4 w-4 text-pink-500"}),(0,f.jsx)("span",{className:"font-bold text-sm text-pink-700",children:t.rainbowGlitterCount})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-red-100/80 px-2 py-0.5 border border-red-300/80",children:[(0,f.jsx)(w.A,{className:"h-4 w-4 text-red-500"}),(0,f.jsx)("span",{className:"font-bold text-sm text-red-700",children:t.redGlitterCount})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-green-100/80 px-2 py-0.5 border border-green-300/80",children:[(0,f.jsx)(j,{className:"h-4 w-4 text-green-500"}),(0,f.jsx)("span",{className:"font-bold text-sm text-green-700",children:t.waterRefillCount})]})]})]}),(0,f.jsx)("section",{className:"px-4",children:(0,f.jsxs)("div",{className:"relative h-48 rounded-lg border-2 border-primary/20 bg-card/80 p-6 overflow-hidden",children:[(0,f.jsx)(R.default,{src:"/desk.jpg",alt:"A wooden desk for plants",fill:!0,className:"z-0 object-cover","data-ai-hint":"desk wood",sizes:"100vw",priority:!0}),(0,f.jsx)("div",{className:"relative z-10 flex h-full items-end justify-around",children:B.map((e,t)=>{let r=!!e&&(e.lastWatered?.filter(tz).length??0)<4;return(0,f.jsx)(tH,{plant:e,index:t,onClickPlant:e=>N(Y[e.id]),processedImage:e?q[e.id]:null,canWater:r},e?.id||`pot-${t}`)})})]})}),(0,f.jsx)("section",{className:"px-4 flex justify-center",children:(0,f.jsx)(x.$,{className:"font-semibold w-full max-w-xs",onClick:K,disabled:d||t.draws<=0,children:d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Drawing..."]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Draw Plant (",t.draws," left)"]})})}),(0,f.jsx)("section",{className:"px-4 pb-4",children:(0,f.jsxs)(v.Zp,{className:"p-4",children:[(0,f.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,f.jsx)("h2",{className:"text-xl text-primary",children:"My Collection"}),t.sprinklerUnlocked&&(0,f.jsx)("div",{className:"pb-4",children:(0,f.jsxs)(x.$,{onClick:Z,disabled:h,children:[(0,f.jsx)(M.A,{className:"mr-2 h-4 w-4"}),h?"Watering...":"Use Sprinkler"]})})]}),(0,f.jsx)(t0,{children:(0,f.jsx)("div",{className:"grid grid-cols-3 gap-4 sm:grid-cols-4 md:grid-cols-5",children:_.length>0?_.map(e=>{let r=(e.lastWatered?.filter(tz).length??0)<4;return(0,f.jsx)("div",{onPointerDown:()=>ea(e),onPointerUp:()=>ei(e),onPointerLeave:es,children:(0,f.jsx)(tK,{plant:e,source:"collection",canWater:r,onApplyGlitter:et,canApplyGlitter:t.glitterCount>0,onApplySheen:er,canApplySheen:t.sheenCount>0,onApplyRainbowGlitter:en,canApplyRainbowGlitter:t.rainbowGlitterCount>0,onApplyRedGlitter:el,canApplyRedGlitter:t.redGlitterCount>0,className:"cursor-grab active:cursor-grabbing"})},e.id)}):(0,f.jsx)("div",{className:"col-span-3 text-center text-muted-foreground py-8",children:"Your collection is empty. Go to the Home screen to draw a new plant!"})})})]})}),(0,f.jsx)(tB,{plant:b?Y[b.id]:null,open:!!b,onOpenChange:e=>!e&&N(null),onAddToEvolutionQueue:e=>n(t=>[...t,e]),userId:e.uid}),(0,f.jsx)(tZ,{plant:z,open:!!z,onOpenChange:e=>{e||$(null)},onDelete:eo,onToggleShowcase:ec,isPlantInShowcase:eu,canAddToShowcase:ep}),(0,f.jsx)(t_,{plant:g,open:!!g,onOpenChange:e=>{e||H()}}),(0,f.jsx)(tJ,{open:F,onOpenChange:e=>{e||(localStorage.setItem("hasSeenLongPressInfo","true"),U(!1))}}),(0,f.jsx)(tM.Lt,{open:!!k||O,onOpenChange:e=>!e&&!O&&Q(),children:(0,f.jsxs)(tM.EO,{children:[(0,f.jsxs)(tM.wd,{children:[(0,f.jsx)(tM.r7,{className:"text-center text-primary",children:O?"Evolving...":"Your plant is growing!"}),(0,f.jsx)(tM.$v,{children:O?"Please wait a moment.":`${X} is ready for a new form! Would you like to evolve it?`})]}),O&&(0,f.jsx)("div",{className:"flex justify-center p-4",children:(0,f.jsx)(D.A,{className:"w-12 h-12 text-primary animate-spin"})}),(0,f.jsxs)(tM.ck,{children:[(0,f.jsx)(tM.Zr,{onClick:Q,disabled:O,children:"Later"}),(0,f.jsx)(tM.Rx,{onClick:ee,disabled:O,children:O?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"})," Evolving..."]}):"Evolve"})]})]})}),(0,f.jsx)(tC,{children:V?(0,f.jsx)("div",{className:"w-28",children:"desk"===V.source?(0,f.jsx)(tX,{plant:V.plant,image:V.image,canWater:!1}):(0,f.jsx)(tV,{plant:V.plant,canWater:!1,onApplyGlitter:()=>{},canApplyGlitter:!1,onApplySheen:()=>{},canApplySheen:!1,onApplyRainbowGlitter:()=>{},canApplyRainbowGlitter:!1,onApplyRedGlitter:()=>{},canApplyRedGlitter:!1})}):null})]})})}function t0({children:e}){let{isOver:t,setNodeRef:r}=tm({id:"collection:area"});return(0,f.jsx)("div",{ref:r,className:(0,T.cn)("rounded-lg border bg-muted/10 p-2 min-h-24",t&&"bg-primary/10 border-2 border-dashed border-primary/50"),children:e})}},21820:e=>{"use strict";e.exports=require("os")},24555:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},25883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(app)/room/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(app)/room/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32467:e=>{"use strict";e.exports=require("node:http2")},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37540:e=>{"use strict";e.exports=require("node:console")},37830:e=>{"use strict";e.exports=require("node:stream/web")},40219:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},41204:e=>{"use strict";e.exports=require("string_decoder")},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},44708:e=>{"use strict";e.exports=require("node:https")},48104:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>O,Rx:()=>U,Zr:()=>W,EO:()=>G,$v:()=>F,ck:()=>$,wd:()=>z,r7:()=>I,tv:()=>L});var n=r(60687),l=r(43210),a=r(49399),i=r(22889),s=r(91530),o=r(211);l.forwardRef((e,t)=>{let{children:r,...a}=e,i=l.Children.toArray(r),s=i.find(u);if(s){let e=s.props.children,r=i.map(t=>t!==s?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,n.jsx)(c,{...a,ref:t,children:l.isValidElement(e)?l.cloneElement(e,void 0,r):null})}return(0,n.jsx)(c,{...a,ref:t,children:r})}).displayName="Slot";var c=l.forwardRef((e,t)=>{let{children:r,...n}=e;if(l.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),a=function(e,t){let r={...t};for(let n in t){let l=e[n],a=t[n];/^on[A-Z]/.test(n)?l&&a?r[n]=(...e)=>{a(...e),l(...e)}:l&&(r[n]=l):"style"===n?r[n]={...l,...a}:"className"===n&&(r[n]=[l,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==l.Fragment&&(a.ref=t?(0,i.t)(t,e):e),l.cloneElement(r,a)}return l.Children.count(r)>1?l.Children.only(null):null});c.displayName="SlotClone";var d=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function u(e){return l.isValidElement(e)&&e.type===d}var h="AlertDialog",[p,f]=(0,a.A)(h,[s.Hs]),m=(0,s.Hs)(),g=e=>{let{__scopeAlertDialog:t,...r}=e,l=m(t);return(0,n.jsx)(s.bL,{...l,...r,modal:!0})};g.displayName=h;var x=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,a=m(r);return(0,n.jsx)(s.l9,{...a,...l,ref:t})});x.displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:t,...r}=e,l=m(t);return(0,n.jsx)(s.ZL,{...l,...r})};v.displayName="AlertDialogPortal";var y=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,a=m(r);return(0,n.jsx)(s.hJ,{...a,...l,ref:t})});y.displayName="AlertDialogOverlay";var w="AlertDialogContent",[b,j]=p(w),N=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:a,...c}=e,u=m(r),h=l.useRef(null),p=(0,i.s)(t,h),f=l.useRef(null);return(0,n.jsx)(s.G$,{contentName:w,titleName:C,docsSlug:"alert-dialog",children:(0,n.jsx)(b,{scope:r,cancelRef:f,children:(0,n.jsxs)(s.UC,{role:"alertdialog",...u,...c,ref:p,onOpenAutoFocus:(0,o.m)(c.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,n.jsx)(d,{children:a}),(0,n.jsx)(R,{contentRef:h})]})})})});N.displayName=w;var C="AlertDialogTitle",D=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,a=m(r);return(0,n.jsx)(s.hE,{...a,...l,ref:t})});D.displayName=C;var E="AlertDialogDescription",A=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,a=m(r);return(0,n.jsx)(s.VY,{...a,...l,ref:t})});A.displayName=E;var S=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,a=m(r);return(0,n.jsx)(s.bm,{...a,...l,ref:t})});S.displayName="AlertDialogAction";var k="AlertDialogCancel",M=l.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...l}=e,{cancelRef:a}=j(k,r),o=m(r),c=(0,i.s)(t,a);return(0,n.jsx)(s.bm,{...o,...l,ref:c})});M.displayName=k;var R=({contentRef:e})=>{let t=`\`${w}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${w}\` by passing a \`${E}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${w}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},P=r(4780),T=r(29523);let O=g,L=x,q=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(y,{className:(0,P.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));q.displayName=y.displayName;let G=l.forwardRef(({className:e,...t},r)=>(0,n.jsxs)(v,{children:[(0,n.jsx)(q,{}),(0,n.jsx)(N,{ref:r,className:(0,P.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));G.displayName=N.displayName;let z=({className:e,...t})=>(0,n.jsx)("div",{className:(0,P.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});z.displayName="AlertDialogHeader";let $=({className:e,...t})=>(0,n.jsx)("div",{className:(0,P.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$.displayName="AlertDialogFooter";let I=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(D,{ref:r,className:(0,P.cn)("text-lg font-semibold",e),...t}));I.displayName=D.displayName;let F=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(A,{ref:r,className:(0,P.cn)("text-sm text-muted-foreground",e),...t}));F.displayName=A.displayName;let U=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(S,{ref:r,className:(0,P.cn)((0,T.r)(),e),...t}));U.displayName=S.displayName;let W=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(M,{ref:r,className:(0,P.cn)((0,T.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));W.displayName=M.displayName},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},55044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var n=r(65239),l=r(48088),a=r(88170),i=r.n(a),s=r(30893),o={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let c={children:["",{children:["(app)",{children:["room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25883)),"/home/user/studio/src/app/(app)/room/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/user/studio/src/app/(app)/room/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/(app)/room/page",pathname:"/room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73429:e=>{"use strict";e.exports=require("node:util/types")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},76590:(e,t,r)=>{Promise.resolve().then(r.bind(r,21039))},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77368:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(82614).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,561,711,814,347,574,755,242,142],()=>r(55044));module.exports=n})();