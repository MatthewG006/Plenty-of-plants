(()=>{var e={};e.id=327,e.ids=[327],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},6854:(e,t,r)=>{Promise.resolve().then(r.bind(r,25883))},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},25883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(app)/room/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(app)/room/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},44708:e=>{"use strict";e.exports=require("node:https")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},53125:(e,t,r)=>{"use strict";r.d(t,{$k:()=>u,N9:()=>l,RY:()=>i,iF:()=>s,yk:()=>o});let n="plenty-of-plants-draws",i=2;function l(){try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);if("number"==typeof t.count&&"number"==typeof t.lastUpdated)return t}}catch(e){console.error("Failed to read or parse draws from localStorage",e)}return{count:i,lastUpdated:Date.now()}}function a(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(e){console.error("Failed to save draws to localStorage",e)}}function o(){let e=l(),t=Date.now()-e.lastUpdated;if(t>432e5&&e.count<i){let r=Math.floor(t/432e5),n=Math.min(e.count+r,i);return a({count:n,lastUpdated:e.lastUpdated+432e5*r}),n}return e.count}function s(){let e=l();if(e.count>0){let t=e.count-1,r=e.count===i?Date.now():e.lastUpdated;a({count:t,lastUpdated:r}),window.dispatchEvent(new StorageEvent("storage",{key:n,newValue:JSON.stringify({count:t,lastUpdated:r})}))}}function u(){let e=l();if(e.count>=i)return{success:!1,newCount:e.count};let t=Math.min(e.count+1,i),r=t===i?Date.now():e.lastUpdated,o={count:t,lastUpdated:r};return a(o),window.dispatchEvent(new StorageEvent("storage",{key:n,newValue:JSON.stringify(o)})),{success:!0,newCount:t}}},55044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>f,tree:()=>u});var n=r(65239),i=r(48088),l=r(88170),a=r.n(l),o=r(30893),s={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>o[e]);r.d(t,s);let u={children:["",{children:["(app)",{children:["room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25883)),"/home/user/studio/src/app/(app)/room/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"/home/user/studio/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(app)/room/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(app)/room/page",pathname:"/room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},59784:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"007c3e545aff6f125174734bb934867686df960b4e":()=>y});var n=r(91199);r(42087);var i=r(37612),l=r(56758);if(!process.env.GOOGLE_API_KEY)throw Error("GOOGLE_API_KEY environment variable not set. Please provide your API key in the .env file.");let a=(0,i.genkit)({plugins:[(0,l.YF)({apiKey:process.env.GOOGLE_API_KEY})],model:"googleai/gemini-2.0-flash"});var o=r(79748),s=r.n(o),u=r(33873),c=r.n(u),d=r(33331);let f=c().join(process.cwd(),"public","fallback-plants"),h=[{name:"Sunny Succulent",file:"succulent.png"},{name:"Happy Cactus",file:"cactus.png"},{name:"Blushing Bloom",file:"flower.png"}];async function p(e,t){let r=(await s().readFile(e)).toString("base64");return`data:${t};base64,${r}`}let m=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")}),g=a.definePrompt({name:"fallbackPlantDetailsPrompt",input:{schema:i.z.object({plantType:i.z.string()})},output:{schema:i.z.object({name:i.z.string().describe("A creative and unique two-word name for this type of plant."),description:i.z.string().describe("A short, whimsical, one-sentence description for this plant.")})},prompt:'You are a creative botanist for a game. Based on the plant type "{{plantType}}", generate a unique two-word name and a whimsical one-sentence description for it.'}),v=a.defineFlow({name:"getFallbackPlantFlow",inputSchema:i.z.object({}),outputSchema:m},async()=>{let e=h[Math.floor(Math.random()*h.length)],t=c().join(f,e.file);try{let r=await p(t,"image/png"),{output:n}=await g({plantType:e.name});if(!n)throw Error("Could not generate details for hardcoded fallback.");return{name:n.name,description:n.description,imageDataUri:r}}catch(e){return console.error("Critical error: Could not load hardcoded fallback image.",e),{name:"Resilient Sprout",description:"This little sprout survived a digital apocalypse to be here!",imageDataUri:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}}});(0,d.D)([v]),(0,n.A)(v,"7f49d206c7f575a34b5e8cf6868734d3675e6ddbbc",null);let x=i.z.object({}),b=i.z.object({name:i.z.string().describe("The creative and unique name of the new plant."),description:i.z.string().describe("A short, whimsical description of the plant."),imageDataUri:i.z.string().describe("A generated image of the plant, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'")});async function y(){return E({})}let w=a.definePrompt({name:"plantDetailsPrompt",input:{schema:x},output:{schema:i.z.object({name:i.z.string().describe("A creative and unique name for a new fantasy plant. Should be two words."),description:i.z.string().describe("A short, whimsical description for this new plant, in one sentence."),imagePrompt:i.z.string().describe('A simple visual prompt for an image generation model to create a picture of this plant. e.g., "A whimsical glowing mushroom plant with a happy face."')})},prompt:"You are a creative botanist for a game about collecting magical plants. Generate one new, unique, and whimsical plant. The plant should have a two-word name, a short one-sentence description, and a prompt for an image generator. The plant should sound like a cute character."}),E=a.defineFlow({name:"drawPlantFlow",inputSchema:x,outputSchema:b},async()=>{try{let{output:e}=await w({});if(!e)throw Error("Could not generate plant details.");let{media:t}=await a.generate({model:"googleai/gemini-2.0-flash-preview-image-generation",prompt:`A cute, 2D vector art illustration of a magical plant character: ${e.imagePrompt}. The plant should be in a simple terracotta pot with a happy, smiling face. The style should be clean, with bold outlines, suitable for a mobile game. The background must be solid white.`,config:{responseModalities:["TEXT","IMAGE"]}});if(!t||!t.url)throw Error("Could not generate plant image.");return{name:e.name,description:e.description,imageDataUri:t.url}}catch(e){return console.error("Gemini image generation failed, using fallback.",e),await v({})}});(0,d.D)([y]),(0,n.A)(y,"007c3e545aff6f125174734bb934867686df960b4e",null)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>f,Es:()=>p,HM:()=>c,L3:()=>m,c7:()=>h,lG:()=>s});var n=r(60687),i=r(43210),l=r(1553),a=r(78726),o=r(4780);let s=l.bL;l.l9;let u=l.ZL,c=l.bm,d=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(l.hJ,{ref:r,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));d.displayName=l.hJ.displayName;let f=i.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(u,{children:[(0,n.jsx)(d,{}),(0,n.jsxs)(l.UC,{ref:i,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,n.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(a.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=l.UC.displayName;let h=({className:e,...t})=>(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});h.displayName="DialogHeader";let p=({className:e,...t})=>(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});p.displayName="DialogFooter";let m=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(l.hE,{ref:r,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));m.displayName=l.hE.displayName,i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(l.VY,{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName=l.VY.displayName},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76590:(e,t,r)=>{Promise.resolve().then(r.bind(r,88285))},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},88285:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tN});var i,l,a,o,s,u,c,d,f,h,p=r(60687),m=r(29523),g=r(44493),v=r(63503),x=r(88526),b=r(81292),y=r(11516),w=r(30474),E=r(43210),j=r.n(E),C=r(29867),D=r(4780),N=r(51215);let S="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function k(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function M(e){return"nodeType"in e}function A(e){var t,r;return e?k(e)?e:M(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function R(e){let{Document:t}=A(e);return e instanceof t}function P(e){return!k(e)&&e instanceof A(e).HTMLElement}function O(e){return e instanceof A(e).SVGElement}function T(e){return e?k(e)?e.document:M(e)?R(e)?e:P(e)||O(e)?e.ownerDocument:document:document:document}let q=S?E.useLayoutEffect:E.useEffect;function L(e){let t=(0,E.useRef)(e);return q(()=>{t.current=e}),(0,E.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function z(e,t){void 0===t&&(t=[e]);let r=(0,E.useRef)(e);return q(()=>{r.current!==e&&(r.current=e)},t),r}function U(e,t){let r=(0,E.useRef)();return(0,E.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function I(e){let t=L(e),r=(0,E.useRef)(null),n=(0,E.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function F(e){let t=(0,E.useRef)();return(0,E.useEffect)(()=>{t.current=e},[e]),t.current}let B={};function _(e,t){return(0,E.useMemo)(()=>{if(t)return t;let r=null==B[e]?0:B[e]+1;return B[e]=r,e+"-"+r},[e,t])}function Y(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((t,r)=>{for(let[n,i]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*i)}return t},{...t})}}let G=Y(1),K=Y(-1);function X(e){if(!e)return!1;let{KeyboardEvent:t}=A(e.target);return t&&e instanceof t}function H(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=A(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let J=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[J.Translate.toString(e),J.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),W="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",V={display:"none"};function $(e){let{id:t,value:r}=e;return j().createElement("div",{id:t,style:V},r)}function Z(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return j().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let Q=(0,E.createContext)(null),ee={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},et={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function er(e){let{announcements:t=et,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=ee}=e,{announce:l,announcement:a}=function(){let[e,t]=(0,E.useState)("");return{announce:(0,E.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),o=_("DndLiveRegion"),[s,u]=(0,E.useState)(!1);(0,E.useEffect)(()=>{u(!0)},[]);var c=(0,E.useMemo)(()=>({onDragStart(e){let{active:r}=e;l(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&l(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;l(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;l(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;l(t.onDragCancel({active:r,over:n}))}}),[l,t]);let d=(0,E.useContext)(Q);if((0,E.useEffect)(()=>{if(!d)throw Error("useDndMonitor must be used within a children of <DndContext>");return d(c)},[c,d]),!s)return null;let f=j().createElement(j().Fragment,null,j().createElement($,{id:n,value:i.draggable}),j().createElement(Z,{id:o,announcement:a}));return r?(0,N.createPortal)(f,r):f}function en(){}function ei(e,t){return(0,E.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(i||(i={}));let el=Object.freeze({x:0,y:0});function ea(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let eo=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,i=[];for(let e of n){let{id:n}=e,l=r.get(n);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(n<i&&r<l){let a=t.width*t.height,o=e.width*e.height,s=(i-n)*(l-r);return Number((s/(a+o-s)).toFixed(4))}return 0}(l,t);r>0&&i.push({id:n,data:{droppableContainer:e,value:r}})}}return i.sort(ea)};function es(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:el}let eu=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}(1);function ec(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let ed={ignoreTransform:!1};function ef(e,t){void 0===t&&(t=ed);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=A(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=ec(t);if(!n)return e;let{scaleX:i,scaleY:l,x:a,y:o}=n,s=e.left-a-(1-i)*parseFloat(r),u=e.top-o-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),c=i?e.width/i:e.width,d=l?e.height/l:e.height;return{width:c,height:d,top:u,right:s+c,bottom:u+d,left:s}}(r,t,n))}let{top:n,left:i,width:l,height:a,bottom:o,right:s}=r;return{top:n,left:i,width:l,height:a,bottom:o,right:s}}function eh(e){return ef(e,{ignoreTransform:!0})}function ep(e,t){let r=[];return e?function n(i){var l;if(null!=t&&r.length>=t||!i)return r;if(R(i)&&null!=i.scrollingElement&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!P(i)||O(i)||r.includes(i))return r;let a=A(e).getComputedStyle(i);return(i!==e&&function(e,t){void 0===t&&(t=A(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let n=t[e];return"string"==typeof n&&r.test(n)})}(i,a)&&r.push(i),void 0===(l=a)&&(l=A(i).getComputedStyle(i)),"fixed"===l.position)?r:n(i.parentNode)}(e):r}function em(e){let[t]=ep(e,1);return null!=t?t:null}function eg(e){return S&&e?k(e)?e:M(e)?R(e)||e===T(e).scrollingElement?window:P(e)?e:null:null:null}function ev(e){return k(e)?e.scrollX:e.scrollLeft}function ex(e){return k(e)?e.scrollY:e.scrollTop}function eb(e){return{x:ev(e),y:ex(e)}}function ey(e){return!!S&&!!e&&e===document.scrollingElement}function ew(e){let t={x:0,y:0},r=ey(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:i,isLeft:l,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(l||(l={}));let eE={x:.2,y:.2};function ej(e){return e.reduce((e,t)=>G(e,eb(t)),el)}function eC(e,t){if(void 0===t&&(t=ef),!e)return;let{top:r,left:n,bottom:i,right:l}=t(e);em(e)&&(i<=0||l<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eD=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ev(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ex(t),0)}]];class eN{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=ep(t),n=ej(r);for(let[t,i,l]of(this.rect={...e},this.width=e.width,this.height=e.height,eD))for(let e of i)Object.defineProperty(this,e,{get:()=>{let i=l(r),a=n[t]-i;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eS{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function ek(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eM(e){e.preventDefault()}function eA(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(a||(a={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(o||(o={}));let eR={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},eP=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case o.Right:return{...r,x:r.x+25};case o.Left:return{...r,x:r.x-25};case o.Down:return{...r,y:r.y+25};case o.Up:return{...r,y:r.y-25}}};class eO{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new eS(T(t)),this.windowListeners=new eS(A(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(a.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eC(r),t(el)}handleKeyDown(e){if(X(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:i=eR,coordinateGetter:l=eP,scrollBehavior:a="smooth"}=n,{code:s}=e;if(i.end.includes(s))return void this.handleEnd(e);if(i.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:el;this.referenceCoordinates||(this.referenceCoordinates=c);let d=l(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=K(d,c),n={x:0,y:0},{scrollableAncestors:i}=r.current;for(let r of i){let i=e.code,{isTop:l,isRight:s,isLeft:u,isBottom:c,maxScroll:f,minScroll:h}=ew(r),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(i===o.Right?p.right-p.width/2:p.right,Math.max(i===o.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(i===o.Down?p.bottom-p.height/2:p.bottom,Math.max(i===o.Down?p.top:p.top+p.height/2,d.y))},g=i===o.Right&&!s||i===o.Left&&!u,v=i===o.Down&&!c||i===o.Up&&!l;if(g&&m.x!==d.x){let e=r.scrollLeft+t.x,l=i===o.Right&&e<=f.x||i===o.Left&&e>=h.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:a});l?n.x=r.scrollLeft-e:n.x=i===o.Right?r.scrollLeft-f.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:a});break}if(v&&m.y!==d.y){let e=r.scrollTop+t.y,l=i===o.Down&&e<=f.y||i===o.Up&&e>=h.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:a});l?n.y=r.scrollTop-e:n.y=i===o.Down?r.scrollTop-f.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:a});break}}this.handleMove(e,G(K(d,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eT(e){return!!(e&&"distance"in e)}function eq(e){return!!(e&&"delay"in e)}eO.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=eR,onActivation:i}=t,{active:l}=r,{code:a}=e.nativeEvent;if(n.start.includes(a)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class eL{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=A(e);return e instanceof t?e:T(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:i}=e,{target:l}=i;this.props=e,this.events=t,this.document=T(l),this.documentListeners=new eS(this.document),this.listeners=new eS(r),this.windowListeners=new eS(A(l)),this.initialCoordinates=null!=(n=H(i))?n:el,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.DragStart,eM),this.windowListeners.add(a.VisibilityChange,this.handleCancel),this.windowListeners.add(a.ContextMenu,eM),this.documentListeners.add(a.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eq(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eT(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(a.Click,eA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(a.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:i}=this,{onMove:l,options:{activationConstraint:a}}=i;if(!n)return;let o=null!=(t=H(e))?t:el,s=K(n,o);if(!r&&a){if(eT(a)){if(null!=a.tolerance&&ek(s,a.tolerance))return this.handleCancel();if(ek(s,a.distance))return this.handleStart()}return eq(a)&&ek(s,a.tolerance)?this.handleCancel():void this.handlePending(a,s)}e.cancelable&&e.preventDefault(),l(o)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===o.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let ez={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eU extends eL{constructor(e){let{event:t}=e;super(e,ez,T(t.target))}}eU.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];let eI={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(s||(s={}));class eF extends eL{constructor(e){super(e,eI,T(e.event.target))}}eF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==s.RightClick&&(null==n||n({event:r}),!0)}}];let eB={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class e_ extends eL{constructor(e){super(e,eB)}static setup(){return window.addEventListener(eB.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eB.move.name,e)};function e(){}}}e_.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:i}=r;return!(i.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(u||(u={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(c||(c={}));let eY={x:{[l.Backward]:!1,[l.Forward]:!1},y:{[l.Backward]:!1,[l.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(d||(d={})),(f||(f={})).Optimized="optimized";let eG=new Map;function eK(e,t){return U(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function eX(e){let{callback:t,disabled:r}=e,n=L(t),i=(0,E.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,E.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function eH(e){return new eN(ef(e),e)}function eJ(e,t,r){void 0===t&&(t=eH);let[n,i]=(0,E.useState)(null);function l(){i(n=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=n?n:r)?i:null}let l=t(e);return JSON.stringify(n)===JSON.stringify(l)?n:l})}let a=function(e){let{callback:t,disabled:r}=e,n=L(t),i=(0,E.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,E.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){l();break}}}}),o=eX({callback:l});return q(()=>{l(),e?(null==o||o.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==o||o.disconnect(),null==a||a.disconnect())},[e]),n}let eW=[];function eV(e,t){void 0===t&&(t=[]);let r=(0,E.useRef)(null);return(0,E.useEffect)(()=>{r.current=null},t),(0,E.useEffect)(()=>{let t=e!==el;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?K(e,r.current):el}function e$(e){return(0,E.useMemo)(()=>e?function(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}let eZ=[];function eQ(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return P(t)?t:e}let e0=[{sensor:eU,options:{}},{sensor:eO,options:{}}],e1={current:{}},e2={draggable:{measure:eh},droppable:{measure:eh,strategy:d.WhileDragging,frequency:f.Optimized},dragOverlay:{measure:ef}};class e4 extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let e5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e4,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:en},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:e2,measureDroppableContainers:en,windowRect:null,measuringScheduled:!1},e3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:en,draggableNodes:new Map,over:null,measureDroppableContainers:en},e7=(0,E.createContext)(e3),e6=(0,E.createContext)(e5);function e8(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e4}}}function e9(e,t){switch(t.type){case i.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case i.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case i.DragEnd:case i.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case i.RegisterDroppable:{let{element:r}=t,{id:n}=r,i=new e4(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case i.SetDroppableDisabled:{let{id:r,key:n,disabled:i}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let a=new e4(e.droppable.containers);return a.set(r,{...l,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case i.UnregisterDroppable:{let{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let l=new e4(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function te(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:i}=(0,E.useContext)(e7),l=F(n),a=F(null==r?void 0:r.id);return(0,E.useEffect)(()=>{if(!t&&!n&&l&&null!=a){if(!X(l)||document.activeElement===l.target)return;let e=i.get(a);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(W)?e:e.querySelector(W);if(t){t.focus();break}}})}},[n,t,i,a,l]),null}function tt(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let tr=(0,E.createContext)({...el,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(h||(h={}));let tn=(0,E.memo)(function(e){var t,r,n,a,o,s;let{id:f,accessibility:p,autoScroll:m=!0,children:g,sensors:v=e0,collisionDetection:x=eo,measuring:b,modifiers:y,...w}=e,[C,D]=(0,E.useReducer)(e9,void 0,e8),[k,M]=function(){let[e]=(0,E.useState)(()=>new Set),t=(0,E.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,E.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[R,O]=(0,E.useState)(h.Uninitialized),T=R===h.Initialized,{draggable:{active:L,nodes:B,translate:Y},droppable:{containers:K}}=C,X=null!=L?B.get(L):null,J=(0,E.useRef)({initial:null,translated:null}),W=(0,E.useMemo)(()=>{var e;return null!=L?{id:L,data:null!=(e=null==X?void 0:X.data)?e:e1,rect:J}:null},[L,X]),V=(0,E.useRef)(null),[$,Z]=(0,E.useState)(null),[ee,et]=(0,E.useState)(null),en=z(w,Object.values(w)),ei=_("DndDescribedBy",f),ea=(0,E.useMemo)(()=>K.getEnabled(),[K]),ec=(0,E.useMemo)(()=>({draggable:{...e2.draggable,...null==b?void 0:b.draggable},droppable:{...e2.droppable,...null==b?void 0:b.droppable},dragOverlay:{...e2.dragOverlay,...null==b?void 0:b.dragOverlay}}),[null==b?void 0:b.draggable,null==b?void 0:b.droppable,null==b?void 0:b.dragOverlay]),{droppableRects:ed,measureDroppableContainers:eh,measuringScheduled:ev}=function(e,t){let{dragging:r,dependencies:n,config:i}=t,[l,a]=(0,E.useState)(null),{frequency:o,measure:s,strategy:u}=i,c=(0,E.useRef)(e),f=function(){switch(u){case d.Always:return!1;case d.BeforeDragging:return r;default:return!r}}(),h=z(f),p=(0,E.useCallback)(function(e){void 0===e&&(e=[]),h.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),m=(0,E.useRef)(null),g=U(t=>{if(f&&!r)return eG;if(!t||t===eG||c.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eN(s(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,l,r,f,s]);return(0,E.useEffect)(()=>{c.current=e},[e]),(0,E.useEffect)(()=>{f||p()},[r,f]),(0,E.useEffect)(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),(0,E.useEffect)(()=>{f||"number"!=typeof o||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},o))},[o,f,p,...n]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=l}}(ea,{dragging:T,dependencies:[Y.x,Y.y],config:ec.droppable}),ex=function(e,t){let r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return U(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(B,L),eC=(0,E.useMemo)(()=>ee?H(ee):null,[ee]),eD=function(){let e=(null==$?void 0:$.autoScrollEnabled)===!1,t="object"==typeof m?!1===m.enabled:!1===m,r=T&&!e&&!t;return"object"==typeof m?{...m,enabled:r}:{enabled:r}}(),eS=eK(ex,ec.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e,l=(0,E.useRef)(!1),{x:a,y:o}="boolean"==typeof i?{x:i,y:i}:i;q(()=>{if(!a&&!o||!t){l.current=!1;return}if(l.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=es(r(e),n);if(a||(i.x=0),o||(i.y=0),l.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=em(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,a,o,n,r])}({activeNode:null!=L?B.get(L):null,config:eD.layoutShiftCompensation,initialRect:eS,measure:ec.draggable.measure});let ek=eJ(ex,ec.draggable.measure,eS),eM=eJ(ex?ex.parentElement:null),eA=(0,E.useRef)({activatorEvent:null,active:null,activeNode:ex,collisionRect:null,collisions:null,droppableRects:ed,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eR=K.getNodeFor(null==(t=eA.current.over)?void 0:t.id),eP=function(e){let{measure:t}=e,[r,n]=(0,E.useState)(null),i=eX({callback:(0,E.useCallback)(e=>{for(let{target:r}of e)if(P(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[l,a]=I((0,E.useCallback)(e=>{let r=eQ(e);null==i||i.disconnect(),r&&(null==i||i.observe(r)),n(r?t(r):null)},[t,i]));return(0,E.useMemo)(()=>({nodeRef:l,rect:r,setRef:a}),[r,l,a])}({measure:ec.dragOverlay.measure}),eO=null!=(r=eP.nodeRef.current)?r:ex,eT=T?null!=(n=eP.rect)?n:ek:null,eq=!!(eP.nodeRef.current&&eP.rect),eL=function(e){let t=eK(e);return es(e,t)}(eq?null:ek),ez=e$(eO?A(eO):null),eU=function(e){let t=(0,E.useRef)(e),r=U(r=>e?r&&r!==eW&&e&&t.current&&e.parentNode===t.current.parentNode?r:ep(e):eW,[e]);return(0,E.useEffect)(()=>{t.current=e},[e]),r}(T?null!=eR?eR:ex:null),eI=function(e,t){void 0===t&&(t=ef);let[r]=e,n=e$(r?A(r):null),[i,l]=(0,E.useState)(eZ);function a(){l(()=>e.length?e.map(e=>ey(e)?n:new eN(t(e),e)):eZ)}let o=eX({callback:a});return q(()=>{null==o||o.disconnect(),a(),e.forEach(e=>null==o?void 0:o.observe(e))},[e]),i}(eU),eF=tt(y,{transform:{x:Y.x-eL.x,y:Y.y-eL.y,scaleX:1,scaleY:1},activatorEvent:ee,active:W,activeNodeRect:ek,containerNodeRect:eM,draggingNodeRect:eT,over:eA.current.over,overlayNodeRect:eP.rect,scrollableAncestors:eU,scrollableAncestorRects:eI,windowRect:ez}),eB=eC?G(eC,Y):null,e_=function(e){let[t,r]=(0,E.useState)(null),n=(0,E.useRef)(e),i=(0,E.useCallback)(e=>{let t=eg(e.target);t&&r(e=>e?(e.set(t,eb(t)),new Map(e)):null)},[]);return(0,E.useEffect)(()=>{let t=n.current;if(e!==t){l(t);let a=e.map(e=>{let t=eg(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,eb(t)]):null}).filter(e=>null!=e);r(a.length?new Map(a):null),n.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=eg(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,E.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>G(e,t),el):ej(e):el,[e,t])}(eU),eH=eV(e_),e4=eV(e_,[ek]),e5=G(eF,eH),e3=eT?eu(eT,eF):null,tn=W&&e3?x({active:W,collisionRect:e3,droppableRects:ed,droppableContainers:ea,pointerCoordinates:eB}):null,ti=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(tn,"id"),[tl,ta]=(0,E.useState)(null),to=(o=eq?eF:G(eF,e4),s=null!=(a=null==tl?void 0:tl.rect)?a:null,{...o,scaleX:s&&ek?s.width/ek.width:1,scaleY:s&&ek?s.height/ek.height:1}),ts=(0,E.useRef)(null),tu=(0,E.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==V.current)return;let l=B.get(V.current);if(!l)return;let a=e.nativeEvent,o=new r({active:V.current,activeNode:l,event:a,options:n,context:eA,onAbort(e){if(!B.get(e))return;let{onDragAbort:t}=en.current,r={id:e};null==t||t(r),k({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!B.get(e))return;let{onDragPending:i}=en.current,l={id:e,constraint:t,initialCoordinates:r,offset:n};null==i||i(l),k({type:"onDragPending",event:l})},onStart(e){let t=V.current;if(null==t)return;let r=B.get(t);if(!r)return;let{onDragStart:n}=en.current,l={activatorEvent:a,active:{id:t,data:r.data,rect:J}};(0,N.unstable_batchedUpdates)(()=>{null==n||n(l),O(h.Initializing),D({type:i.DragStart,initialCoordinates:e,active:t}),k({type:"onDragStart",event:l}),Z(ts.current),et(a)})},onMove(e){D({type:i.DragMove,coordinates:e})},onEnd:s(i.DragEnd),onCancel:s(i.DragCancel)});function s(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:l}=eA.current,o=null;if(t&&l){let{cancelDrop:s}=en.current;o={activatorEvent:a,active:t,collisions:r,delta:l,over:n},e===i.DragEnd&&"function"==typeof s&&await Promise.resolve(s(o))&&(e=i.DragCancel)}V.current=null,(0,N.unstable_batchedUpdates)(()=>{D({type:e}),O(h.Uninitialized),ta(null),Z(null),et(null),ts.current=null;let t=e===i.DragEnd?"onDragEnd":"onDragCancel";if(o){let e=en.current[t];null==e||e(o),k({type:t,event:o})}})}}ts.current=o},[B]),tc=(0,E.useCallback)((e,t)=>(r,n)=>{let i=r.nativeEvent,l=B.get(n);null!==V.current||!l||i.dndKit||i.defaultPrevented||!0===e(r,t.options,{active:l})&&(i.dndKit={capturedBy:t.sensor},V.current=n,tu(r,t))},[B,tu]),td=(0,E.useMemo)(()=>v.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tc(e.handler,t)}))]},[]),[v,tc]);(0,E.useEffect)(()=>{if(!S)return;let e=v.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},v.map(e=>{let{sensor:t}=e;return t})),q(()=>{ek&&R===h.Initializing&&O(h.Initialized)},[ek,R]),(0,E.useEffect)(()=>{let{onDragMove:e}=en.current,{active:t,activatorEvent:r,collisions:n,over:i}=eA.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:n,delta:{x:e5.x,y:e5.y},over:i};(0,N.unstable_batchedUpdates)(()=>{null==e||e(l),k({type:"onDragMove",event:l})})},[e5.x,e5.y]),(0,E.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:i}=eA.current;if(!e||null==V.current||!t||!i)return;let{onDragOver:l}=en.current,a=n.get(ti),o=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,s={active:e,activatorEvent:t,collisions:r,delta:{x:i.x,y:i.y},over:o};(0,N.unstable_batchedUpdates)(()=>{ta(o),null==l||l(s),k({type:"onDragOver",event:s})})},[ti]),q(()=>{eA.current={activatorEvent:ee,active:W,activeNode:ex,collisionRect:e3,collisions:tn,droppableRects:ed,draggableNodes:B,draggingNode:eO,draggingNodeRect:eT,droppableContainers:K,over:tl,scrollableAncestors:eU,scrollAdjustedTranslate:e5},J.current={initial:eT,translated:e3}},[W,ex,tn,e3,B,eO,eT,ed,K,tl,eU,e5]),function(e){let{acceleration:t,activator:r=u.Pointer,canScroll:n,draggingRect:i,enabled:a,interval:o=5,order:s=c.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:m}=e,g=function(e){let{delta:t,disabled:r}=e,n=F(t);return U(e=>{if(r||!n||!e)return eY;let i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[l.Backward]:e.x[l.Backward]||-1===i.x,[l.Forward]:e.x[l.Forward]||1===i.x},y:{[l.Backward]:e.y[l.Backward]||-1===i.y,[l.Forward]:e.y[l.Forward]||1===i.y}}},[r,t,n])}({delta:p,disabled:!a}),[v,x]=function(){let e=(0,E.useRef)(null);return[(0,E.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,E.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),b=(0,E.useRef)({x:0,y:0}),y=(0,E.useRef)({x:0,y:0}),w=(0,E.useMemo)(()=>{switch(r){case u.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case u.DraggableRect:return i}},[r,i,d]),j=(0,E.useRef)(null),C=(0,E.useCallback)(()=>{let e=j.current;if(!e)return;let t=b.current.x*y.current.x,r=b.current.y*y.current.y;e.scrollBy(t,r)},[]),D=(0,E.useMemo)(()=>s===c.TreeOrder?[...f].reverse():f,[s,f]);(0,E.useEffect)(()=>{if(!a||!f.length||!w)return void x();for(let e of D){if((null==n?void 0:n(e))===!1)continue;let r=h[f.indexOf(e)];if(!r)continue;let{direction:i,speed:a}=function(e,t,r,n,i){let{top:a,left:o,right:s,bottom:u}=r;void 0===n&&(n=10),void 0===i&&(i=eE);let{isTop:c,isBottom:d,isLeft:f,isRight:h}=ew(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*i.y,width:t.width*i.x};return!c&&a<=t.top+g.height?(p.y=l.Backward,m.y=n*Math.abs((t.top+g.height-a)/g.height)):!d&&u>=t.bottom-g.height&&(p.y=l.Forward,m.y=n*Math.abs((t.bottom-g.height-u)/g.height)),!h&&s>=t.right-g.width?(p.x=l.Forward,m.x=n*Math.abs((t.right-g.width-s)/g.width)):!f&&o<=t.left+g.width&&(p.x=l.Backward,m.x=n*Math.abs((t.left+g.width-o)/g.width)),{direction:p,speed:m}}(e,r,w,t,m);for(let e of["x","y"])g[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0){x(),j.current=e,v(C,o),b.current=a,y.current=i;return}}b.current={x:0,y:0},y.current={x:0,y:0},x()},[t,C,n,x,a,o,JSON.stringify(w),JSON.stringify(g),v,f,D,h,JSON.stringify(m)])}({...eD,delta:Y,draggingRect:e3,pointerCoordinates:eB,scrollableAncestors:eU,scrollableAncestorRects:eI});let tf=(0,E.useMemo)(()=>({active:W,activeNode:ex,activeNodeRect:ek,activatorEvent:ee,collisions:tn,containerNodeRect:eM,dragOverlay:eP,draggableNodes:B,droppableContainers:K,droppableRects:ed,over:tl,measureDroppableContainers:eh,scrollableAncestors:eU,scrollableAncestorRects:eI,measuringConfiguration:ec,measuringScheduled:ev,windowRect:ez}),[W,ex,ek,ee,tn,eM,eP,B,K,ed,tl,eh,eU,eI,ec,ev,ez]),th=(0,E.useMemo)(()=>({activatorEvent:ee,activators:td,active:W,activeNodeRect:ek,ariaDescribedById:{draggable:ei},dispatch:D,draggableNodes:B,over:tl,measureDroppableContainers:eh}),[ee,td,W,ek,D,ei,B,tl,eh]);return j().createElement(Q.Provider,{value:M},j().createElement(e7.Provider,{value:th},j().createElement(e6.Provider,{value:tf},j().createElement(tr.Provider,{value:to},g)),j().createElement(te,{disabled:(null==p?void 0:p.restoreFocus)===!1})),j().createElement(er,{...p,hiddenTextDescribedById:ei}))}),ti=(0,E.createContext)(null),tl="button",ta={timeout:25};function to(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:l}=e,a=_("Droppable"),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=(0,E.useContext)(e7),d=(0,E.useRef)({disabled:r}),f=(0,E.useRef)(!1),h=(0,E.useRef)(null),p=(0,E.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...ta,...l},x=z(null!=g?g:n),b=eX({callback:(0,E.useCallback)(()=>{if(!f.current){f.current=!0;return}null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),disabled:m||!o}),[y,w]=I((0,E.useCallback)((e,t)=>{b&&(t&&(b.unobserve(t),f.current=!1),e&&b.observe(e))},[b])),j=z(t);return(0,E.useEffect)(()=>{b&&y.current&&(b.disconnect(),f.current=!1,b.observe(y.current))},[y,b]),(0,E.useEffect)(()=>(s({type:i.RegisterDroppable,element:{id:n,key:a,disabled:r,node:y,rect:h,data:j}}),()=>s({type:i.UnregisterDroppable,key:a,id:n})),[n]),(0,E.useEffect)(()=>{r!==d.current.disabled&&(s({type:i.SetDroppableDisabled,id:n,key:a,disabled:r}),d.current.disabled=r)},[n,a,r,s]),{active:o,rect:h,isOver:(null==u?void 0:u.id)===n,node:y,over:u,setNodeRef:w}}function ts(e){let{animation:t,children:r}=e,[n,i]=(0,E.useState)(null),[l,a]=(0,E.useState)(null),o=F(r);return r||n||!o||i(o),q(()=>{if(!l)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;if(null==e||null==r)return void i(null);Promise.resolve(t(r,l)).then(()=>{i(null)})},[t,n,l]),j().createElement(j().Fragment,null,r,n?(0,E.cloneElement)(n,{ref:a}):null)}let tu={x:0,y:0,scaleX:1,scaleY:1};function tc(e){let{children:t}=e;return j().createElement(e7.Provider,{value:e3},j().createElement(tr.Provider,{value:tu},t))}let td={position:"fixed",touchAction:"none"},tf=e=>X(e)?"transform 250ms ease":void 0,th=(0,E.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:i,children:l,className:a,rect:o,style:s,transform:u,transition:c=tf}=e;if(!o)return null;let d=i?u:{...u,scaleX:1,scaleY:1},f={...td,width:o.width,height:o.height,top:o.top,left:o.left,transform:J.Transform.toString(d),transformOrigin:i&&n?function(e,t){let r=H(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,o):void 0,transition:"function"==typeof c?c(n):c,...s};return j().createElement(r,{className:a,style:f,ref:t},l)}),tp={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:J.Transform.toString(t)},{transform:J.Transform.toString(r)}]},sideEffects:(n={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:r}=e,i={},{styles:l,className:a}=n;if(null!=l&&l.active)for(let[e,r]of Object.entries(l.active))void 0!==r&&(i[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,r));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=a&&a.active&&t.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(let[e,r]of Object.entries(i))t.node.style.setProperty(e,r);null!=a&&a.active&&t.node.classList.remove(a.active)}})},tm=0,tg=j().memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:i,transition:l,modifiers:a,wrapperElement:o="div",className:s,zIndex:u=999}=e,{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:h,draggableNodes:p,droppableContainers:m,dragOverlay:g,over:v,measuringConfiguration:x,scrollableAncestors:b,scrollableAncestorRects:y,windowRect:w}=(0,E.useContext)(e6),C=(0,E.useContext)(tr),D=function(e){return(0,E.useMemo)(()=>{if(null!=e)return++tm},[e])}(null==d?void 0:d.id),N=tt(a,{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:h,draggingNodeRect:g.rect,over:v,overlayNodeRect:g.rect,scrollableAncestors:b,scrollableAncestorRects:y,transform:C,windowRect:w}),S=eK(f),k=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=e;return L((e,l)=>{if(null===t)return;let a=r.get(e);if(!a)return;let o=a.node.current;if(!o)return;let s=eQ(l);if(!s)return;let{transform:u}=A(l).getComputedStyle(l),c=ec(u);if(!c)return;let d="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:i}={...tp,...e};return e=>{let{active:l,dragOverlay:a,transform:o,...s}=e;if(!t)return;let u={x:a.rect.left-l.rect.left,y:a.rect.top-l.rect.top},c={scaleX:1!==o.scaleX?l.rect.width*o.scaleX/a.rect.width:1,scaleY:1!==o.scaleY?l.rect.height*o.scaleY/a.rect.height:1},d={x:o.x-u.x,y:o.y-u.y,...c},f=i({...s,active:l,dragOverlay:a,transform:{initial:o,final:d}}),[h]=f,p=f[f.length-1];if(JSON.stringify(h)===JSON.stringify(p))return;let m=null==n?void 0:n({active:l,dragOverlay:a,...s}),g=a.node.animate(f,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return eC(o,i.draggable.measure),d({active:{id:e,data:a.data,node:o,rect:i.draggable.measure(o)},draggableNodes:r,dragOverlay:{node:l,rect:i.dragOverlay.measure(s)},droppableContainers:n,measuringConfiguration:i,transform:c})})}({config:n,draggableNodes:p,droppableContainers:m,measuringConfiguration:x}),M=S?g.setRef:void 0;return j().createElement(tc,null,j().createElement(ts,{animation:k},d&&D?j().createElement(th,{key:D,id:d.id,ref:M,as:o,activatorEvent:c,adjustScale:t,className:s,transition:l,rect:S,style:{zIndex:u,...i},transform:N},r):null))});var tv=r(53125);async function tx(e,t=256){return new Promise((r,n)=>{let i=new window.Image;i.onload=()=>{let e=document.createElement("canvas"),{width:l,height:a}=i;l>a?l>t&&(a=Math.round(a*t/l),l=t):a>t&&(l=Math.round(l*t/a),a=t),e.width=l,e.height=a;let o=e.getContext("2d");if(!o)return n(Error("Could not get canvas context"));o.drawImage(i,0,0,l,a),r(e.toDataURL("image/png"))},i.onerror=n,i.src=e})}function tb(){return(0,p.jsx)("div",{className:"flex h-20 w-20 flex-col items-center justify-center gap-1 rounded-lg border-2 border-dashed border-primary/30 pointer-events-none"})}function ty({plant:e,open:t,onOpenChange:r}){return e?(0,p.jsx)(v.lG,{open:t,onOpenChange:r,children:(0,p.jsxs)(v.Cf,{className:"max-w-sm",children:[(0,p.jsx)(v.c7,{children:(0,p.jsx)(v.L3,{className:"font-headline text-3xl text-center",children:"A new plant!"})}),(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,p.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,p.jsx)(w.default,{src:e.imageDataUri,alt:e.name,width:256,height:256,className:"object-cover w-full h-full"})}),(0,p.jsx)("h3",{className:"text-2xl font-headline text-primary",children:e.name}),(0,p.jsx)("p",{className:"text-muted-foreground text-center",children:e.description})]}),(0,p.jsx)(v.Es,{children:(0,p.jsx)(v.HM,{asChild:!0,children:(0,p.jsx)(m.$,{className:"w-full font-headline text-lg",children:"Collect"})})})]})}):null}function tw({plant:e,open:t,onOpenChange:r}){return e?(0,p.jsx)(v.lG,{open:t,onOpenChange:r,children:(0,p.jsxs)(v.Cf,{className:"max-w-sm",children:[(0,p.jsx)(v.c7,{children:(0,p.jsx)(v.L3,{className:"font-headline text-3xl text-center",children:e.name})}),(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,p.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100 flex items-center justify-center",children:"placeholder"!==e.image?(0,p.jsx)(w.default,{src:e.image,alt:e.name,width:256,height:256,className:"object-cover w-full h-full","data-ai-hint":e.hint}):(0,p.jsx)(b.A,{className:"w-24 h-24 text-muted-foreground/50"})}),(0,p.jsx)("p",{className:"text-muted-foreground text-center mt-2",children:e.description}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Form"}),(0,p.jsx)("p",{className:"text-lg font-semibold text-primary",children:e.form})]})]}),(0,p.jsx)(v.Es,{children:(0,p.jsx)(v.HM,{asChild:!0,children:(0,p.jsx)(m.$,{variant:"outline",className:"w-full",children:"Close"})})})]})}):null}function tE({plant:e}){return(0,p.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,p.jsx)("div",{className:"relative h-20 w-20 pointer-events-none flex items-center justify-center",children:"placeholder"!==e.image?(0,p.jsx)(w.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain","data-ai-hint":e.hint}):(0,p.jsx)("div",{className:"w-full h-full flex items-center justify-center rounded-lg bg-muted/20",children:(0,p.jsx)(b.A,{className:"w-12 h-12 text-muted-foreground/50"})})}),(0,p.jsx)("p",{className:"mt-1 text-xs font-semibold text-primary truncate w-full pointer-events-none",children:e.name})]})}function tj({plant:e}){return(0,p.jsx)(g.Zp,{className:"group overflow-hidden shadow-md w-full",children:(0,p.jsxs)(g.Wu,{className:"p-0",children:[(0,p.jsx)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:"placeholder"!==e.image?(0,p.jsx)(w.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover","data-ai-hint":e.hint}):(0,p.jsx)(b.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"})}),(0,p.jsxs)("div",{className:"p-2 text-center bg-white/50",children:[(0,p.jsx)("p",{className:"text-sm font-semibold text-primary truncate",children:e.name}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:e.form})]})]})})}function tC({plant:e,source:t,onClick:r}){let{attributes:n,listeners:i,setNodeRef:l,isDragging:a}=function(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e,l=_("Draggable"),{activators:a,activatorEvent:o,active:s,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:f}=(0,E.useContext)(e7),{role:h=tl,roleDescription:p="draggable",tabIndex:m=0}=null!=i?i:{},g=(null==s?void 0:s.id)===t,v=(0,E.useContext)(g?tr:ti),[x,b]=I(),[y,w]=I(),j=(0,E.useMemo)(()=>a.reduce((e,r)=>{let{eventName:n,handler:i}=r;return e[n]=e=>{i(e,t)},e},{}),[a,t]),C=z(r);return q(()=>(d.set(t,{id:t,key:l,node:x,activatorNode:y,data:C}),()=>{let e=d.get(t);e&&e.key===l&&d.delete(t)}),[d,t]),{active:s,activatorEvent:o,activeNodeRect:u,attributes:(0,E.useMemo)(()=>({role:h,tabIndex:m,"aria-disabled":n,"aria-pressed":!!g&&h===tl||void 0,"aria-roledescription":p,"aria-describedby":c.draggable}),[n,h,m,g,p,c.draggable]),isDragging:g,listeners:n?void 0:j,node:x,over:f,setNodeRef:b,setActivatorNodeRef:w,transform:v}}({id:`${t}:${e.id}`,data:{plant:e,source:t}}),o={opacity:a?.4:1,touchAction:"none"};return"desk"===t?(0,p.jsx)("div",{ref:l,style:o,...i,...n,onClick:r,className:"flex flex-col items-center text-center cursor-grab active:cursor-grabbing h-full w-full justify-center",children:(0,p.jsx)(tE,{plant:e})}):(0,p.jsx)("div",{ref:l,style:o,...i,...n,onClick:r,className:"cursor-grab active:cursor-grabbing",children:(0,p.jsx)(tj,{plant:e})})}function tD({plant:e,index:t,activePlantData:r,onClickPlant:n}){let{isOver:i,setNodeRef:l}=to({id:`pot:${t}`});return(0,p.jsx)("div",{ref:l,className:(0,D.cn)("relative flex h-24 w-24 items-center justify-center rounded-lg transition-colors",i&&"bg-primary/20"),children:e?(0,p.jsx)(tC,{plant:e,source:"desk",onClick:()=>n(e)}):i&&r?(0,p.jsx)("div",{className:"flex flex-col items-center text-center opacity-60 pointer-events-none",children:(0,p.jsx)(tE,{plant:r.plant})}):(0,p.jsx)(tb,{})})}function tN(){let{toast:e}=(0,C.dj)(),[t,r]=(0,E.useState)(!1),[n,i]=(0,E.useState)(null),[l,a]=(0,E.useState)([]),[o,s]=(0,E.useState)([,,,].fill(null)),[u,c]=(0,E.useState)(null),[d,f]=(0,E.useState)(null),[h,g]=(0,E.useState)(0),v=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,E.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(ei(eU,{activationConstraint:{distance:8}}),ei(e_,{activationConstraint:{delay:150,tolerance:5}})),w=(()=>{if(!d)return null;let[e,t]=d.split(":"),r=parseInt(t,10),n="desk"===e?o.find(e=>e?.id===r):l.find(e=>e.id===r);return n?{plant:n,source:e}:null})(),j=(0,E.useCallback)(()=>{g((0,tv.yk)())},[]),D=async()=>{if(h<=0)return void e({variant:"destructive",title:"No Draws Left",description:"Visit the shop to get more draws or wait for your daily refill."});r(!0);try{let e=await (0,x.a)(),t=await tx(e.imageDataUri);i({...e,imageDataUri:t}),(0,tv.iF)(),j()}catch(t){console.error(t),e({variant:"destructive",title:"Failed to draw a plant",description:"There was an issue with the AI. Please try again."})}finally{r(!1)}},N=async e=>{let t=[...l,...o.filter(e=>null!==e)].reduce((e,t)=>Math.max(t.id,e),0),r=await tx(e.imageDataUri),n={id:t+1,name:e.name,form:"Base",image:r,hint:e.name.toLowerCase().split(" ").slice(0,2).join(" "),description:e.description};a(e=>[...e,n])};return(0,p.jsx)(tn,{sensors:v,onDragStart:e=>{f(e.active.id)},onDragEnd:e=>{f(null);let{active:t,over:r}=e;if(!r||!t||t.id===r.id)return;let n=t.data.current?.plant;if(!n)return;let[i]=t.id.split(":"),[u,c]=r.id.split(":"),d=[...o],h=[...l],p="desk"===i?d.findIndex(e=>e?.id===n.id):-1;if("pot"===u){let e=parseInt(c,10),t=d[e];"collection"===i?(h=h.filter(e=>e.id!==n.id),t&&h.push(t),d[e]=n):"desk"===i&&-1!==p&&(d[e]=n,d[p]=t)}else"collection"===u&&"desk"===i&&-1!==p&&(d[p]=null,h.find(e=>e.id===n.id)||h.push(n));s(d),a(h.sort((e,t)=>e.id-t.id))},onDragCancel:()=>f(null),children:(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between p-4",children:[(0,p.jsx)("h1",{className:"font-headline text-2xl text-primary",children:"My Room"}),(0,p.jsx)(m.$,{variant:"secondary",className:"font-semibold",onClick:D,disabled:t||h<=0,children:t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Drawing..."]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Draw Plant (",h," left)"]})})]}),(0,p.jsx)("section",{className:"px-4",children:(0,p.jsx)("div",{className:"h-48 rounded-lg border-2 border-primary/20 bg-cover bg-center p-6",style:{backgroundImage:"url(/desk.jpg)"},children:(0,p.jsx)("div",{className:"flex h-full items-end justify-around",children:o.map((e,t)=>(0,p.jsx)(tD,{plant:e,index:t,activePlantData:w,onClickPlant:c},e?.id||`pot-${t}`))})})}),(0,p.jsxs)("section",{className:"px-4 pb-4",children:[(0,p.jsx)("h2",{className:"mb-4 font-headline text-xl text-primary",children:"My Collection"}),(0,p.jsx)(tS,{children:(0,p.jsx)("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-4 lg:grid-cols-5",children:l.length>0?l.map(e=>(0,p.jsx)(tC,{plant:e,source:"collection",onClick:()=>c(e)},e.id)):(0,p.jsx)("div",{className:"col-span-3 text-center text-muted-foreground py-8",children:"Your collection is empty. Go to the Home screen to draw a new plant!"})})})]}),(0,p.jsx)(ty,{plant:n,open:!!n,onOpenChange:e=>{e||(n&&N(n),i(null))}}),(0,p.jsx)(tw,{plant:u,open:!!u,onOpenChange:e=>{e||c(null)}}),(0,p.jsx)(tg,{children:w?"desk"===w.source?(0,p.jsx)(tE,{plant:w.plant}):(0,p.jsx)("div",{className:"w-28",children:(0,p.jsx)(tj,{plant:w.plant})}):null})]})})}function tS({children:e}){let{isOver:t,setNodeRef:r}=to({id:"collection:area"});return(0,p.jsx)("div",{ref:r,className:(0,D.cn)("rounded-lg border bg-muted/10 p-2 min-h-24",t&&"bg-primary/10 border-2 border-dashed border-primary/50"),children:e})}},88526:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(6475);let i=(0,n.createServerReference)("007c3e545aff6f125174734bb934867686df960b4e",n.callServer,void 0,n.findSourceMapURL,"drawPlant")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,611,567,444,637,251],()=>r(55044));module.exports=n})();