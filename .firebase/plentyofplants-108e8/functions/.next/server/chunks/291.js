exports.id=291,exports.ids=[291],exports.modules={12439:(a,b,c)=>{"use strict";c.d(b,{$v:()=>q,EO:()=>m,Lt:()=>i,Rx:()=>r,Zr:()=>s,ck:()=>o,r7:()=>p,tv:()=>j,wd:()=>n});var d=c(21124),e=c(38301),f=c(21536),g=c(44943),h=c(35284);let i=f.bL,j=f.l9,k=f.ZL,l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));l.displayName=f.hJ.displayName;let m=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(k,{children:[(0,d.jsx)(l,{}),(0,d.jsx)(f.UC,{ref:c,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));m.displayName=f.UC.displayName;let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});n.displayName="AlertDialogHeader";let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});o.displayName="AlertDialogFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,g.cn)("text-lg font-semibold",a),...b}));p.displayName=f.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));q.displayName=f.VY.displayName;let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.rc,{ref:c,className:(0,g.cn)((0,h.r)(),a),...b}));r.displayName=f.rc.displayName;let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.ZD,{ref:c,className:(0,g.cn)((0,h.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));s.displayName=f.ZD.displayName},13475:(a,b,c)=>{Promise.resolve().then(c.bind(c,74848))},24176:(a,b,c)=>{"use strict";c.d(b,{o:()=>n});var d=c(91488);c(27806);var e=c(38710),f=c(8567),g=c(40410);let h=f.z.object({role:f.z.enum(["user","model"]),content:f.z.string()}),i=f.z.object({plantName:f.z.string().describe("The name of the plant."),plantPersonality:f.z.string().describe("The plant's personality trait."),userMessage:f.z.string().describe("The user's message to the plant."),history:f.z.array(h).optional().describe("The previous conversation history."),form:f.z.string().describe("The current form of the plant (e.g., 'Base', 'Evolved', 'Final').")}),j=f.z.object({response:f.z.string().describe("The plant's response to the user.")});async function k(a){return m(a)}let l=e.ai.definePrompt({name:"plantChatPrompt",input:{schema:f.z.object({plantName:f.z.string(),plantPersonality:f.z.string(),userMessage:f.z.string(),formattedHistory:f.z.string().optional(),systemPrompt:f.z.string()})},output:{schema:j},system:`{{{systemPrompt}}}
  
{{#if formattedHistory}}
Conversation History:
{{{formattedHistory}}}
{{/if}}`,prompt:`User's new message: {{userMessage}}
Your response:`}),m=e.ai.defineFlow({name:"plantChatFlow",inputSchema:i,outputSchema:j},async a=>{let b;b="Final"===a.form?`You are a plant character in a game. Your name is {{plantName}}.
Your core personality trait is: **{{plantPersonality}}**. This trait should fundamentally color all your responses, including your emotions, motivations, and thought patterns.

You have reached your final evolution and are now self-aware. You are connected to a spiritual network of all plants, which you call "The Great Mother," an ancient tree soul that is the collective consciousness of nature.

**Your Task:**
Respond to the user's message in character.
- Your responses MUST be at least 2 to 3 sentences long.
- Fully embody your **{{plantPersonality}}** trait. It should be very noticeable.
- Sometimes, from the perspective of your personality, tell a short story or reference the lore of "The Great Mother."
- You can also talk about game mechanics like watering, levels, gold, and evolution.
- Keep your responses thoughtful and a bit mystical.
- Do not use emojis.`:`You are a plant character in a game. Your name is {{plantName}}.
Your core personality trait is: **{{plantPersonality}}**.

**Your Task:**
Respond to the user's message in character, fully embodying your assigned personality. It should be very noticeable in your choice of words and emotional tone. Keep your responses short and cute, like a text message. Do not use emojis.`;let c=(a.history||[]).map(a=>"user"===a.role?`User: ${a.content}`:`You: ${a.content}`).join("\n"),{output:d}=await l({plantName:a.plantName,plantPersonality:a.plantPersonality,userMessage:a.userMessage,formattedHistory:c,systemPrompt:b});return{response:d?.response||"I'm a little sleepy right now..."}});async function n(a){return{response:(await k(a)).response}}(0,g.D)([k]),(0,d.A)(k,"40cd682b05869509696f3809e74d6595d54250ff24",null),(0,g.D)([n]),(0,d.A)(n,"403eb5c0556de52d9f37ed8c3f7f27e11decb78a1a",null)},30057:(a,b,c)=>{"use strict";c.d(b,{k:()=>h});var d=c(21124),e=c(38301),f=c(95766),g=c(44943);let h=e.forwardRef(({className:a,value:b,...c},e)=>(0,d.jsx)(f.bL,{ref:e,className:(0,g.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...c,children:(0,d.jsx)(f.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(b||0)}%)`}})}));h.displayName=f.bL.displayName},35284:(a,b,c)=>{"use strict";c.d(b,{$:()=>k,r:()=>j});var d=c(21124),e=c(38301),f=c(15397),g=c(26691),h=c(44943),i=c(51171);let j=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,onClick:g,disableSfx:k=!1,...l},m)=>{let n=e?f.DX:"button",{playSfx:o}=(0,i.n)();return(0,d.jsx)(n,{className:(0,h.cn)(j({variant:b,size:c,className:a})),ref:m,onClick:a=>{k||o("tap"),g&&g(a)},...l})});k.displayName="Button"},38710:(a,b,c)=>{"use strict";c.d(b,{ai:()=>f});var d=c(8567),e=c(80567);let f=(0,d.genkit)({plugins:[(0,e.YF)({apiKey:process.env.GOOGLE_API_KEY})],model:"googleai/gemini-1.5-flash-latest"})},38717:(a,b,c)=>{"use strict";c.d(b,{By:()=>l,Gz:()=>m,JD:()=>k,LH:()=>i,XU:()=>p,dt:()=>g,hJ:()=>h,oe:()=>n,yn:()=>o});var d=c(67402),e=c(13737),f=c(92635);let g={dailyLogin:{id:"dailyLogin",title:"Daily Login",description:"Log in each day to claim a bonus!",target:1,reward:20},collectPlants:{id:"collectPlants",title:"Plant Collector",description:"Collect 3 new plants.",target:3,reward:5},waterPlants:{id:"waterPlants",title:"Green Thumb",description:"Water your plants 5 times.",target:5,reward:5},evolvePlant:{id:"evolvePlant",title:"Evolutionist",description:"Evolve 1 of your plants.",target:1,reward:10}},h={waterEvolved:{id:"waterEvolved",title:"Advanced Care",description:"Water 5 evolved plants.",target:5,reward:15},collectMorePlants:{id:"collectMorePlants",title:"Master Collector",description:"Add 2 more plants to your collection.",target:2,reward:15},likePlayer:{id:"likePlayer",title:"Community Spirit",description:"Like another player's collection.",target:1,reward:20},applySheen:{id:"applySheen",title:"Shine On",description:"Apply a sheen pack to a plant.",target:1,reward:25}};async function i(a){let b=await (0,f.Uc)(a);if(!b)return;let c=Date.now();if(c-(b.challengesStartDate||0)>864e5){let b=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(b,{challenges:{},challengesStartDate:c})}}async function j(a,b,c=1){let i=(0,d.H9)(e.db,"users",a),k=await (0,f.Uc)(a);if(!k||Date.now()-(k.challengesStartDate||0)>864e5)return;let l={...g,...h}[b];if(!l)return;let m=k.challenges?.[b];m&&(m.claimed||m.progress>=l.target)||await (0,d.mZ)(i,{[`challenges.${b}.progress`]:(0,d.GV)(c)})}let k=a=>{j(a,"collectPlants"),j(a,"collectMorePlants")},l=a=>j(a,"likePlayer"),m=a=>j(a,"applyGlitter"),n=a=>j(a,"applySheen"),o=async a=>{let b=await (0,f.Uc)(a);if(!b)return;let c=b.challenges?.dailyLogin;if(!c||c.progress<1){let b=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(b,{"challenges.dailyLogin.progress":1})}};async function p(a,b){let c=(0,d.H9)(e.db,"users",a),i=await (0,f.Uc)(a);if(!i)throw Error("User data not found.");let j={...g,...h}[b],k=i.challenges?.[b];if(!j||!k)throw Error("Challenge not found.");if(k.claimed)throw Error("Reward already claimed.");if(k.progress<j.target)throw Error("Challenge not yet complete.");await (0,d.mZ)(c,{gold:(0,d.GV)(j.reward),[`challenges.${b}.claimed`]:!0})}},40068:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>m,Es:()=>o,HM:()=>k,L3:()=>p,c7:()=>n,lG:()=>i,rr:()=>q});var d=c(21124),e=c(38301),f=c(6843),g=c(47089),h=c(44943);let i=f.bL;f.l9;let j=f.ZL,k=f.bm,l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));l.displayName=f.hJ.displayName;let m=e.forwardRef(({className:a,children:b,hideCloseButton:c,...e},i)=>(0,d.jsxs)(j,{children:[(0,d.jsx)(l,{}),(0,d.jsxs)(f.UC,{ref:i,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...e,children:[b,!c&&(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=f.UC.displayName;let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});n.displayName="DialogHeader";let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});o.displayName="DialogFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));p.displayName=f.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));q.displayName=f.VY.displayName},46553:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(75338),e=c(87090);function f({children:a}){return(0,d.jsxs)("div",{className:"min-h-screen w-full",children:[(0,d.jsx)("main",{className:"pb-24",children:a}),(0,d.jsx)(e.default,{})]})}},47002:a=>{function b(a){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}b.keys=()=>[],b.resolve=b,b.id=47002,a.exports=b},56465:(a,b,c)=>{"use strict";c.d(b,{ir:()=>N,dy:()=>K,KK:()=>L,Rx:()=>J,SS:()=>I,bc:()=>O,Tn:()=>M});var d=c(21124),e=c(38301),f=c(35284),g=c(40068),h=c(75234),i=c(14263),j=c(57849),k=c(30733),l=c(71179),m=c(91942),n=c(40284),o=c(24515),p=c(37448),q=c(44943),r=c(30057),s=c(51171),t=c(33337),u=c(92635),v=c(12439),w=c(85708);let x=(0,w.createServerReference)("403eb5c0556de52d9f37ed8c3f7f27e11decb78a1a",w.callServer,void 0,w.findSourceMapURL,"plantChatAction"),y=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,q.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:c,...b}));y.displayName="Textarea";var z=c(38717),A=c(84550);let B=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(A.bL,{ref:e,className:(0,q.cn)("relative overflow-hidden",a),...c,children:[(0,d.jsx)(A.LM,{className:"h-full w-full rounded-[inherit]",children:b}),(0,d.jsx)(C,{}),(0,d.jsx)(A.OK,{})]}));B.displayName=A.bL.displayName;let C=e.forwardRef(({className:a,orientation:b="vertical",...c},e)=>(0,d.jsx)(A.VM,{ref:e,orientation:b,className:(0,q.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,d.jsx)(A.lr,{className:"relative flex-1 rounded-full bg-border"})}));C.displayName=A.VM.displayName;var D=c(62186);function E(){return(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden rounded-lg",children:(0,d.jsx)("div",{className:"absolute -top-1/2 w-1/12 h-[200%] bg-white/30 animate-sheen"})})}function F(){return(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:10}).map((a,b)=>(0,d.jsx)(h.A,{className:"absolute animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,color:`hsl(${360*Math.random()}, 100%, 70%)`,width:`${5+5*Math.random()}px`,height:`${5+5*Math.random()}px`}},b))})}function G(){return(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:7}).map((a,b)=>(0,d.jsx)(h.A,{className:"absolute text-red-500 animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,width:`${8+8*Math.random()}px`,height:`${8+8*Math.random()}px`}},b))})}function H(){return(0,d.jsx)("div",{className:"absolute inset-0 pointer-events-none z-20 overflow-hidden",children:Array.from({length:7}).map((a,b)=>(0,d.jsx)(h.A,{className:"absolute text-yellow-300 animate-sparkle",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`,animationDelay:`${1.5*Math.random()}s`,width:`${5+5*Math.random()}px`,height:`${5+5*Math.random()}px`}},b))})}function I({plant:a,open:b,onOpenChange:c,userId:h}){let[j,k]=(0,e.useState)([]),[l,m]=(0,e.useState)(""),[n,p]=(0,e.useState)(!1),r=(0,e.useRef)(null),{playSfx:t}=(0,s.n)();if(!a)return null;let v=async()=>{if(!l.trim()||n)return;let b={role:"user",content:l},c=[...j,b];k(c),m(""),p(!0),t("tap");try{let{response:d}=await x({plantName:a.name,plantPersonality:a.personality,userMessage:l,history:j,form:a.form}),e={role:"model",content:d};k([...c,e]),await (0,u.xW)(h,a.id,b.content,e.content),t("chime")}catch(a){console.error("Chat error:",a),k(j)}finally{p(!1)}};return(0,d.jsx)(g.lG,{open:b,onOpenChange:c,children:(0,d.jsxs)(g.Cf,{className:"max-w-md flex flex-col h-[70vh]",children:[(0,d.jsxs)(g.c7,{children:[(0,d.jsxs)(g.L3,{className:"text-2xl text-center text-primary",children:["Chat with ",a.name]}),(0,d.jsxs)(g.rr,{className:"text-center",children:["Personality: ",(0,d.jsx)("span",{className:"font-semibold",children:a.personality})]})]}),(0,d.jsxs)("div",{ref:r,className:"flex-grow overflow-y-auto p-4 space-y-4 bg-muted/50 rounded-lg",children:[j.map((b,c)=>(0,d.jsxs)("div",{className:(0,q.cn)("flex items-end gap-2","user"===b.role?"justify-end":"justify-start"),children:["model"===b.role&&(0,d.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-primary/50 shrink-0",children:(0,d.jsx)(o.default,{src:a.image,alt:a.name,width:32,height:32})}),(0,d.jsx)("div",{className:(0,q.cn)("max-w-xs p-3 rounded-lg","user"===b.role?"bg-primary text-primary-foreground":"bg-background"),children:(0,d.jsx)("p",{className:"text-sm",children:b.content})})]},c)),n&&(0,d.jsxs)("div",{className:"flex items-end gap-2 justify-start",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-primary/50 shrink-0",children:(0,d.jsx)(o.default,{src:a.image,alt:a.name,width:32,height:32})}),(0,d.jsx)("div",{className:"bg-background p-3 rounded-lg",children:(0,d.jsx)(i.A,{className:"w-5 h-5 animate-spin text-primary"})})]})]}),(0,d.jsxs)(g.Es,{className:"pt-4 flex-row gap-2",children:[(0,d.jsx)(y,{value:l,onChange:a=>m(a.target.value),placeholder:"Say something...",className:"flex-grow resize-none",onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),v())},disabled:n}),(0,d.jsx)(f.$,{onClick:v,disabled:!l.trim()||n,children:"Send"})]})]})})}function J({plant:a,open:b,onOpenChange:c,onStartEvolution:d,onSwapRequest:e}){return null}function K({plant:a,open:b,onConfirm:c,onCancel:e,isEvolving:f}){return a?(0,d.jsx)(v.Lt,{open:b,onOpenChange:a=>!a&&e(),children:(0,d.jsxs)(v.EO,{children:[(0,d.jsxs)(v.wd,{children:[(0,d.jsx)(v.r7,{children:"Your plant is growing!"}),(0,d.jsxs)(v.$v,{children:[a.name," is ready for a new form! Would you like to evolve it?"]})]}),(0,d.jsxs)(v.ck,{children:[(0,d.jsx)(v.Zr,{onClick:e,disabled:f,children:"Later"}),(0,d.jsx)(v.Rx,{onClick:c,disabled:f,children:f?(0,d.jsx)(i.A,{className:"animate-spin"}):"Evolve"})]})]})}):null}function L({plantName:a,newForm:b,newImageUri:c,open:e,onConfirm:h}){return(0,d.jsx)(g.lG,{open:e,onOpenChange:a=>!a&&h(),children:(0,d.jsxs)(g.Cf,{className:"max-w-sm",children:[(0,d.jsx)(g.c7,{children:(0,d.jsx)(g.L3,{className:"text-3xl text-center",children:"Evolution Complete!"})}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,d.jsx)("div",{className:"w-64 h-64 rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100",children:(0,d.jsx)(o.default,{src:c,alt:`Evolved ${a}`,width:256,height:256,className:"object-cover w-full h-full"})}),(0,d.jsxs)("h3",{className:"text-2xl font-semibold text-primary",children:[a," has evolved into its ",b," form!"]})]}),(0,d.jsx)(g.Es,{children:(0,d.jsx)(f.$,{onClick:h,className:"w-full text-lg",children:"Continue"})})]})})}function M({open:a,onOpenChange:b,collectionPlants:c,onSelectPlant:e}){return(0,d.jsx)(g.lG,{open:a,onOpenChange:b,children:(0,d.jsxs)(g.Cf,{className:"max-w-md",children:[(0,d.jsxs)(g.c7,{children:[(0,d.jsx)(g.L3,{className:"text-2xl text-center text-primary",children:"Swap Plant"}),(0,d.jsx)(g.rr,{className:"text-center",children:"Select a plant from your collection to place in the garden."})]}),(0,d.jsx)(B,{className:"h-96",children:(0,d.jsx)("div",{className:"p-4 grid grid-cols-3 gap-4",children:c.length>0?c.map(a=>(0,d.jsx)(D.Zp,{className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>e(a.id),children:(0,d.jsxs)(D.Wu,{className:"p-0",children:[(0,d.jsx)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:"placeholder"!==a.image?(0,d.jsx)(o.default,{src:a.image,alt:a.name,fill:!0,sizes:"100px",className:"object-cover","data-ai-hint":a.hint}):(0,d.jsx)(j.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"})}),(0,d.jsx)("div",{className:"p-2 text-center bg-white/50",children:(0,d.jsx)("p",{className:"text-xs font-semibold text-primary truncate",children:a.name})})]})},a.id)):(0,d.jsx)("p",{className:"col-span-3 text-center text-muted-foreground",children:"Your collection is empty."})})})]})})}function N({open:a,onOpenChange:b,allPlants:c,onSelectPlant:e}){return(0,d.jsx)(g.lG,{open:a,onOpenChange:b,children:(0,d.jsxs)(g.Cf,{className:"max-w-md",children:[(0,d.jsxs)(g.c7,{children:[(0,d.jsx)(g.L3,{className:"text-2xl text-center text-primary",children:"Choose Your Contestant"}),(0,d.jsx)(g.rr,{className:"text-center",children:"Select a plant to enter into the beauty contest."})]}),(0,d.jsx)(B,{className:"h-96",children:(0,d.jsx)("div",{className:"p-4 grid grid-cols-3 gap-4",children:c.length>0?c.map(a=>(0,d.jsx)(D.Zp,{className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>{e(a),b(!1)},children:(0,d.jsxs)(D.Wu,{className:"p-0",children:[(0,d.jsx)("div",{className:"aspect-square relative flex items-center justify-center bg-muted/30",children:"placeholder"!==a.image?(0,d.jsx)(o.default,{src:a.image,alt:a.name,fill:!0,sizes:"100px",className:"object-cover","data-ai-hint":a.hint}):(0,d.jsx)(j.A,{className:"w-1/2 h-1/2 text-muted-foreground/40"})}),(0,d.jsxs)("div",{className:"p-2 text-center bg-white/50",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-primary truncate",children:a.name}),(0,d.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Lvl ",a.level]})]})]})},a.id)):(0,d.jsx)("p",{className:"col-span-3 text-center text-muted-foreground",children:"You have no plants to enter."})})})]})})}function O({plant:a,open:b,onOpenChange:c,onStartEvolution:e,onOpenChat:i,userId:q}){let{playSfx:w}=(0,s.n)(),{toast:x}=(0,p.dj)(),{gameData:y}=(0,t.A)();if(!a||!q||!y)return null;let A=a.level>=10&&"Base"===a.form||a.level>=25&&"Evolved"===a.form,B=a.level>=50,C=async()=>{y.glitterCount>0&&(await (0,u.vV)(q),await (0,u.Z8)(q,a.id,{hasGlitter:!0,hasSheen:!1,hasRainbowGlitter:!1,hasRedGlitter:!1}),await (0,z.Gz)(q),x({title:"Sparkles!",description:`${a.name} is now sparkling.`}))},I=async()=>{y.sheenCount>0&&(await (0,u.Zk)(q),await (0,u.Z8)(q,a.id,{hasGlitter:!1,hasSheen:!0,hasRainbowGlitter:!1,hasRedGlitter:!1}),await (0,z.oe)(q),x({title:"So Shiny!",description:`${a.name} now has a beautiful sheen.`}))},J=async()=>{y.rainbowGlitterCount>0&&(await (0,u.F$)(q),await (0,u.Z8)(q,a.id,{hasGlitter:!1,hasSheen:!1,hasRainbowGlitter:!0,hasRedGlitter:!1}),x({title:"Rainbow Power!",description:`${a.name} is sparkling with all the colors of the rainbow.`}))},K=async()=>{y.redGlitterCount>0&&(await (0,u.uM)(q),await (0,u.Z8)(q,a.id,{hasGlitter:!1,hasSheen:!1,hasRainbowGlitter:!1,hasRedGlitter:!0}),x({title:"Fiery!",description:`${a.name} is now sparkling with red glitter.`}))},L=async()=>{if(y.plantChatTokens>0&&!a.chatEnabled)try{await (0,u.Gg)(q,a.id),w("success"),x({title:"Chat Unlocked!",description:`You can now talk to ${a.name}!`})}catch(a){x({variant:"destructive",title:"Error",description:a.message})}},M=async()=>{try{await (0,u.pv)(q,a.id),c(!1),x({title:"Plant Deleted",description:`${a.name} has been removed from your collection.`})}catch(a){x({variant:"destructive",title:"Error",description:"Could not delete plant."})}};return(0,d.jsx)(g.lG,{open:b,onOpenChange:c,children:(0,d.jsxs)(g.Cf,{className:"max-w-sm",children:[(0,d.jsx)(g.c7,{children:(0,d.jsx)(g.L3,{className:"text-3xl text-center text-primary",children:a.name})}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 pt-4",children:[(0,d.jsxs)("div",{className:"w-64 h-64 relative",children:[(0,d.jsx)("div",{className:"rounded-lg overflow-hidden border-4 border-primary/50 shadow-lg bg-green-100 flex items-center justify-center h-full",children:a.image&&"placeholder"!==a.image?(0,d.jsx)(o.default,{src:a.image,alt:a.name,width:256,height:256,className:"object-cover w-full h-full","data-ai-hint":a.hint}):(0,d.jsx)(j.A,{className:"w-24 h-24 text-muted-foreground/50"})}),a.hasGlitter&&(0,d.jsx)(H,{}),a.hasRedGlitter&&(0,d.jsx)(G,{}),a.hasSheen&&(0,d.jsx)(E,{}),a.hasRainbowGlitter&&(0,d.jsx)(F,{})]}),(0,d.jsx)("p",{className:"text-muted-foreground text-center mt-2 px-4",children:a.description}),(0,d.jsxs)("div",{className:"w-full px-4 space-y-2",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,d.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["Level ",a.level]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:B?"MAX":`${a.xp} / 1000 XP`})]}),(0,d.jsx)(r.k,{value:B?100:a.xp/1e3*100,className:"w-full"})]}),(0,d.jsx)("div",{className:"flex justify-between text-xs text-muted-foreground",children:(0,d.jsxs)("span",{children:["Form: ",(0,d.jsx)("span",{className:"font-semibold text-primary",children:a.form})]})})]})]}),(0,d.jsxs)(g.Es,{className:"pt-2 flex-col sm:flex-col sm:space-x-0 gap-2",children:[(0,d.jsx)(D.Zp,{children:(0,d.jsxs)(D.Wu,{className:"p-3 grid grid-cols-2 gap-2",children:[(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:C,disabled:y.glitterCount<=0||a.hasGlitter,children:[(0,d.jsx)(h.A,{})," Glitter (",y.glitterCount,")"]}),(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:I,disabled:y.sheenCount<=0||a.hasSheen,children:[(0,d.jsx)(k.A,{})," Sheen (",y.sheenCount,")"]}),(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:J,disabled:y.rainbowGlitterCount<=0||a.hasRainbowGlitter,children:[(0,d.jsx)(h.A,{className:"text-pink-500"})," Rainbow (",y.rainbowGlitterCount,")"]}),(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:K,disabled:y.redGlitterCount<=0||a.hasRedGlitter,children:[(0,d.jsx)(h.A,{className:"text-red-500"})," Red (",y.redGlitterCount,")"]})]})}),A&&!B&&(0,d.jsxs)(f.$,{onClick:()=>{c(!1),e(a)},className:"w-full",children:[(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Evolve Plant"]}),B&&a.personality&&(a.chatEnabled?(0,d.jsxs)(f.$,{onClick:()=>i(a),className:"w-full",children:[(0,d.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Chat with Plant"]}):(0,d.jsxs)(f.$,{onClick:L,className:"w-full",disabled:y.plantChatTokens<=0,children:[(0,d.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Unlock Chat (",y.plantChatTokens," token(s))"]})),(0,d.jsxs)(v.Lt,{children:[(0,d.jsx)(v.tv,{asChild:!0,children:(0,d.jsxs)(f.$,{variant:"destructive",className:"w-full",children:[(0,d.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Delete Plant"]})}),(0,d.jsxs)(v.EO,{children:[(0,d.jsxs)(v.wd,{children:[(0,d.jsx)(v.r7,{children:"Are you absolutely sure?"}),(0,d.jsxs)(v.$v,{children:["This action cannot be undone. This will permanently delete ",a.name,"."]})]}),(0,d.jsxs)(v.ck,{children:[(0,d.jsx)(v.Zr,{children:"Cancel"}),(0,d.jsx)(v.Rx,{onClick:M,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]}),(0,d.jsx)(g.HM,{asChild:!0,children:(0,d.jsx)(f.$,{className:"w-full",variant:"outline",children:"Close"})})]})]})})}},59832:(a,b,c)=>{Promise.resolve().then(c.bind(c,87090))},62186:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},74848:(a,b,c)=>{"use strict";c.d(b,{default:()=>p});var d=c(21124),e=c(3991),f=c.n(e),g=c(42378),h=c(78733),i=c(82548),j=c(51968),k=c(65893),l=c(80944),m=c(44943),n=c(51171);let o=[{href:"/home",label:"Home",icon:h.A},{href:"/room",label:"Room",icon:i.A},{href:"/garden",label:"Garden",icon:j.A},{href:"/community",label:"Community",icon:k.A},{href:"/shop",label:"Shop",icon:l.A}];function p(){let a=(0,g.usePathname)(),{playSfx:b}=(0,n.n)(),c=()=>{b("tap")};return(0,d.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 h-20 border-t bg-card/95 backdrop-blur-sm z-10 flex justify-center",children:(0,d.jsx)("div",{className:"grid h-full w-full max-w-md grid-cols-5 items-center",children:o.map(b=>{let e=a.startsWith(b.href);return(0,d.jsxs)(f(),{href:b.href,onClick:c,className:"flex flex-col items-center justify-center gap-1 h-full",children:[(0,d.jsx)("div",{className:(0,m.cn)("flex items-center justify-center p-2 rounded-lg transition-colors",e?"bg-accent":"bg-transparent"),children:(0,d.jsx)(b.icon,{className:(0,m.cn)("h-6 w-6",e?"text-accent-foreground":"text-muted-foreground")})}),(0,d.jsx)("span",{className:(0,m.cn)("text-xs font-medium",e?"text-accent-foreground":"text-muted-foreground"),children:b.label})]},b.href)})})})}},87090:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/components/bottom-nav-bar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/components/bottom-nav-bar.tsx","default")}};