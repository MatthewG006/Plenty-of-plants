exports.id=718,exports.ids=[718],exports.modules={8467:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>u});var d=c(21124);c(44263);var e=c(37448),f=c(38301),g=c(76608),h=c(26691),i=c(47089),j=c(44943);let k=g.Kq,l=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.LM,{ref:c,className:(0,j.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...b}));l.displayName=g.LM.displayName;let m=(0,h.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),n=f.forwardRef(({className:a,variant:b,...c},e)=>(0,d.jsx)(g.bL,{ref:e,className:(0,j.cn)(m({variant:b}),a),...c}));n.displayName=g.bL.displayName,f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.rc,{ref:c,className:(0,j.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...b})).displayName=g.rc.displayName;let o=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.bm,{ref:c,className:(0,j.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...b,children:(0,d.jsx)(i.A,{className:"h-4 w-4"})}));o.displayName=g.bm.displayName;let p=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.hE,{ref:c,className:(0,j.cn)("text-sm font-semibold",a),...b}));p.displayName=g.hE.displayName;let q=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.VY,{ref:c,className:(0,j.cn)("text-sm opacity-90",a),...b}));function r(){let{toasts:a}=(0,e.dj)();return(0,d.jsxs)(k,{children:[a.map(function({id:a,title:b,description:c,action:e,...f}){return(0,d.jsxs)(n,{...f,children:[(0,d.jsxs)("div",{className:"grid gap-1",children:[b&&(0,d.jsx)(p,{children:b}),c&&(0,d.jsx)(q,{children:c})]}),e,(0,d.jsx)(o,{})]},a)}),(0,d.jsx)(l,{})]})}q.displayName=g.VY.displayName;var s=c(33337),t=c(51171);function u({children:a}){return(0,d.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("title",{children:"Plenty of Plants"}),(0,d.jsx)("meta",{name:"description",content:"Collect and grow your own digital plant collection!"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),(0,d.jsx)("link",{rel:"apple-touch-icon",href:"/icon-512.png"}),(0,d.jsx)("link",{rel:"manifest",href:"/manifest.webmanifest"})]}),(0,d.jsx)("body",{className:"font-body antialiased",suppressHydrationWarning:!0,children:(0,d.jsx)(t.G,{children:(0,d.jsxs)(s.O,{children:[a,(0,d.jsx)(r,{})]})})})]})}},13737:(a,b,c)=>{"use strict";c.d(b,{db:()=>i,j:()=>h});var d=c(34410),e=c(40490),f=c(67402);let g=(0,d.Dk)().length?(0,d.Sx)():(0,d.Wp)({apiKey:"AIzaSyBxgn4A1fMUdIwUKdDh4KWyjJTSle2dXQE",authDomain:"plentyofplants-108e8.firebaseapp.com",projectId:"plentyofplants-108e8",storageBucket:"plentyofplants-108e8.appspot.com",messagingSenderId:"317861154450",appId:"1:317861154450:web:3a586f3cc5b1c42e64e04b"}),h=(0,e.xI)(g),i=(0,f.aU)(g)},32642:(a,b,c)=>{Promise.resolve().then(c.bind(c,51472))},33337:(a,b,c)=>{"use strict";c.d(b,{A:()=>l,O:()=>k});var d=c(21124),e=c(38301),f=c(40490),g=c(13737),h=c(67402),i=c(92635);let j=(0,e.createContext)({user:null,gameData:null,loading:!0}),k=({children:a})=>{let[b,c]=(0,e.useState)(null),[k,l]=(0,e.useState)(null),[m,n]=(0,e.useState)(!0);return(0,e.useEffect)(()=>{let a=(0,f.hg)(g.j,async a=>{c(a),a||(l(null),n(!1))});return()=>a()},[]),(0,e.useEffect)(()=>{if(b){let a=(0,h.H9)(g.db,"users",b.uid),c=(0,h.aQ)(a,a=>{a.exists()?l(a.data()):(0,i.Jt)(b).then(a=>{l(a)}),n(!1)},a=>{console.error("Firestore subscription error:",a),l(null),n(!1)});return()=>c()}},[b]),(0,d.jsx)(j.Provider,{value:{user:b,gameData:k,loading:m},children:a})},l=()=>(0,e.useContext)(j)},37448:(a,b,c)=>{"use strict";c.d(b,{dj:()=>l});var d=c(38301);let e=0,f=new Map,g=a=>{if(f.has(a))return;let b=setTimeout(()=>{f.delete(a),j({type:"REMOVE_TOAST",toastId:a})},1e6);f.set(a,b)},h=[],i={toasts:[]};function j(a){i=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?g(c):a.toasts.forEach(a=>{g(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(i,a),h.forEach(a=>{a(i)})}function k({...a}){let b=(e=(e+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>j({type:"DISMISS_TOAST",toastId:b});return j({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>j({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function l(){let[a,b]=d.useState(i);return d.useEffect(()=>(h.push(b),()=>{let a=h.indexOf(b);a>-1&&h.splice(a,1)}),[a]),{...a,toast:k,dismiss:a=>j({type:"DISMISS_TOAST",toastId:a})}}},44263:()=>{},44943:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},50794:(a,b,c)=>{Promise.resolve().then(c.bind(c,8467))},51171:(a,b,c)=>{"use strict";c.d(b,{G:()=>g,n:()=>h});var d=c(21124),e=c(38301);let f=(0,e.createContext)(void 0),g=({children:a})=>{let[b,c]=(0,e.useState)(()=>.75),[g,h]=(0,e.useState)(()=>.2),[i,j]=(0,e.useState)(!1),k=(0,e.useRef)(null),l={tap:(0,e.useRef)(null),success:(0,e.useRef)(null),reward:(0,e.useRef)(null),chime:(0,e.useRef)(null),watering:(0,e.useRef)(null)};(0,e.useEffect)(()=>{},[]),(0,e.useEffect)(()=>{k.current&&(k.current.volume=g),localStorage.setItem("musicVolume",String(g))},[g]);let m=(0,e.useCallback)(()=>{k.current&&k.current.paused&&k.current.play().then(()=>{j(!0)}).catch(a=>console.error("Music play failed on start:",a))},[]),n=(0,e.useCallback)(()=>{k.current&&(i?k.current.pause():k.current.play().catch(a=>console.error("Music play failed on toggle:",a)),j(!i))},[i]),o=(0,e.useCallback)(a=>{let c=l[a].current;c&&(c.volume=b,c.currentTime=0,c.play().catch(a=>console.error("SFX play failed",a)))},[b,l]);return(0,d.jsx)(f.Provider,{value:{sfxVolume:b,setSfxVolume:a=>{c(a),localStorage.setItem("sfxVolume",String(a))},musicVolume:g,setMusicVolume:a=>{h(a)},isMusicPlaying:i,toggleMusic:n,startMusic:m,playSfx:o},children:a})},h=()=>{let a=(0,e.useContext)(f);if(void 0===a)throw Error("useAudio must be used within an AudioProvider");return a}},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/layout.tsx","default")},56620:(a,b,c)=>{"use strict";c.d(b,{$k:()=>l,RY:()=>g,h$:()=>k,iF:()=>i,mi:()=>h,tM:()=>j});var d=c(67402),e=c(13737),f=c(92635);let g=2;async function h(a){let b=await (0,f.Uc)(a);if(!b)return 0;let c=Date.now(),h=b.lastDrawRefill||c,i=c-h;if(i<432e5)return 0;let j=Math.floor(i/432e5),k=h+432e5*j,l=b.draws;if(l>=g){let b=(0,d.H9)(e.db,"users",a);return await (0,d.mZ)(b,{lastDrawRefill:k}),0}let m=Math.min(l+j,g),n=m-l;if(n>0){let b=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(b,{draws:m,lastDrawRefill:k})}return n}async function i(a){let b=await (0,f.Uc)(a);if(b&&b.draws>0){let c={draws:b.draws-1};b.draws===g&&(c.lastDrawRefill=Date.now());let f=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(f,c)}}async function j(a){let b=await (0,f.Uc)(a);if(b&&b.draws<g){let b=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(b,{draws:(0,d.GV)(1)})}}async function k(a){let b=await (0,f.Uc)(a);return!!b&&!!b.lastFreeDrawClaimed&&new Date(b.lastFreeDrawClaimed).toDateString()===new Date().toDateString()}async function l(a,b){let c=await (0,f.Uc)(a);if(!c)return{success:!1,newCount:0};let h=c.draws||0;if(h>=g)return{success:!1,newCount:h,reason:"max_draws"};if(!b?.bypassTimeCheck&&await k(a))return{success:!1,newCount:h,reason:"already_claimed"};if(b?.cost&&c.gold<b.cost)return{success:!1,newCount:h,reason:"not_enough_gold"};let i=h+1,j=Date.now(),l=(0,d.H9)(e.db,"users",a),m={draws:i};return b?.bypassTimeCheck||(m.lastFreeDrawClaimed=j),b?.cost&&b.cost>0&&(m.gold=(0,d.GV)(-b.cost)),i===g&&(m.lastDrawRefill=j),await (0,d.mZ)(l,m),{success:!0,newCount:i}}},62889:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},92635:(a,b,c)=>{"use strict";c.d(b,{F$:()=>u,FQ:()=>z,Gg:()=>B,JS:()=>q,Jt:()=>j,R:()=>A,U3:()=>p,Uc:()=>i,VI:()=>y,VS:()=>k,VZ:()=>D,Z8:()=>n,Zk:()=>t,eL:()=>o,hj:()=>l,k_:()=>r,pv:()=>w,tj:()=>m,uM:()=>v,vV:()=>s,w:()=>E,xW:()=>C,zw:()=>x});var d=c(67402),e=c(13737),f=c(56620),g=c(15003);function h(a){let b=new Date,c=new Date(a);return c.getDate()===b.getDate()&&c.getMonth()===b.getMonth()&&c.getFullYear()===b.getFullYear()}async function i(a){let b=(0,d.H9)(e.db,"users",a),c=await (0,d.x7)(b);if(!c.exists())return null;{let a=c.data(),b=a.likedUsers||{};return Array.isArray(a.likedUsers)&&(b=a.likedUsers.reduce((a,b)=>(a[b]=1,a),{})),{gold:a.gold||0,plants:a.plants||{},collectionPlantIds:a.collectionPlantIds||[],deskPlantIds:a.deskPlantIds||[,,,].fill(null),gardenPlantIds:a.gardenPlantIds||Array(12).fill(null),seeds:a.seeds||[],draws:a.draws??f.RY,lastDrawRefill:a.lastDrawRefill||Date.now(),lastFreeDrawClaimed:a.lastFreeDrawClaimed||0,lastLoginBonusClaimed:a.lastLoginBonusClaimed||0,sprinklerUnlocked:a.sprinklerUnlocked||!1,glitterCount:a.glitterCount||0,sheenCount:a.sheenCount||0,rainbowGlitterCount:a.rainbowGlitterCount||0,redGlitterCount:a.redGlitterCount||0,fertilizerCount:a.fertilizerCount||0,showcasePlantIds:a.showcasePlantIds||[],challenges:a.challenges||{},challengesStartDate:a.challengesStartDate||0,likes:a.likes||0,likedUsers:b,autoWaterUnlocked:a.autoWaterUnlocked||!1,autoWaterEnabled:a.autoWaterEnabled||!1,waterRefillCount:a.waterRefillCount||0,rubyCount:a.rubyCount||0,plantChatTokens:a.plantChatTokens||0}}}async function j(a){let b=(0,d.H9)(e.db,"users",a.uid);if(!(await (0,d.x7)(b)).exists()){let c=Math.floor(360*Math.random()),e=`hsl(${c}, 70%, 85%)`,g={gold:20,plants:{1:{id:1,name:"Friendly Fern",description:"A happy little fern to start your collection.",image:"/fern.png",baseImage:"",uncompressedImage:"/fern.png",form:"Base",hint:"fern plant",level:1,xp:0,lastWatered:[],hasGlitter:!1,hasSheen:!1,hasRainbowGlitter:!1,hasRedGlitter:!1,personality:"",chatEnabled:!1,conversationHistory:[]}},collectionPlantIds:[],deskPlantIds:[,,,].fill(null),gardenPlantIds:Array(12).fill(null),seeds:[],draws:f.RY,lastDrawRefill:Date.now(),lastFreeDrawClaimed:0,lastLoginBonusClaimed:Date.now(),sprinklerUnlocked:!1,glitterCount:0,sheenCount:0,rainbowGlitterCount:0,redGlitterCount:0,fertilizerCount:0,showcasePlantIds:[],challenges:{},challengesStartDate:Date.now(),likes:0,likedUsers:{},autoWaterUnlocked:!1,autoWaterEnabled:!1,waterRefillCount:0,rubyCount:0,plantChatTokens:0};return g.deskPlantIds[0]=1,await (0,d.BN)(b,{email:a.email,username:a.displayName,avatarColor:e,gameId:`#${a.uid.slice(0,8).toUpperCase()}`,...g}),g}return await i(a.uid)}async function k(a,b,c){let f=(0,d.H9)(e.db,"users",a),g=await i(a);if(!g)throw Error("User data not found, cannot save plant.");let h=Object.keys(g.plants).map(Number),j={id:(h.length>0?Math.max(...h):0)+1,name:b.name||"Mysterious Sprout",description:b.description||"A new plant has arrived.",image:b.imageDataUri||"",baseImage:"",uncompressedImage:c,form:"Base",hint:(b.name||"").toLowerCase().split(" ").slice(0,2).join(" "),level:1,xp:0,lastWatered:[],hasGlitter:!1,hasSheen:!1,hasRainbowGlitter:!1,hasRedGlitter:!1,personality:"",chatEnabled:!1,conversationHistory:[]},k=g.deskPlantIds.findIndex(a=>null===a),l={[`plants.${j.id}`]:j};if(-1!==k){let a=[...g.deskPlantIds];a[k]=j.id,l.deskPlantIds=a}else l.collectionPlantIds=(0,d.hq)(j.id);return await (0,d.mZ)(f,l),j}async function l(a,b,c){await (0,d.mZ)((0,d.H9)(e.db,"users",a),{collectionPlantIds:b,deskPlantIds:c})}async function m(a,b,c){await (0,d.mZ)((0,d.H9)(e.db,"users",a),{collectionPlantIds:b,gardenPlantIds:c})}async function n(a,b,c){let f=(0,d.H9)(e.db,"users",a),g={};if(0===b)g={...c};else for(let[a,d]of Object.entries(c))g[`plants.${b}.${a}`]=d;Object.keys(g).length>0&&await (0,d.mZ)(f,g)}async function o(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.gold<b)throw Error("Not enough gold to purchase.");if(f.sprinklerUnlocked)throw Error("Sprinkler already owned.");await (0,d.mZ)(c,{gold:(0,d.GV)(-b),sprinklerUnlocked:!0})}async function p(a){let b=(0,d.H9)(e.db,"users",a),c=await i(a);if(!c)throw Error("User data not found.");let f=Object.values(c.plants||{});if(0===f.length)return{plantsWatered:0,seedsCollected:0,newlyEvolvablePlants:[]};let j=0,k=[],l=[],m={};for(let a of f){let b=a.lastWatered.filter(h).length;if(b>=4)continue;let d=4-b,e=a.xp,f=a.level,i=f>=10&&"Base"===a.form||f>=25&&"Evolved"===a.form,n=[...a.lastWatered];for(let a=0;a<d;a++)for(n.push(Date.now()+a),e+=200;e>=1e3;)e-=1e3,f+=1,c.seeds.length+l.length<9&&l.push({id:(0,g.A)(),startTime:Date.now()});m[`plants.${a.id}.xp`]=e,m[`plants.${a.id}.level`]=f,m[`plants.${a.id}.lastWatered`]=n,(f>=10&&"Base"===a.form||f>=25&&"Evolved"===a.form)&&!i&&k.push(a.id),d>0&&j++}return j>0&&(l.length>0&&(m.seeds=(0,d.hq)(...l)),await (0,d.mZ)(b,m)),{plantsWatered:j,seedsCollected:l.length,newlyEvolvablePlants:k}}async function q(a,b,c,f){let g=(0,d.H9)(e.db,"users",a),h=await i(a);if(!h||h.gold<f)throw Error("Not enough gold to purchase.");await (0,d.mZ)(g,{gold:(0,d.GV)(-f),[b]:(0,d.GV)(c)})}async function r(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.gold<b)throw Error("Not enough gold to purchase the bundle.");await (0,d.mZ)(c,{gold:(0,d.GV)(-b),glitterCount:(0,d.GV)(1),sheenCount:(0,d.GV)(1),rainbowGlitterCount:(0,d.GV)(1),redGlitterCount:(0,d.GV)(1),waterRefillCount:(0,d.GV)(1)})}async function s(a){let b=(0,d.H9)(e.db,"users",a),c=await i(a);if(!c||c.glitterCount<=0)throw Error("No glitter to use.");await (0,d.mZ)(b,{glitterCount:(0,d.GV)(-1)})}async function t(a){let b=(0,d.H9)(e.db,"users",a),c=await i(a);if(!c||c.sheenCount<=0)throw Error("No sheen packs to use.");await (0,d.mZ)(b,{sheenCount:(0,d.GV)(-1)})}async function u(a){let b=(0,d.H9)(e.db,"users",a),c=await i(a);if(!c||c.rainbowGlitterCount<=0)throw Error("No rainbow glitter packs to use.");await (0,d.mZ)(b,{rainbowGlitterCount:(0,d.GV)(-1)})}async function v(a){let b=(0,d.H9)(e.db,"users",a),c=await i(a);if(!c||c.redGlitterCount<=0)throw Error("No red glitter packs to use.");await (0,d.mZ)(b,{redGlitterCount:(0,d.GV)(-1)})}async function w(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||!f.plants[b])throw Error("Plant not found for deletion.");let{[`${b}`]:g,...h}=f.plants,j=f.deskPlantIds.map(a=>a===b?null:a),k=f.gardenPlantIds.map(a=>a===b?null:a),l=f.collectionPlantIds.filter(a=>a!==b),m=f.showcasePlantIds.filter(a=>a!==b);await (0,d.mZ)(c,{plants:h,deskPlantIds:j,gardenPlantIds:k,collectionPlantIds:l,showcasePlantIds:m})}async function x(a,b){let c=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(c,{showcasePlantIds:b})}async function y(a,b){let c=(0,d.H9)(e.db,"users",a),f=(0,d.H9)(e.db,"users",b),g=await i(a);if(!g)throw Error("Liker data not found.");if(a===b)throw Error("You cannot like yourself.");let h=Date.now(),j=g.likedUsers[b];if(j&&h-j<864e5)throw Error("You have already liked this user today.");let k=(0,d.wP)(e.db);k.update(c,{[`likedUsers.${b}`]:h}),k.update(f,{likes:(0,d.GV)(1),gold:(0,d.GV)(5)}),await k.commit()}async function z(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.gold<b)throw Error("Not enough gold to purchase.");await (0,d.mZ)(c,{gold:(0,d.GV)(-b),waterRefillCount:(0,d.GV)(1)})}async function A(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.rubyCount<b)throw Error("Not enough rubies to purchase.");await (0,d.mZ)(c,{rubyCount:(0,d.GV)(-b),plantChatTokens:(0,d.GV)(1)})}async function B(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.plantChatTokens<=0)throw Error("You don't have a Plant Chat token to use.");let g=f.plants[b];if(!g)throw Error("Plant not found.");if(g.chatEnabled)throw Error("Chat is already unlocked for this plant.");await (0,d.mZ)(c,{plantChatTokens:(0,d.GV)(-1),[`plants.${b}.chatEnabled`]:!0})}async function C(a,b,c,f){let g=(0,d.H9)(e.db,"users",a);await (0,d.mZ)(g,{[`plants.${b}.conversationHistory`]:(0,d.hq)({role:"user",content:c},{role:"model",content:f})})}async function D(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||!f.seeds)return;let g=f.seeds.find(a=>a.id===b);g&&await (0,d.mZ)(c,{seeds:(0,d.C3)(g)})}async function E(a,b){let c=(0,d.H9)(e.db,"users",a),f=await i(a);if(!f||f.fertilizerCount<=0)throw Error("No fertilizer available.");let g=f.seeds.find(a=>a.id===b);if(!g)throw Error("Seed not found.");let h=g.startTime-288e5,j=f.seeds.map(a=>a.id===b?{...a,startTime:h}:a);await (0,d.mZ)(c,{fertilizerCount:(0,d.GV)(-1),seeds:j})}},97737:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))}};